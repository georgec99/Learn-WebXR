/*! For license information please see main.js.LICENSE.txt */
var main;(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=100,n=301,i=302,r=306,s=1e3,o=1001,a=1002,l=1003,h=1004,c=1005,u=1006,d=1008,m=1009,p=1012,f=1014,g=1015,x=1016,v=1020,q=1023,_=1026,y=1027,w=33776,b=33777,M=33778,S=33779,E=2300,T=2301,A=2302,R=2400,L=2401,C=2402,P=3e3,I=3001,D=7680,N=35044,z=35048,O="300 es",B=1035;class F{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const U=[];for(let t=0;t<256;t++)U[t]=(t<16?"0":"")+t.toString(16);let H=1234567;const k=Math.PI/180,V=180/Math.PI;function G(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(U[255&t]+U[t>>8&255]+U[t>>16&255]+U[t>>24&255]+"-"+U[255&e]+U[e>>8&255]+"-"+U[e>>16&15|64]+U[e>>24&255]+"-"+U[63&n|128]+U[n>>8&255]+"-"+U[n>>16&255]+U[n>>24&255]+U[255&i]+U[i>>8&255]+U[i>>16&255]+U[i>>24&255]).toUpperCase()}function W(t,e,n){return Math.max(e,Math.min(n,t))}function j(t,e){return(t%e+e)%e}function X(t,e,n){return(1-n)*t+n*e}function Y(t){return 0==(t&t-1)&&0!==t}function Z(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function J(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var K=Object.freeze({__proto__:null,DEG2RAD:k,RAD2DEG:V,generateUUID:G,clamp:W,euclideanModulo:j,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:X,damp:function(t,e,n,i){return X(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(j(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(H=t%2147483647),H=16807*H%2147483647,(H-1)/2147483646},degToRad:function(t){return t*k},radToDeg:function(t){return t*V},isPowerOfTwo:Y,ceilPowerOfTwo:Z,floorPowerOfTwo:J,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),h=s((e+i)/2),c=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),m=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*c,l*u,l*d,a*h);break;case"YZY":t.set(l*d,a*c,l*u,a*h);break;case"ZXZ":t.set(l*u,l*d,a*c,a*h);break;case"XZX":t.set(a*c,l*p,l*m,a*h);break;case"YXY":t.set(l*m,a*c,l*p,a*h);break;case"ZYZ":t.set(l*p,l*m,a*c,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class Q{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Q.prototype.isVector2=!0;class ${constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l){const h=this.elements;return h[0]=t,h[1]=i,h[2]=o,h[3]=e,h[4]=r,h[5]=a,h[6]=n,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],h=n[4],c=n[7],u=n[2],d=n[5],m=n[8],p=i[0],f=i[3],g=i[6],x=i[1],v=i[4],q=i[7],_=i[2],y=i[5],w=i[8];return r[0]=s*p+o*x+a*_,r[3]=s*f+o*v+a*y,r[6]=s*g+o*q+a*w,r[1]=l*p+h*x+c*_,r[4]=l*f+h*v+c*y,r[7]=l*g+h*q+c*w,r[2]=u*p+d*x+m*_,r[5]=u*f+d*v+m*y,r[8]=u*g+d*q+m*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8];return e*s*h-e*o*l-n*r*h+n*o*a+i*r*l-i*s*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=h*s-o*l,u=o*a-h*r,d=l*r-s*a,m=e*c+n*u+i*d;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return t[0]=c*p,t[1]=(i*l-h*n)*p,t[2]=(o*n-i*s)*p,t[3]=u*p,t[4]=(h*e-i*a)*p,t[5]=(i*r-o*e)*p,t[6]=d*p,t[7]=(n*a-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],h=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*h,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*h,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function tt(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}function et(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}$.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const nt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},it={h:0,s:0,l:0},rt={h:0,s:0,l:0};function st(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function ot(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function at(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class lt{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=j(t,1),e=W(e,0,1),n=W(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=st(r,i,t+1/3),this.g=st(r,i,t),this.b=st(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=nt[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ot(t.r),this.g=ot(t.g),this.b=ot(t.b),this}copyLinearToSRGB(t){return this.r=at(t.r),this.g=at(t.g),this.b=at(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),s=Math.min(e,n,i);let o,a;const l=(s+r)/2;if(s===r)o=0,a=0;else{const t=r-s;switch(a=l<=.5?t/(r+s):t/(2-r-s),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(it),it.h+=t,it.s+=e,it.l+=n,this.setHSL(it.h,it.s,it.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(it),t.getHSL(rt);const n=X(it.h,rt.h,e),i=X(it.s,rt.s,e),r=X(it.l,rt.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}let ht;lt.NAMES=nt,lt.prototype.isColor=!0,lt.prototype.r=1,lt.prototype.g=1,lt.prototype.b=1;class ct{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ht&&(ht=et("canvas")),ht.width=t.width,ht.height=t.height;const n=ht.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=ht}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=et("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*ot(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ot(e[t]/255)):e[t]=ot(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let ut=0;class dt extends F{constructor(t=dt.DEFAULT_IMAGE,e=dt.DEFAULT_MAPPING,n=1001,i=1001,r=1006,s=1008,o=1023,a=1009,l=1,h=3e3){super(),Object.defineProperty(this,"id",{value:ut++}),this.uuid=G(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=G()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(mt(i[t].image)):e.push(mt(i[t]))}else e=mt(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case s:t.x=t.x-Math.floor(t.x);break;case o:t.x=t.x<0?0:1;break;case a:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case s:t.y=t.y-Math.floor(t.y);break;case o:t.y=t.y<0?0:1;break;case a:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function mt(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ct.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}dt.DEFAULT_IMAGE=void 0,dt.DEFAULT_MAPPING=300,dt.prototype.isTexture=!0;class pt{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],d=a[5],m=a[9],p=a[2],f=a[6],g=a[10];if(Math.abs(h-u)<s&&Math.abs(c-p)<s&&Math.abs(m-f)<s){if(Math.abs(h+u)<o&&Math.abs(c+p)<o&&Math.abs(m+f)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,x=(g+1)/2,v=(h+u)/4,q=(c+p)/4,_=(m+f)/4;return t>a&&t>x?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=q/n):a>x?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=v/i,r=_/i):x<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(x),n=q/r,i=_/r),this.set(n,i,r,e),this}let x=Math.sqrt((f-m)*(f-m)+(c-p)*(c-p)+(u-h)*(u-h));return Math.abs(x)<.001&&(x=1),this.x=(f-m)/x,this.y=(c-p)/x,this.z=(u-h)/x,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}pt.prototype.isVector4=!0;class ft extends F{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new pt(0,0,t,e),this.scissorTest=!1,this.viewport=new pt(0,0,t,e),this.texture=new dt(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:u,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ft.prototype.isWebGLRenderTarget=!0,class extends ft{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=i.clone()}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class gt extends ft{constructor(t,e,n={}){super(t,e,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(t){return super.copy.call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}gt.prototype.isWebGLMultisampleRenderTarget=!0;class xt{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=r[s+0],d=r[s+1],m=r[s+2],p=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=d,t[e+2]=m,void(t[e+3]=p);if(c!==p||a!==u||l!==d||h!==m){let t=1-o;const e=a*u+l*d+h*m+c*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+d*r,h=h*t+m*r,c=c*t+p*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=r[s],u=r[s+1],d=r[s+2],m=r[s+3];return t[e]=o*m+h*c+a*d-l*u,t[e+1]=a*m+h*u+l*c-o*d,t[e+2]=l*m+h*d+o*u-a*c,t[e+3]=h*m-o*c-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),h=o(i/2),c=o(r/2),u=a(n/2),d=a(i/2),m=a(r/2);switch(s){case"XYZ":this._x=u*h*c+l*d*m,this._y=l*d*c-u*h*m,this._z=l*h*m+u*d*c,this._w=l*h*c-u*d*m;break;case"YXZ":this._x=u*h*c+l*d*m,this._y=l*d*c-u*h*m,this._z=l*h*m-u*d*c,this._w=l*h*c+u*d*m;break;case"ZXY":this._x=u*h*c-l*d*m,this._y=l*d*c+u*h*m,this._z=l*h*m+u*d*c,this._w=l*h*c-u*d*m;break;case"ZYX":this._x=u*h*c-l*d*m,this._y=l*d*c+u*h*m,this._z=l*h*m-u*d*c,this._w=l*h*c+u*d*m;break;case"YZX":this._x=u*h*c+l*d*m,this._y=l*d*c+u*h*m,this._z=l*h*m-u*d*c,this._w=l*h*c-u*d*m;break;case"XZY":this._x=u*h*c-l*d*m,this._y=l*d*c-u*h*m,this._z=l*h*m+u*d*c,this._w=l*h*c+u*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>c){const t=2*Math.sqrt(1+n-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-n-c);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(W(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+s*o+i*l-r*a,this._y=i*h+s*a+r*o-n*l,this._z=r*h+s*l+n*a-i*o,this._w=s*h-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}xt.prototype.isQuaternion=!0;class vt{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_t.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(_t.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,h=a*n+o*e-r*i,c=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+h*-o-c*-s,this.y=h*a+u*-s+c*-r-l*-o,this.z=c*a+u*-o+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return qt.copy(this).projectOnVector(t),this.sub(qt)}reflect(t){return this.sub(qt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(W(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}vt.prototype.isVector3=!0;const qt=new vt,_t=new xt;class yt{constructor(t=new vt(1/0,1/0,1/0),e=new vt(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],h=t[a+1],c=t[a+2];l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),h=t.getY(a),c=t.getZ(a);l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=bt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)bt.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(bt)}else null===n.boundingBox&&n.computeBoundingBox(),Mt.copy(n.boundingBox),Mt.applyMatrix4(t.matrixWorld),this.union(Mt);const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,bt),bt.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ct),Pt.subVectors(this.max,Ct),St.subVectors(t.a,Ct),Et.subVectors(t.b,Ct),Tt.subVectors(t.c,Ct),At.subVectors(Et,St),Rt.subVectors(Tt,Et),Lt.subVectors(St,Tt);let e=[0,-At.z,At.y,0,-Rt.z,Rt.y,0,-Lt.z,Lt.y,At.z,0,-At.x,Rt.z,0,-Rt.x,Lt.z,0,-Lt.x,-At.y,At.x,0,-Rt.y,Rt.x,0,-Lt.y,Lt.x,0];return!!Nt(e,St,Et,Tt,Pt)&&(e=[1,0,0,0,1,0,0,0,1],!!Nt(e,St,Et,Tt,Pt)&&(It.crossVectors(At,Rt),e=[It.x,It.y,It.z],Nt(e,St,Et,Tt,Pt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return bt.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(bt).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(wt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),wt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),wt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),wt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),wt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),wt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),wt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),wt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(wt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}yt.prototype.isBox3=!0;const wt=[new vt,new vt,new vt,new vt,new vt,new vt,new vt,new vt],bt=new vt,Mt=new yt,St=new vt,Et=new vt,Tt=new vt,At=new vt,Rt=new vt,Lt=new vt,Ct=new vt,Pt=new vt,It=new vt,Dt=new vt;function Nt(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Dt.fromArray(t,s);const o=r.x*Math.abs(Dt.x)+r.y*Math.abs(Dt.y)+r.z*Math.abs(Dt.z),a=e.dot(Dt),l=n.dot(Dt),h=i.dot(Dt);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>o)return!1}return!0}const zt=new yt,Ot=new vt,Bt=new vt,Ft=new vt;class Ut{constructor(t=new vt,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):zt.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Ft.subVectors(t,this.center);const e=Ft.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(Ft.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?Bt.set(0,0,1).multiplyScalar(t.radius):Bt.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Ot.copy(t.center).add(Bt)),this.expandByPoint(Ot.copy(t.center).sub(Bt)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ht=new vt,kt=new vt,Vt=new vt,Gt=new vt,Wt=new vt,jt=new vt,Xt=new vt;class Yt{constructor(t=new vt,e=new vt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ht)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Ht.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ht.copy(this.direction).multiplyScalar(e).add(this.origin),Ht.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){kt.copy(t).add(e).multiplyScalar(.5),Vt.copy(e).sub(t).normalize(),Gt.copy(this.origin).sub(kt);const r=.5*t.distanceTo(e),s=-this.direction.dot(Vt),o=Gt.dot(this.direction),a=-Gt.dot(Vt),l=Gt.lengthSq(),h=Math.abs(1-s*s);let c,u,d,m;if(h>0)if(c=s*a-o,u=s*o-a,m=r*h,c>=0)if(u>=-m)if(u<=m){const t=1/h;c*=t,u*=t,d=c*(c+s*u+2*o)+u*(s*c+u+2*a)+l}else u=r,c=Math.max(0,-(s*u+o)),d=-c*c+u*(u+2*a)+l;else u=-r,c=Math.max(0,-(s*u+o)),d=-c*c+u*(u+2*a)+l;else u<=-m?(c=Math.max(0,-(-s*r+o)),u=c>0?-r:Math.min(Math.max(-r,-a),r),d=-c*c+u*(u+2*a)+l):u<=m?(c=0,u=Math.min(Math.max(-r,-a),r),d=u*(u+2*a)+l):(c=Math.max(0,-(s*r+o)),u=c>0?r:Math.min(Math.max(-r,-a),r),d=-c*c+u*(u+2*a)+l);else u=s>0?-r:r,c=Math.max(0,-(s*u+o)),d=-c*c+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(Vt).multiplyScalar(u).add(kt),d}intersectSphere(t,e){Ht.subVectors(t.center,this.origin);const n=Ht.dot(this.direction),i=Ht.dot(Ht)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,s=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,s=(t.min.y-u.y)*h),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Ht)}intersectTriangle(t,e,n,i,r){Wt.subVectors(e,t),jt.subVectors(n,t),Xt.crossVectors(Wt,jt);let s,o=this.direction.dot(Xt);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Gt.subVectors(this.origin,t);const a=s*this.direction.dot(jt.crossVectors(Gt,jt));if(a<0)return null;const l=s*this.direction.dot(Wt.cross(Gt));if(l<0)return null;if(a+l>o)return null;const h=-s*Gt.dot(Xt);return h<0?null:this.at(h/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Zt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l,h,c,u,d,m,p,f){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=m,g[11]=p,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Zt).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Jt.setFromMatrixColumn(t,0).length(),r=1/Jt.setFromMatrixColumn(t,1).length(),s=1/Jt.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*a,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t+r*o,e[4]=i*o-n,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t-r*o,e[4]=-s*c,e[8]=i+n*o,e[1]=n+i*o,e[5]=s*h,e[9]=r-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=i*l-n,e[8]=t*l+r,e[1]=a*c,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=r-t*c,e[8]=i*c+n,e[1]=c,e[5]=s*h,e[9]=-o*h,e[2]=-l*h,e[6]=n*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=n*c-i,e[2]=i*c-n,e[6]=o*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Qt,t,$t)}lookAt(t,e,n){const i=this.elements;return ne.subVectors(t,e),0===ne.lengthSq()&&(ne.z=1),ne.normalize(),te.crossVectors(n,ne),0===te.lengthSq()&&(1===Math.abs(n.z)?ne.x+=1e-4:ne.z+=1e-4,ne.normalize(),te.crossVectors(n,ne)),te.normalize(),ee.crossVectors(ne,te),i[0]=te.x,i[4]=ee.x,i[8]=ne.x,i[1]=te.y,i[5]=ee.y,i[9]=ne.y,i[2]=te.z,i[6]=ee.z,i[10]=ne.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],h=n[1],c=n[5],u=n[9],d=n[13],m=n[2],p=n[6],f=n[10],g=n[14],x=n[3],v=n[7],q=n[11],_=n[15],y=i[0],w=i[4],b=i[8],M=i[12],S=i[1],E=i[5],T=i[9],A=i[13],R=i[2],L=i[6],C=i[10],P=i[14],I=i[3],D=i[7],N=i[11],z=i[15];return r[0]=s*y+o*S+a*R+l*I,r[4]=s*w+o*E+a*L+l*D,r[8]=s*b+o*T+a*C+l*N,r[12]=s*M+o*A+a*P+l*z,r[1]=h*y+c*S+u*R+d*I,r[5]=h*w+c*E+u*L+d*D,r[9]=h*b+c*T+u*C+d*N,r[13]=h*M+c*A+u*P+d*z,r[2]=m*y+p*S+f*R+g*I,r[6]=m*w+p*E+f*L+g*D,r[10]=m*b+p*T+f*C+g*N,r[14]=m*M+p*A+f*P+g*z,r[3]=x*y+v*S+q*R+_*I,r[7]=x*w+v*E+q*L+_*D,r[11]=x*b+v*T+q*C+_*N,r[15]=x*M+v*A+q*P+_*z,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*a*c-i*l*c-r*o*u+n*l*u+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*h-r*a*h)+t[11]*(+e*l*c-e*o*d-r*s*c+n*s*d+r*o*h-n*l*h)+t[15]*(-i*o*h-e*a*c+e*o*u+i*s*c-n*s*u+n*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],d=t[11],m=t[12],p=t[13],f=t[14],g=t[15],x=c*f*l-p*u*l+p*a*d-o*f*d-c*a*g+o*u*g,v=m*u*l-h*f*l-m*a*d+s*f*d+h*a*g-s*u*g,q=h*p*l-m*c*l+m*o*d-s*p*d-h*o*g+s*c*g,_=m*c*a-h*p*a-m*o*u+s*p*u+h*o*f-s*c*f,y=e*x+n*v+i*q+r*_;if(0===y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/y;return t[0]=x*w,t[1]=(p*u*r-c*f*r-p*i*d+n*f*d+c*i*g-n*u*g)*w,t[2]=(o*f*r-p*a*r+p*i*l-n*f*l-o*i*g+n*a*g)*w,t[3]=(c*a*r-o*u*r-c*i*l+n*u*l+o*i*d-n*a*d)*w,t[4]=v*w,t[5]=(h*f*r-m*u*r+m*i*d-e*f*d-h*i*g+e*u*g)*w,t[6]=(m*a*r-s*f*r-m*i*l+e*f*l+s*i*g-e*a*g)*w,t[7]=(s*u*r-h*a*r+h*i*l-e*u*l-s*i*d+e*a*d)*w,t[8]=q*w,t[9]=(m*c*r-h*p*r-m*n*d+e*p*d+h*n*g-e*c*g)*w,t[10]=(s*p*r-m*o*r+m*n*l-e*p*l-s*n*g+e*o*g)*w,t[11]=(h*o*r-s*c*r-h*n*l+e*c*l+s*n*d-e*o*d)*w,t[12]=_*w,t[13]=(h*p*i-m*c*i+m*n*u-e*p*u-h*n*f+e*c*f)*w,t[14]=(m*o*i-s*p*i-m*n*a+e*p*a+s*n*f-e*o*f)*w,t[15]=(s*c*i-h*o*i+h*n*a-e*c*a-s*n*u+e*o*u)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,h=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,h*o+n,h*a-i*s,0,l*a-i*o,h*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,h=s+s,c=o+o,u=r*l,d=r*h,m=r*c,p=s*h,f=s*c,g=o*c,x=a*l,v=a*h,q=a*c,_=n.x,y=n.y,w=n.z;return i[0]=(1-(p+g))*_,i[1]=(d+q)*_,i[2]=(m-v)*_,i[3]=0,i[4]=(d-q)*y,i[5]=(1-(u+g))*y,i[6]=(f+x)*y,i[7]=0,i[8]=(m+v)*w,i[9]=(f-x)*w,i[10]=(1-(u+p))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Jt.set(i[0],i[1],i[2]).length();const s=Jt.set(i[4],i[5],i[6]).length(),o=Jt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Kt.copy(this);const a=1/r,l=1/s,h=1/o;return Kt.elements[0]*=a,Kt.elements[1]*=a,Kt.elements[2]*=a,Kt.elements[4]*=l,Kt.elements[5]*=l,Kt.elements[6]*=l,Kt.elements[8]*=h,Kt.elements[9]*=h,Kt.elements[10]*=h,e.setFromRotationMatrix(Kt),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*r/(e-t),l=2*r/(n-i),h=(e+t)/(e-t),c=(n+i)/(n-i),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){const o=this.elements,a=1/(e-t),l=1/(n-i),h=1/(s-r),c=(e+t)*a,u=(n+i)*l,d=(s+r)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}Zt.prototype.isMatrix4=!0;const Jt=new vt,Kt=new Zt,Qt=new vt(0,0,0),$t=new vt(1,1,1),te=new vt,ee=new vt,ne=new vt,ie=new Zt,re=new xt;class se{constructor(t=0,e=0,n=0,i=se.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],h=i[9],c=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(W(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-W(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(W(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-W(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(W(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-W(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return ie.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ie,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return re.setFromEuler(this),this.setFromQuaternion(re,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new vt(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}se.prototype.isEuler=!0,se.DefaultOrder="XYZ",se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class oe{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let ae=0;const le=new vt,he=new xt,ce=new Zt,ue=new vt,de=new vt,me=new vt,pe=new xt,fe=new vt(1,0,0),ge=new vt(0,1,0),xe=new vt(0,0,1),ve={type:"added"},qe={type:"removed"};class _e extends F{constructor(){super(),Object.defineProperty(this,"id",{value:ae++}),this.uuid=G(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_e.DefaultUp.clone();const t=new vt,e=new se,n=new xt,i=new vt(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Zt},normalMatrix:{value:new $}}),this.matrix=new Zt,this.matrixWorld=new Zt,this.matrixAutoUpdate=_e.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new oe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return he.setFromAxisAngle(t,e),this.quaternion.multiply(he),this}rotateOnWorldAxis(t,e){return he.setFromAxisAngle(t,e),this.quaternion.premultiply(he),this}rotateX(t){return this.rotateOnAxis(fe,t)}rotateY(t){return this.rotateOnAxis(ge,t)}rotateZ(t){return this.rotateOnAxis(xe,t)}translateOnAxis(t,e){return le.copy(t).applyQuaternion(this.quaternion),this.position.add(le.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(fe,t)}translateY(t){return this.translateOnAxis(ge,t)}translateZ(t){return this.translateOnAxis(xe,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(ce.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?ue.copy(t):ue.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),de.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ce.lookAt(de,ue,this.up):ce.lookAt(ue,de,this.up),this.quaternion.setFromRotationMatrix(ce),i&&(ce.extractRotation(i.matrixWorld),he.setFromRotationMatrix(ce),this.quaternion.premultiply(he.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ve)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(qe)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(qe)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),ce.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ce.multiply(t.parent.matrixWorld)),t.applyMatrix4(ce),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(de,t,me),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(de,pe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),h=s(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),h.length>0&&(n.animations=h)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}_e.DefaultUp=new vt(0,1,0),_e.DefaultMatrixAutoUpdate=!0,_e.prototype.isObject3D=!0;const ye=new vt,we=new vt,be=new vt,Me=new vt,Se=new vt,Ee=new vt,Te=new vt,Ae=new vt,Re=new vt,Le=new vt;class Ce{constructor(t=new vt,e=new vt,n=new vt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),ye.subVectors(t,e),i.cross(ye);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){ye.subVectors(i,e),we.subVectors(n,e),be.subVectors(t,e);const s=ye.dot(ye),o=ye.dot(we),a=ye.dot(be),l=we.dot(we),h=we.dot(be),c=s*l-o*o;if(0===c)return r.set(-2,-1,-1);const u=1/c,d=(l*a-o*h)*u,m=(s*h-o*a)*u;return r.set(1-d-m,m,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Me),Me.x>=0&&Me.y>=0&&Me.x+Me.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Me),a.set(0,0),a.addScaledVector(r,Me.x),a.addScaledVector(s,Me.y),a.addScaledVector(o,Me.z),a}static isFrontFacing(t,e,n,i){return ye.subVectors(n,e),we.subVectors(t,e),ye.cross(we).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ye.subVectors(this.c,this.b),we.subVectors(this.a,this.b),.5*ye.cross(we).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ce.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ce.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Ce.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Ce.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ce.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,o;Se.subVectors(i,n),Ee.subVectors(r,n),Ae.subVectors(t,n);const a=Se.dot(Ae),l=Ee.dot(Ae);if(a<=0&&l<=0)return e.copy(n);Re.subVectors(t,i);const h=Se.dot(Re),c=Ee.dot(Re);if(h>=0&&c<=h)return e.copy(i);const u=a*c-h*l;if(u<=0&&a>=0&&h<=0)return s=a/(a-h),e.copy(n).addScaledVector(Se,s);Le.subVectors(t,r);const d=Se.dot(Le),m=Ee.dot(Le);if(m>=0&&d<=m)return e.copy(r);const p=d*l-a*m;if(p<=0&&l>=0&&m<=0)return o=l/(l-m),e.copy(n).addScaledVector(Ee,o);const f=h*m-d*c;if(f<=0&&c-h>=0&&d-m>=0)return Te.subVectors(r,i),o=(c-h)/(c-h+(d-m)),e.copy(i).addScaledVector(Te,o);const g=1/(f+p+u);return s=p*g,o=u*g,e.copy(n).addScaledVector(Se,s).addScaledVector(Ee,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Pe=0;class Ie extends F{constructor(){super(),Object.defineProperty(this,"id",{value:Pe++}),this.uuid=G(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=e,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=D,this.stencilZFail=D,this.stencilZPass=D,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Ie.prototype.isMaterial=!0;class De extends Ie{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}De.prototype.isMeshBasicMaterial=!0;const Ne=new vt,ze=new Q;class Oe{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=N,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new lt),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Q),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new vt),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new pt),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)ze.fromBufferAttribute(this,e),ze.applyMatrix3(t),this.setXY(e,ze.x,ze.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Ne.fromBufferAttribute(this,e),Ne.applyMatrix3(t),this.setXYZ(e,Ne.x,Ne.y,Ne.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ne.x=this.getX(e),Ne.y=this.getY(e),Ne.z=this.getZ(e),Ne.applyMatrix4(t),this.setXYZ(e,Ne.x,Ne.y,Ne.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ne.x=this.getX(e),Ne.y=this.getY(e),Ne.z=this.getZ(e),Ne.applyNormalMatrix(t),this.setXYZ(e,Ne.x,Ne.y,Ne.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ne.x=this.getX(e),Ne.y=this.getY(e),Ne.z=this.getZ(e),Ne.transformDirection(t),this.setXYZ(e,Ne.x,Ne.y,Ne.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==N&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}Oe.prototype.isBufferAttribute=!0;class Be extends Oe{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Fe extends Oe{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends Oe{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class Ue extends Oe{constructor(t,e,n){super(new Float32Array(t),e,n)}}let He=0;const ke=new Zt,Ve=new _e,Ge=new vt,We=new yt,je=new yt,Xe=new vt;class Ye extends F{constructor(){super(),Object.defineProperty(this,"id",{value:He++}),this.uuid=G(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(tt(t)?Fe:Be)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new $).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ke.makeRotationFromQuaternion(t),this.applyMatrix4(ke),this}rotateX(t){return ke.makeRotationX(t),this.applyMatrix4(ke),this}rotateY(t){return ke.makeRotationY(t),this.applyMatrix4(ke),this}rotateZ(t){return ke.makeRotationZ(t),this.applyMatrix4(ke),this}translate(t,e,n){return ke.makeTranslation(t,e,n),this.applyMatrix4(ke),this}scale(t,e,n){return ke.makeScale(t,e,n),this.applyMatrix4(ke),this}lookAt(t){return Ve.lookAt(t),Ve.updateMatrix(),this.applyMatrix4(Ve.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ge).negate(),this.translate(Ge.x,Ge.y,Ge.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Ue(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new yt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new vt(-1/0,-1/0,-1/0),new vt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];We.setFromBufferAttribute(n),this.morphTargetsRelative?(Xe.addVectors(this.boundingBox.min,We.min),this.boundingBox.expandByPoint(Xe),Xe.addVectors(this.boundingBox.max,We.max),this.boundingBox.expandByPoint(Xe)):(this.boundingBox.expandByPoint(We.min),this.boundingBox.expandByPoint(We.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ut);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new vt,1/0);if(t){const n=this.boundingSphere.center;if(We.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];je.setFromBufferAttribute(n),this.morphTargetsRelative?(Xe.addVectors(We.min,je.min),We.expandByPoint(Xe),Xe.addVectors(We.max,je.max),We.expandByPoint(Xe)):(We.expandByPoint(je.min),We.expandByPoint(je.max))}We.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)Xe.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Xe));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)Xe.fromBufferAttribute(s,e),o&&(Ge.fromBufferAttribute(t,e),Xe.add(Ge)),i=Math.max(i,n.distanceToSquared(Xe))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new Oe(new Float32Array(4*o),4));const a=e.tangent.array,l=[],h=[];for(let t=0;t<o;t++)l[t]=new vt,h[t]=new vt;const c=new vt,u=new vt,d=new vt,m=new Q,p=new Q,f=new Q,g=new vt,x=new vt;function v(t,e,n){c.fromArray(i,3*t),u.fromArray(i,3*e),d.fromArray(i,3*n),m.fromArray(s,2*t),p.fromArray(s,2*e),f.fromArray(s,2*n),u.sub(c),d.sub(c),p.sub(m),f.sub(m);const r=1/(p.x*f.y-f.x*p.y);isFinite(r)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(d,-p.y).multiplyScalar(r),x.copy(d).multiplyScalar(p.x).addScaledVector(u,-f.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),h[t].add(x),h[e].add(x),h[n].add(x))}let q=this.groups;0===q.length&&(q=[{start:0,count:n.length}]);for(let t=0,e=q.length;t<e;++t){const e=q[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)v(n[t+0],n[t+1],n[t+2])}const _=new vt,y=new vt,w=new vt,b=new vt;function M(t){w.fromArray(r,3*t),b.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),y.crossVectors(b,e);const n=y.dot(h[t])<0?-1:1;a[4*t]=_.x,a[4*t+1]=_.y,a[4*t+2]=_.z,a[4*t+3]=n}for(let t=0,e=q.length;t<e;++t){const e=q[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)M(n[t+0]),M(n[t+1]),M(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Oe(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new vt,r=new vt,s=new vt,o=new vt,a=new vt,l=new vt,h=new vt,c=new vt;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),m=t.getX(u+1),p=t.getX(u+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,m),s.fromBufferAttribute(e,p),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,p),o.add(h),a.add(h),l.add(h),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,o=e.count;t<o;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),n.setXYZ(t+0,h.x,h.y,h.z),n.setXYZ(t+1,h.x,h.y,h.z),n.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,s=t.attributes[i],o=s.array,a=s.itemSize*e,l=Math.min(o.length,r.length-a);for(let t=0,e=a;t<l;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Xe.fromBufferAttribute(t,e),Xe.normalize(),t.setXYZ(e,Xe.x,Xe.y,Xe.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let o=0,a=0;for(let r=0,l=e.length;r<l;r++){o=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)s[a++]=n[o++]}return new Oe(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ye,n=this.index.array,i=this.attributes;for(const r in i){const s=t(i[r],n);e.setAttribute(r,s)}const r=this.morphAttributes;for(const i in r){const s=[],o=r[i];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);s.push(i)}e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,n=s.length;t<n;t++){const n=s[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],s=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];s.push(i.toJSON(t.data))}s.length>0&&(i[e]=s,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ye.prototype.isBufferGeometry=!0;const Ze=new Zt,Je=new Yt,Ke=new Ut,Qe=new vt,$e=new vt,tn=new vt,en=new vt,nn=new vt,rn=new vt,sn=new vt,on=new vt,an=new vt,ln=new Q,hn=new Q,cn=new Q,un=new vt,dn=new vt;class mn extends _e{constructor(t=new Ye,e=new De){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ke.copy(n.boundingSphere),Ke.applyMatrix4(r),!1===t.ray.intersectsSphere(Ke))return;if(Ze.copy(r).invert(),Je.copy(t.ray).applyMatrix4(Ze),null!==n.boundingBox&&!1===Je.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,h=n.attributes.uv,c=n.attributes.uv2,u=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,m=u.length;n<m;n++){const m=u[n],p=i[m.materialIndex];for(let n=Math.max(m.start,d.start),i=Math.min(r.count,Math.min(m.start+m.count,d.start+d.count));n<i;n+=3){const i=r.getX(n),u=r.getX(n+1),d=r.getX(n+2);s=pn(this,p,t,Je,o,a,l,h,c,i,u,d),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=m.materialIndex,e.push(s))}}else for(let n=Math.max(0,d.start),u=Math.min(r.count,d.start+d.count);n<u;n+=3){const u=r.getX(n),d=r.getX(n+1),m=r.getX(n+2);s=pn(this,i,t,Je,o,a,l,h,c,u,d,m),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=u.length;n<r;n++){const r=u[n],m=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));n<i;n+=3)s=pn(this,m,t,Je,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}else for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3)s=pn(this,i,t,Je,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function pn(t,e,n,i,r,s,o,a,l,h,c,u){Qe.fromBufferAttribute(r,h),$e.fromBufferAttribute(r,c),tn.fromBufferAttribute(r,u);const d=t.morphTargetInfluences;if(s&&d){sn.set(0,0,0),on.set(0,0,0),an.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=d[t],n=s[t];0!==e&&(en.fromBufferAttribute(n,h),nn.fromBufferAttribute(n,c),rn.fromBufferAttribute(n,u),o?(sn.addScaledVector(en,e),on.addScaledVector(nn,e),an.addScaledVector(rn,e)):(sn.addScaledVector(en.sub(Qe),e),on.addScaledVector(nn.sub($e),e),an.addScaledVector(rn.sub(tn),e)))}Qe.add(sn),$e.add(on),tn.add(an)}t.isSkinnedMesh&&(t.boneTransform(h,Qe),t.boneTransform(c,$e),t.boneTransform(u,tn));const m=function(t,e,n,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;dn.copy(a),dn.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(dn);return h<n.near||h>n.far?null:{distance:h,point:dn.clone(),object:t}}(t,e,n,i,Qe,$e,tn,un);if(m){a&&(ln.fromBufferAttribute(a,h),hn.fromBufferAttribute(a,c),cn.fromBufferAttribute(a,u),m.uv=Ce.getUV(un,Qe,$e,tn,ln,hn,cn,new Q)),l&&(ln.fromBufferAttribute(l,h),hn.fromBufferAttribute(l,c),cn.fromBufferAttribute(l,u),m.uv2=Ce.getUV(un,Qe,$e,tn,ln,hn,cn,new Q));const t={a:h,b:c,c:u,normal:new vt,materialIndex:0};Ce.getNormal(Qe,$e,tn,t.normal),m.face=t}return m}mn.prototype.isMesh=!0;class fn extends Ye{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const a=[],l=[],h=[],c=[];let u=0,d=0;function m(t,e,n,i,r,s,m,p,f,g,x){const v=s/f,q=m/g,_=s/2,y=m/2,w=p/2,b=f+1,M=g+1;let S=0,E=0;const T=new vt;for(let s=0;s<M;s++){const o=s*q-y;for(let a=0;a<b;a++){const u=a*v-_;T[t]=u*i,T[e]=o*r,T[n]=w,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=p>0?1:-1,h.push(T.x,T.y,T.z),c.push(a/f),c.push(1-s/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<f;e++){const n=u+e+b*t,i=u+e+b*(t+1),r=u+(e+1)+b*(t+1),s=u+(e+1)+b*t;a.push(n,i,s),a.push(i,r,s),E+=6}o.addGroup(d,E,x),d+=E,u+=S}m("z","y","x",-1,-1,n,e,t,s,r,0),m("z","y","x",1,-1,n,e,-t,s,r,1),m("x","z","y",1,1,t,n,e,i,s,2),m("x","z","y",1,-1,t,n,-e,i,s,3),m("x","y","z",1,-1,t,e,n,i,r,4),m("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Ue(l,3)),this.setAttribute("normal",new Ue(h,3)),this.setAttribute("uv",new Ue(c,2))}static fromJSON(t){return new fn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function gn(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function xn(t){const e={};for(let n=0;n<t.length;n++){const i=gn(t[n]);for(const t in i)e[t]=i[t]}return e}const vn={clone:gn,merge:xn};class qn extends Ie{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=gn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}qn.prototype.isShaderMaterial=!0;class _n extends _e{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Zt,this.projectionMatrix=new Zt,this.projectionMatrixInverse=new Zt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}_n.prototype.isCamera=!0;class yn extends _n{constructor(t=50,e=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*V*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*k*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*V*Math.atan(Math.tan(.5*k*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*k*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/o,i*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}yn.prototype.isPerspectiveCamera=!0;const wn=90;class bn extends _e{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new yn(wn,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new vt(1,0,0)),this.add(i);const r=new yn(wn,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new vt(-1,0,0)),this.add(r);const s=new yn(wn,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new vt(0,1,0)),this.add(s);const o=new yn(wn,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new vt(0,-1,0)),this.add(o);const a=new yn(wn,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new vt(0,0,1)),this.add(a);const l=new yn(wn,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new vt(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,o,a,l]=this.children,h=t.xr.enabled,c=t.getRenderTarget();t.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=u,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Mn extends dt{constructor(t,e,i,r,s,o,a,l,h,c){super(t=void 0!==t?t:[],e=void 0!==e?e:n,i,r,s,o,a,l,h,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Mn.prototype.isCubeTexture=!0;class Sn extends ft{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new Mn(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:u}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=q,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new fn(5,5,5),o=new qn({name:"CubemapFromEquirect",uniforms:gn(n),vertexShader:i,fragmentShader:r,side:1,blending:0});o.uniforms.tEquirect.value=e;const a=new mn(s,o),l=e.minFilter;return e.minFilter===d&&(e.minFilter=u),new bn(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}Sn.prototype.isWebGLCubeRenderTarget=!0;const En=new vt,Tn=new vt,An=new $;class Rn{constructor(t=new vt(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=En.subVectors(n,e).cross(Tn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(En),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||An.getNormalMatrix(t),i=this.coplanarPoint(En).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Rn.prototype.isPlane=!0;const Ln=new Ut,Cn=new vt;class Pn{constructor(t=new Rn,e=new Rn,n=new Rn,i=new Rn,r=new Rn,s=new Rn){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],c=n[7],u=n[8],d=n[9],m=n[10],p=n[11],f=n[12],g=n[13],x=n[14],v=n[15];return e[0].setComponents(o-i,c-a,p-u,v-f).normalize(),e[1].setComponents(o+i,c+a,p+u,v+f).normalize(),e[2].setComponents(o+r,c+l,p+d,v+g).normalize(),e[3].setComponents(o-r,c-l,p-d,v-g).normalize(),e[4].setComponents(o-s,c-h,p-m,v-x).normalize(),e[5].setComponents(o+s,c+h,p+m,v+x).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ln.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ln)}intersectsSprite(t){return Ln.center.set(0,0,0),Ln.radius=.7071067811865476,Ln.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ln)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Cn.x=i.normal.x>0?t.max.x:t.min.x,Cn.y=i.normal.y>0?t.max.y:t.min.y,Cn.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Cn)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function In(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Dn(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const r=e.array,s=e.usage,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,r,s),e.onUploadCallback();let a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(function(e,i,r){const s=i.array,o=i.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,s):(n?t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class Nn extends Ye{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,h=a+1,c=t/o,u=e/a,d=[],m=[],p=[],f=[];for(let t=0;t<h;t++){const e=t*u-s;for(let n=0;n<l;n++){const i=n*c-r;m.push(i,-e,0),p.push(0,0,1),f.push(n/o),f.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),s=e+1+l*t;d.push(n,i,s),d.push(i,r,s)}this.setIndex(d),this.setAttribute("position",new Ue(m,3)),this.setAttribute("normal",new Ue(p,3)),this.setAttribute("uv",new Ue(f,2))}static fromJSON(t){return new Nn(t.width,t.height,t.widthSegments,t.heightSegments)}}const zn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},On={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new $},uv2Transform:{value:new $},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new Q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $}}},Bn={basic:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.fog]),vertexShader:zn.meshbasic_vert,fragmentShader:zn.meshbasic_frag},lambert:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.fog,On.lights,{emissive:{value:new lt(0)}}]),vertexShader:zn.meshlambert_vert,fragmentShader:zn.meshlambert_frag},phong:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.fog,On.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:zn.meshphong_vert,fragmentShader:zn.meshphong_frag},standard:{uniforms:xn([On.common,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.roughnessmap,On.metalnessmap,On.fog,On.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag},toon:{uniforms:xn([On.common,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.gradientmap,On.fog,On.lights,{emissive:{value:new lt(0)}}]),vertexShader:zn.meshtoon_vert,fragmentShader:zn.meshtoon_frag},matcap:{uniforms:xn([On.common,On.bumpmap,On.normalmap,On.displacementmap,On.fog,{matcap:{value:null}}]),vertexShader:zn.meshmatcap_vert,fragmentShader:zn.meshmatcap_frag},points:{uniforms:xn([On.points,On.fog]),vertexShader:zn.points_vert,fragmentShader:zn.points_frag},dashed:{uniforms:xn([On.common,On.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zn.linedashed_vert,fragmentShader:zn.linedashed_frag},depth:{uniforms:xn([On.common,On.displacementmap]),vertexShader:zn.depth_vert,fragmentShader:zn.depth_frag},normal:{uniforms:xn([On.common,On.bumpmap,On.normalmap,On.displacementmap,{opacity:{value:1}}]),vertexShader:zn.meshnormal_vert,fragmentShader:zn.meshnormal_frag},sprite:{uniforms:xn([On.sprite,On.fog]),vertexShader:zn.sprite_vert,fragmentShader:zn.sprite_frag},background:{uniforms:{uvTransform:{value:new $},t2D:{value:null}},vertexShader:zn.background_vert,fragmentShader:zn.background_frag},cube:{uniforms:xn([On.envmap,{opacity:{value:1}}]),vertexShader:zn.cube_vert,fragmentShader:zn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zn.equirect_vert,fragmentShader:zn.equirect_frag},distanceRGBA:{uniforms:xn([On.common,On.displacementmap,{referencePosition:{value:new vt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zn.distanceRGBA_vert,fragmentShader:zn.distanceRGBA_frag},shadow:{uniforms:xn([On.lights,On.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:zn.shadow_vert,fragmentShader:zn.shadow_frag}};function Fn(t,e,n,i,s,o){const a=new lt(0);let l,h,c=!0===s?0:1,u=null,d=0,m=null;function p(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),c=e,p(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,p(a,c)},render:function(n,s){let o=!1,f=!0===s.isScene?s.background:null;f&&f.isTexture&&(f=e.get(f));const g=t.xr,x=g.getSession&&g.getSession();x&&"additive"===x.environmentBlendMode&&(f=null),null===f?p(a,c):f&&f.isColor&&(p(f,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||f.mapping===r)?(void 0===h&&(h=new mn(new fn(1,1,1),new qn({name:"BackgroundCubeMaterial",uniforms:gn(Bn.cube.uniforms),vertexShader:Bn.cube.vertexShader,fragmentShader:Bn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=f,h.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,u===f&&d===f.version&&m===t.toneMapping||(h.material.needsUpdate=!0,u=f,d=f.version,m=t.toneMapping),n.unshift(h,h.geometry,h.material,0,0,null)):f&&f.isTexture&&(void 0===l&&(l=new mn(new Nn(2,2),new qn({name:"BackgroundMaterial",uniforms:gn(Bn.background.uniforms),vertexShader:Bn.background.vertexShader,fragmentShader:Bn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),l.material.uniforms.uvTransform.value.copy(f.matrix),u===f&&d===f.version&&m===t.toneMapping||(l.material.needsUpdate=!0,u=f,d=f.version,m=t.toneMapping),n.unshift(l,l.geometry,l.material,0,0,null))}}}function Un(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=d(null);let h=l;function c(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function u(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function m(){const t=h.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){f(t,0)}function f(n,r){const s=h.newAttributes,o=h.enabledAttributes,a=h.attributeDivisors;s[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),a[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r)}function g(){const e=h.newAttributes,n=h.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function x(e,n,r,s,o,a){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,s,o,a):t.vertexAttribIPointer(e,n,r,o,a)}function v(){q(),h!==l&&(h=l,c(h.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,u,v,q){let _=!1;if(o){const e=function(e,n,r){const o=!0===r.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let h=l[n.id];void 0===h&&(h={},l[n.id]=h);let c=h[o];return void 0===c&&(c=d(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),h[o]=c),c}(v,u,l);h!==e&&(h=e,c(h.object)),_=function(t,e){const n=h.attributes,i=t.attributes;let r=0;for(const t in i){const e=n[t],s=i[t];if(void 0===e)return!0;if(e.attribute!==s)return!0;if(e.data!==s.data)return!0;r++}return h.attributesNum!==r||h.index!==e}(v,q),_&&function(t,e){const n={},i=t.attributes;let r=0;for(const t in i){const e=i[t],s={};s.attribute=e,e.data&&(s.data=e.data),n[t]=s,r++}h.attributes=n,h.attributesNum=r,h.index=e}(v,q)}else{const t=!0===l.wireframe;h.geometry===v.id&&h.program===u.id&&h.wireframe===t||(h.geometry=v.id,h.program=u.id,h.wireframe=t,_=!0)}!0===r.isInstancedMesh&&(_=!0),null!==q&&n.update(q,34963),_&&(function(r,s,o,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;m();const l=a.attributes,h=o.getAttributes(),c=s.defaultAttributeValues;for(const e in h){const i=h[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,o=s.itemSize,l=n.get(s);if(void 0===l)continue;const h=l.buffer,c=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n&&n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)f(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)p(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)x(i.location+t,o/i.locationSize,c,e,l*u,(d+o/i.locationSize*t)*u)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)f(i.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)p(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)x(i.location+t,o/i.locationSize,c,e,o*u,o/i.locationSize*t*u)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}g()}(r,l,u,v),null!==q&&t.bindBuffer(34963,n.get(q).buffer))},reset:v,resetDefaultState:q,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)u(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const t in e){const n=e[t];for(const t in n)u(n[t].object),delete n[t];delete e[t]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)u(i[t].object),delete i[t];delete n[t.id]}},initAttributes:m,enableAttribute:p,disableUnusedAttributes:g}}function Hn(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,o,a){if(0===a)return;let l,h;if(r)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](s,i,o,a),n.update(o,s,a)}}function kn(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||e.has("WEBGL_draw_buffers"),h=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),u=t.getParameter(35660),d=t.getParameter(3379),m=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),g=t.getParameter(36348),x=t.getParameter(36349),v=u>0,q=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:v,floatFragmentTextures:q,floatVertexTextures:v&&q,maxSamples:s?t.getParameter(36183):0}}function Vn(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Rn,a=new $,l={value:null,needsUpdate:!1};function h(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(t,n,i,r){const s=null!==t?t.length:0;let h=null;if(0!==s){if(h=l.value,!0!==r||null===h){const e=i+4*s,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===h||h.length<e)&&(h=new Float32Array(e));for(let e=0,n=i;e!==s;++e,n+=4)o.copy(t[e]).applyMatrix4(r,a),o.normal.toArray(h,n),h[n+3]=o.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==i||r;return r=e,n=c(t,s,0),i=t.length,o},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,h()},this.setState=function(e,o,a){const u=e.clippingPlanes,d=e.clipIntersection,m=e.clipShadows,p=t.get(e);if(!r||null===u||0===u.length||s&&!m)s?c(null):h();else{const t=s?0:i,e=4*t;let r=p.clippingState||null;l.value=r,r=c(u,o,e,a);for(let t=0;t!==e;++t)r[t]=n[t];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Gn(t){let e=new WeakMap;function r(t,e){return 303===e?t.mapping=n:304===e&&(t.mapping=i),t}function s(t){const n=t.target;n.removeEventListener("dispose",s);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){const i=n.mapping;if(303===i||304===i){if(e.has(n))return r(e.get(n).texture,n.mapping);{const i=n.image;if(i&&i.height>0){const o=new Sn(i.height/2);return o.fromEquirectangularTexture(t,n),e.set(n,o),n.addEventListener("dispose",s),r(o.texture,n.mapping)}return null}}}return n},dispose:function(){e=new WeakMap}}}Bn.physical={uniforms:xn([Bn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Q(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag};class Wn extends _n{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}Wn.prototype.isOrthographicCamera=!0;class jn extends qn{constructor(t){super(t),this.type="RawShaderMaterial"}}jn.prototype.isRawShaderMaterial=!0;const Xn=Math.pow(2,8),Yn=[.125,.215,.35,.446,.526,.582],Zn=5+Yn.length,Jn=new Wn,{_lodPlanes:Kn,_sizeLods:Qn,_sigmas:$n}=oi(),ti=new lt;let ei=null;const ni=(1+Math.sqrt(5))/2,ii=1/ni,ri=[new vt(1,1,1),new vt(-1,1,1),new vt(1,1,-1),new vt(-1,1,-1),new vt(0,ni,ii),new vt(0,ni,-ii),new vt(ii,0,ni),new vt(-ii,0,ni),new vt(ni,ii,0),new vt(-ni,ii,0)];class si{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(20),n=new vt(0,1,0);return new jn({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){ei=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=ci(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=hi(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Kn.length;t++)Kn[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(ei),t.scissorTest=!1,li(t,0,0,t.width,t.height)}_fromTexture(t,e){ei=this._renderer.getRenderTarget();const n=e||this._allocateTargets(t);return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(t){const e={magFilter:u,minFilter:u,generateMipmaps:!1,type:x,format:q,encoding:P,depthBuffer:!1},n=ai(e);return n.depthBuffer=!t,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=ai(e)),n}_compileMaterial(t){const e=new mn(Kn[0],t);this._renderer.compile(e,Jn)}_sceneToCubeUV(t,e,n,i){const r=new yn(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,h=a.toneMapping;a.getClearColor(ti),a.toneMapping=0,a.autoClear=!1;const c=new De({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new mn(new fn,c);let d=!1;const m=t.background;m?m.isColor&&(c.color.copy(m),t.background=null,d=!0):(c.color.copy(ti),d=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(r.up.set(0,s[e],0),r.lookAt(o[e],0,0)):1===n?(r.up.set(0,0,s[e]),r.lookAt(0,o[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,o[e])),li(i,n*Xn,e>2?Xn:0,Xn,Xn),a.setRenderTarget(i),d&&a.render(u,r),a.render(t,r)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=h,a.autoClear=l,t.background=m}_textureToCubeUV(t,e){const r=this._renderer,s=t.mapping===n||t.mapping===i;s?(null===this._cubemapShader&&(this._cubemapShader=ci()),this._cubemapShader.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=hi());const o=s?this._cubemapShader:this._equirectShader,a=new mn(Kn[0],o),l=o.uniforms;l.envMap.value=t,s||l.texelSize.value.set(1/t.image.width,1/t.image.height),li(e,0,0,3*Xn,2*Xn),r.setRenderTarget(e),r.render(a,Jn)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<Zn;e++){const n=Math.sqrt($n[e]*$n[e]-$n[e-1]*$n[e-1]),i=ri[(e-1)%ri.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new mn(Kn[i],l),c=l.uniforms,u=Qn[n]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,m=r/d,p=isFinite(r)?1+Math.floor(3*m):20;p>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const f=[];let g=0;for(let t=0;t<20;++t){const e=t/m,n=Math.exp(-e*e/2);f.push(n),0===t?g+=n:t<p&&(g+=2*n)}for(let t=0;t<f.length;t++)f[t]=f[t]/g;c.envMap.value=t.texture,c.samples.value=p,c.weights.value=f,c.latitudinal.value="latitudinal"===s,o&&(c.poleAxis.value=o),c.dTheta.value=d,c.mipInt.value=8-n;const x=Qn[i];li(e,3*Math.max(0,Xn-2*x),(0===i?0:2*Xn)+2*x*(i>4?i-8+4:0),3*x,2*x),a.setRenderTarget(e),a.render(h,Jn)}}function oi(){const t=[],e=[],n=[];let i=8;for(let r=0;r<Zn;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>4?o=Yn[r-8+4-1]:0===r&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,h=1+a/2,c=[l,l,h,l,h,h,l,l,h,h,l,h],u=6,d=6,m=3,p=2,f=1,g=new Float32Array(m*d*u),x=new Float32Array(p*d*u),v=new Float32Array(f*d*u);for(let t=0;t<u;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,m*d*t),x.set(c,p*d*t);const r=[t,t,t,t,t,t];v.set(r,f*d*t)}const q=new Ye;q.setAttribute("position",new Oe(g,m)),q.setAttribute("uv",new Oe(x,p)),q.setAttribute("faceIndex",new Oe(v,f)),t.push(q),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function ai(t){const e=new ft(3*Xn,3*Xn,t);return e.texture.mapping=r,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function li(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function hi(){const t=new Q(1,1);return new jn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ci(){return new jn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ui(t){let e=new WeakMap,r=null;function s(t){const n=t.target;n.removeEventListener("dispose",s);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(o){if(o&&o.isTexture){const a=o.mapping,l=303===a||304===a,h=a===n||a===i;if(l||h){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let n=e.get(o);return null===r&&(r=new si(t)),n=l?r.fromEquirectangular(o,n):r.fromCubemap(o,n),e.set(o,n),n.texture}if(e.has(o))return e.get(o).texture;{const n=o.image;if(l&&n&&n.height>0||h&&n&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(n)){null===r&&(r=new si(t));const n=l?r.fromEquirectangular(o):r.fromCubemap(o);return e.set(o,n),o.addEventListener("dispose",s),n.texture}return null}}}return o},dispose:function(){e=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function di(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function mi(t,e,n,i){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",o),delete r[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const a=new(tt(n)?Fe:Be)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function pi(t,e,n,i){const r=i.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,o,e*a),n.update(i,s,1)},this.renderInstances=function(i,l,h){if(0===h)return;let c,u;if(r)c=t,u="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](s,l,o,i*a,h),n.update(l,s,h)}}function fi(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class gi extends dt{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=l,this.minFilter=l,this.wrapR=o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function xi(t,e){return t[0]-e[0]}function vi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qi(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function _i(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new vt,a=[];for(let t=0;t<8;t++)a[t]=[t,0];return{update:function(l,h,c,u){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=h.morphAttributes.position.length;let r=s.get(h);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const t=void 0!==h.morphAttributes.normal,n=h.morphAttributes.position,a=h.morphAttributes.normal||[],l=!0===t?2:1;let c=h.attributes.position.count*l,u=1;c>e.maxTextureSize&&(u=Math.ceil(c/e.maxTextureSize),c=e.maxTextureSize);const d=new Float32Array(c*u*4*i),m=new gi(d,c,u,i);m.format=q,m.type=g,m.needsUpdate=!0;const p=4*l;for(let e=0;e<i;e++){const i=n[e],r=a[e],s=c*u*4*e;for(let e=0;e<i.count;e++){o.fromBufferAttribute(i,e),!0===i.normalized&&qi(o,i);const n=e*p;d[s+n+0]=o.x,d[s+n+1]=o.y,d[s+n+2]=o.z,d[s+n+3]=0,!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&qi(o,r),d[s+n+4]=o.x,d[s+n+5]=o.y,d[s+n+6]=o.z,d[s+n+7]=0)}}function f(){m.dispose(),s.delete(h),h.removeEventListener("dispose",f)}r={count:i,texture:m,size:new Q(c,u)},s.set(h,r),h.addEventListener("dispose",f)}let a=0;for(let t=0;t<d.length;t++)a+=d[t];const l=h.morphTargetsRelative?1:1-a;u.getUniforms().setValue(t,"morphTargetBaseInfluence",l),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{const e=void 0===d?0:d.length;let n=i[h.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[h.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=d[t]}n.sort(vi);for(let t=0;t<8;t++)t<e&&n[t][1]?(a[t][0]=n[t][0],a[t][1]=n[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(xi);const s=h.morphAttributes.position,o=h.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=a[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&h.getAttribute("morphTarget"+t)!==s[n]&&h.setAttribute("morphTarget"+t,s[n]),o&&h.getAttribute("morphNormal"+t)!==o[n]&&h.setAttribute("morphNormal"+t,o[n]),r[t]=i,l+=i):(s&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),o&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),r[t]=0)}const c=h.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",c),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function yi(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=i.render.frame,a=t.geometry,l=e.get(t,a);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}gi.prototype.isDataTexture2DArray=!0;class wi extends dt{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=l,this.minFilter=l,this.wrapR=o,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}wi.prototype.isDataTexture3D=!0;const bi=new dt,Mi=new gi,Si=new wi,Ei=new Mn,Ti=[],Ai=[],Ri=new Float32Array(16),Li=new Float32Array(9),Ci=new Float32Array(4);function Pi(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=Ti[r];if(void 0===s&&(s=new Float32Array(r),Ti[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function Ii(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Di(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Ni(t,e){let n=Ai[e];void 0===n&&(n=new Int32Array(e),Ai[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function zi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Oi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;t.uniform2fv(this.addr,e),Di(n,e)}}function Bi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ii(n,e))return;t.uniform3fv(this.addr,e),Di(n,e)}}function Fi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;t.uniform4fv(this.addr,e),Di(n,e)}}function Ui(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ii(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Di(n,e)}else{if(Ii(n,i))return;Ci.set(i),t.uniformMatrix2fv(this.addr,!1,Ci),Di(n,i)}}function Hi(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ii(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Di(n,e)}else{if(Ii(n,i))return;Li.set(i),t.uniformMatrix3fv(this.addr,!1,Li),Di(n,i)}}function ki(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ii(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Di(n,e)}else{if(Ii(n,i))return;Ri.set(i),t.uniformMatrix4fv(this.addr,!1,Ri),Di(n,i)}}function Vi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Gi(t,e){const n=this.cache;Ii(n,e)||(t.uniform2iv(this.addr,e),Di(n,e))}function Wi(t,e){const n=this.cache;Ii(n,e)||(t.uniform3iv(this.addr,e),Di(n,e))}function ji(t,e){const n=this.cache;Ii(n,e)||(t.uniform4iv(this.addr,e),Di(n,e))}function Xi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Yi(t,e){const n=this.cache;Ii(n,e)||(t.uniform2uiv(this.addr,e),Di(n,e))}function Zi(t,e){const n=this.cache;Ii(n,e)||(t.uniform3uiv(this.addr,e),Di(n,e))}function Ji(t,e){const n=this.cache;Ii(n,e)||(t.uniform4uiv(this.addr,e),Di(n,e))}function Ki(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||bi,r)}function Qi(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Si,r)}function $i(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ei,r)}function tr(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Mi,r)}function er(t,e){t.uniform1fv(this.addr,e)}function nr(t,e){const n=Pi(e,this.size,2);t.uniform2fv(this.addr,n)}function ir(t,e){const n=Pi(e,this.size,3);t.uniform3fv(this.addr,n)}function rr(t,e){const n=Pi(e,this.size,4);t.uniform4fv(this.addr,n)}function sr(t,e){const n=Pi(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function or(t,e){const n=Pi(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ar(t,e){const n=Pi(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function lr(t,e){t.uniform1iv(this.addr,e)}function hr(t,e){t.uniform2iv(this.addr,e)}function cr(t,e){t.uniform3iv(this.addr,e)}function ur(t,e){t.uniform4iv(this.addr,e)}function dr(t,e){t.uniform1uiv(this.addr,e)}function mr(t,e){t.uniform2uiv(this.addr,e)}function pr(t,e){t.uniform3uiv(this.addr,e)}function fr(t,e){t.uniform4uiv(this.addr,e)}function gr(t,e,n){const i=e.length,r=Ni(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTexture2D(e[t]||bi,r[t])}function xr(t,e,n){const i=e.length,r=Ni(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture3D(e[t]||Si,r[t])}function vr(t,e,n){const i=e.length,r=Ni(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTextureCube(e[t]||Ei,r[t])}function qr(t,e,n){const i=e.length,r=Ni(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||Mi,r[t])}function _r(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return zi;case 35664:return Oi;case 35665:return Bi;case 35666:return Fi;case 35674:return Ui;case 35675:return Hi;case 35676:return ki;case 5124:case 35670:return Vi;case 35667:case 35671:return Gi;case 35668:case 35672:return Wi;case 35669:case 35673:return ji;case 5125:return Xi;case 36294:return Yi;case 36295:return Zi;case 36296:return Ji;case 35678:case 36198:case 36298:case 36306:case 35682:return Ki;case 35679:case 36299:case 36307:return Qi;case 35680:case 36300:case 36308:case 36293:return $i;case 36289:case 36303:case 36311:case 36292:return tr}}(e.type)}function yr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return er;case 35664:return nr;case 35665:return ir;case 35666:return rr;case 35674:return sr;case 35675:return or;case 35676:return ar;case 5124:case 35670:return lr;case 35667:case 35671:return hr;case 35668:case 35672:return cr;case 35669:case 35673:return ur;case 5125:return dr;case 36294:return mr;case 36295:return pr;case 36296:return fr;case 35678:case 36198:case 36298:case 36306:case 35682:return gr;case 35679:case 36299:case 36307:return xr;case 35680:case 36300:case 36308:case 36293:return vr;case 36289:case 36303:case 36311:case 36292:return qr}}(e.type)}function wr(t){this.id=t,this.seq=[],this.map={}}yr.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Di(e,t)},wr.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}};const br=/(\w+)(\])?(\[|\.)?/g;function Mr(t,e){t.seq.push(e),t.map[e.id]=e}function Sr(t,e,n){const i=t.name,r=i.length;for(br.lastIndex=0;;){const s=br.exec(i),o=br.lastIndex;let a=s[1];const l="]"===s[2],h=s[3];if(l&&(a|=0),void 0===h||"["===h&&o+2===r){Mr(n,void 0===h?new _r(a,t,e):new yr(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new wr(a),Mr(n,t)),n=t}}}function Er(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Sr(n,t.getUniformLocation(e,n.name),this)}}function Tr(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}Er.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Er.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},Er.upload=function(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},Er.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let Ar=0;function Rr(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Lr(t,e){const n=function(t){switch(t){case P:return["Linear","( value )"];case I:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Cr(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Pr(t){return""!==t}function Ir(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Dr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Nr=/^[ \t]*#include +<([\w\d./]+)>/gm;function zr(t){return t.replace(Nr,Or)}function Or(t,e){const n=zn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return zr(n)}const Br=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Fr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ur(t){return t.replace(Fr,kr).replace(Br,Hr)}function Hr(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),kr(0,e,n,i)}function kr(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Vr(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Gr(t,e,s,o){const a=t.getContext(),l=s.defines;let h=s.vertexShader,c=s.fragmentShader;const u=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(s),d=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case n:case i:e="ENVMAP_TYPE_CUBE";break;case r:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(s),m=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case i:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(s),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(s),f=s.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pr).join("\n")}(s),g=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),x=a.createProgram();let v,q,_=s.glslVersion?"#version "+s.glslVersion+"\n":"";s.isRawShaderMaterial?(v=[g].filter(Pr).join("\n"),v.length>0&&(v+="\n"),q=[f,g].filter(Pr).join("\n"),q.length>0&&(q+="\n")):(v=[Vr(s),"#define SHADER_NAME "+s.shaderName,g,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+m:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.morphTargets&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargets&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Pr).join("\n"),q=[f,Vr(s),"#define SHADER_NAME "+s.shaderName,g,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.envMap?"#define "+m:"",s.envMap?"#define "+p:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(s.extensionShaderTextureLOD||s.envMap)&&s.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==s.toneMapping?"#define TONE_MAPPING":"",0!==s.toneMapping?zn.tonemapping_pars_fragment:"",0!==s.toneMapping?Cr("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.transparent?"":"#define OPAQUE",zn.encodings_pars_fragment,Lr("linearToOutputTexel",s.outputEncoding),s.depthPacking?"#define DEPTH_PACKING "+s.depthPacking:"","\n"].filter(Pr).join("\n")),h=zr(h),h=Ir(h,s),h=Dr(h,s),c=zr(c),c=Ir(c,s),c=Dr(c,s),h=Ur(h),c=Ur(c),s.isWebGL2&&!0!==s.isRawShaderMaterial&&(_="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,q=["#define varying in",s.glslVersion===O?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===O?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+q);const y=_+q+c,w=Tr(a,35633,_+v+h),b=Tr(a,35632,y);if(a.attachShader(x,w),a.attachShader(x,b),void 0!==s.index0AttributeName?a.bindAttribLocation(x,0,s.index0AttributeName):!0===s.morphTargets&&a.bindAttribLocation(x,0,"position"),a.linkProgram(x),t.debug.checkShaderErrors){const t=a.getProgramInfoLog(x).trim(),e=a.getShaderInfoLog(w).trim(),n=a.getShaderInfoLog(b).trim();let i=!0,r=!0;if(!1===a.getProgramParameter(x,35714)){i=!1;const e=Rr(a,w,"vertex"),n=Rr(a,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(x,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(r=!1);r&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:v},fragmentShader:{log:n,prefix:q}})}let M,S;return a.deleteShader(w),a.deleteShader(b),this.getUniforms=function(){return void 0===M&&(M=new Er(a,x)),M},this.getAttributes=function(){return void 0===S&&(S=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(a,x)),S},this.destroy=function(){o.releaseStatesOfProgram(this),a.deleteProgram(x),this.program=void 0},this.name=s.shaderName,this.id=Ar++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=w,this.fragmentShader=b,this}let Wr=0;class jr{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Xr;e.set(t,n)}return e.get(t)}}class Xr{constructor(){this.id=Wr++,this.usedTimes=0}}function Yr(t,e,n,i,s,o,a){const l=new oe,h=new jr,c=[],u=s.isWebGL2,d=s.logarithmicDepthBuffer,m=s.floatVertexTextures,p=s.maxVertexUniforms,f=s.vertexTextures;let g=s.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,l,c,v,q){const _=v.fog,y=o.isMeshStandardMaterial?v.environment:null,w=(o.isMeshStandardMaterial?n:e).get(o.envMap||y),b=x[o.type],M=q.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(m)return 1024;{const t=p,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(q):0;let S,E,T,A;if(null!==o.precision&&(g=s.getMaxPrecision(o.precision),g!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",g,"instead.")),b){const t=Bn[b];S=t.vertexShader,E=t.fragmentShader}else S=o.vertexShader,E=o.fragmentShader,h.update(o),T=h.getVertexShaderID(o),A=h.getFragmentShaderID(o);const R=t.getRenderTarget(),L=o.alphaTest>0,C=o.clearcoat>0;return{isWebGL2:u,shaderID:b,shaderName:o.type,vertexShader:S,fragmentShader:E,defines:o.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:g,instancing:!0===q.isInstancedMesh,instancingColor:!0===q.isInstancedMesh&&null!==q.instanceColor,supportsVertexTextures:f,outputEncoding:null===R?t.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:P,map:!!o.map,matcap:!!o.matcap,envMap:!!w,envMapMode:w&&w.mapping,envMapCubeUV:!!w&&(w.mapping===r||307===w.mapping),lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===I,clearcoat:C,clearcoatMap:C&&!!o.clearcoatMap,clearcoatRoughnessMap:C&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,transparent:o.transparent,alphaMap:!!o.alphaMap,alphaTest:L,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!q.geometry&&!!q.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!q.geometry&&!!q.geometry.attributes.color&&4===q.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!_,useFog:o.fog,fogExp2:_&&_.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===q.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:m,morphTargets:!!q.geometry&&!!q.geometry.morphAttributes.position,morphNormals:!!q.geometry&&!!q.geometry.morphAttributes.normal,morphTargetsCount:q.geometry&&q.geometry.morphAttributes.position?q.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection)}(n,e),function(t,e){l.disableAll(),e.isWebGL2&&l.enable(0),e.supportsVertexTextures&&l.enable(1),e.instancing&&l.enable(2),e.instancingColor&&l.enable(3),e.map&&l.enable(4),e.matcap&&l.enable(5),e.envMap&&l.enable(6),e.envMapCubeUV&&l.enable(7),e.lightMap&&l.enable(8),e.aoMap&&l.enable(9),e.emissiveMap&&l.enable(10),e.bumpMap&&l.enable(11),e.normalMap&&l.enable(12),e.objectSpaceNormalMap&&l.enable(13),e.tangentSpaceNormalMap&&l.enable(14),e.clearcoat&&l.enable(15),e.clearcoatMap&&l.enable(16),e.clearcoatRoughnessMap&&l.enable(17),e.clearcoatNormalMap&&l.enable(18),e.displacementMap&&l.enable(19),e.specularMap&&l.enable(20),e.roughnessMap&&l.enable(21),e.metalnessMap&&l.enable(22),e.gradientMap&&l.enable(23),e.alphaMap&&l.enable(24),e.alphaTest&&l.enable(25),e.vertexColors&&l.enable(26),e.vertexAlphas&&l.enable(27),e.vertexUvs&&l.enable(28),e.vertexTangents&&l.enable(29),e.uvsVertexOnly&&l.enable(30),e.fog&&l.enable(31),t.push(l.mask),l.disableAll(),e.useFog&&l.enable(0),e.flatShading&&l.enable(1),e.logarithmicDepthBuffer&&l.enable(2),e.skinning&&l.enable(3),e.useVertexTexture&&l.enable(4),e.morphTargets&&l.enable(5),e.morphNormals&&l.enable(6),e.premultipliedAlpha&&l.enable(7),e.shadowMapEnabled&&l.enable(8),e.physicallyCorrectLights&&l.enable(9),e.doubleSided&&l.enable(10),e.flipSided&&l.enable(11),e.depthPacking&&l.enable(12),e.dithering&&l.enable(13),e.specularIntensityMap&&l.enable(14),e.specularColorMap&&l.enable(15),e.transmission&&l.enable(16),e.transmissionMap&&l.enable(17),e.thicknessMap&&l.enable(18),e.sheen&&l.enable(19),e.sheenColorMap&&l.enable(20),e.sheenRoughnessMap&&l.enable(21),e.decodeVideoTexture&&l.enable(22),e.transparent&&l.enable(23),t.push(l.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=x[t.type];let n;if(e){const t=Bn[e];n=vn.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=c.length;t<e;t++){const e=c[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Gr(t,n,e,o),c.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){h.remove(t)},programs:c,dispose:function(){h.dispose()}}}function Zr(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Jr(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Kr(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Qr(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,o,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,o,a,l,h){const c=s(t,e,o,a,l,h);o.transmission>0?i.push(c):!0===o.transparent?r.push(c):n.push(c)},unshift:function(t,e,o,a,l,h){const c=s(t,e,o,a,l,h);o.transmission>0?i.unshift(c):!0===o.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Jr),i.length>1&&i.sort(e||Kr),r.length>1&&r.sort(e||Kr)}}}function $r(){let t=new WeakMap;return{get:function(e,n){let i;return!1===t.has(e)?(i=new Qr,t.set(e,[i])):n>=t.get(e).length?(i=new Qr,t.get(e).push(i)):i=t.get(e)[n],i},dispose:function(){t=new WeakMap}}}function ts(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new vt,color:new lt};break;case"SpotLight":n={position:new vt,direction:new vt,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new vt,color:new lt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new vt,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":n={color:new lt,position:new vt,halfWidth:new vt,halfHeight:new vt}}return t[e.id]=n,n}}}let es=0;function ns(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function is(t,e){const n=new ts,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new vt);const s=new vt,o=new Zt,a=new Zt;return{setup:function(s,o){let a=0,l=0,h=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,d=0,m=0,p=0,f=0,g=0,x=0;s.sort(ns);const v=!0!==o?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],o=e.color,q=e.intensity,_=e.distance,y=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*q*v,l+=o.g*q*v,h+=o.b*q*v;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],q);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=y,r.directionalShadowMatrix[c]=e.shadow.matrix,f++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(q*v),t.distance=_,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[d]=n,r.spotShadowMap[d]=y,r.spotShadowMatrix[d]=e.shadow.matrix,x++}r.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(o).multiplyScalar(q),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[m]=t,m++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=y,r.pointShadowMatrix[u]=e.shadow.matrix,g++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(q*v),t.groundColor.copy(e.groundColor).multiplyScalar(q*v),r.hemi[p]=t,p++}}m>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=On.LTC_FLOAT_1,r.rectAreaLTC2=On.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=On.LTC_HALF_1,r.rectAreaLTC2=On.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=h;const q=r.hash;q.directionalLength===c&&q.pointLength===u&&q.spotLength===d&&q.rectAreaLength===m&&q.hemiLength===p&&q.numDirectionalShadows===f&&q.numPointShadows===g&&q.numSpotShadows===x||(r.directional.length=c,r.spot.length=d,r.rectArea.length=m,r.point.length=u,r.hemi.length=p,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=x,q.directionalLength=c,q.pointLength=u,q.spotLength=d,q.rectAreaLength=m,q.hemiLength=p,q.numDirectionalShadows=f,q.numPointShadows=g,q.numSpotShadows=x,r.version=es++)},setupView:function(t,e){let n=0,i=0,l=0,h=0,c=0;const u=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),n++}else if(d.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(d.isRectAreaLight){const t=r.rectArea[h];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(d.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),h++}else if(d.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(u),i++}else if(d.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(u),t.direction.normalize(),c++}}},state:r}}function rs(t,e){const n=new is(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function ss(t,e){let n=new WeakMap;return{get:function(i,r=0){let s;return!1===n.has(i)?(s=new rs(t,e),n.set(i,[s])):r>=n.get(i).length?(s=new rs(t,e),n.get(i).push(s)):s=n.get(i)[r],s},dispose:function(){n=new WeakMap}}}class os extends Ie{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}os.prototype.isMeshDepthMaterial=!0;class as extends Ie{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new vt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ls(t,e,n){let i=new Pn;const r=new Q,s=new Q,o=new pt,a=new os({depthPacking:3201}),h=new as,c={},d=n.maxTextureSize,m={0:1,1:0,2:2},p=new qn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Q},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=p.clone();f.defines.HORIZONTAL_PASS=1;const g=new Ye;g.setAttribute("position",new Oe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new mn(g,p),v=this;function _(n,i){const r=e.update(x);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,f.needsUpdate=!0),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,p,x,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,f,x,null)}function y(e,n,i,r,s,o,l){let u=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(u=void 0!==d?d:!0===r.isPointLight?h:a,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=u.uuid,e=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let r=n[e];void 0===r&&(r=u.clone(),n[e]=r),u=r}return u.visible=i.visible,u.wireframe=i.wireframe,u.side=3===l?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:m[i.side],u.alphaMap=i.alphaMap,u.alphaTest=i.alphaTest,u.clipShadows=i.clipShadows,u.clippingPlanes=i.clippingPlanes,u.clipIntersection=i.clipIntersection,u.displacementMap=i.displacementMap,u.displacementScale=i.displacementScale,u.displacementBias=i.displacementBias,u.wireframeLinewidth=i.wireframeLinewidth,u.linewidth=i.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=s,u.farDistance=o),u}function w(n,r,s,o,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,h=e.length;l<h;l++){const h=e[l],c=r[h.materialIndex];if(c&&c.visible){const e=y(n,0,c,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,h)}}}else if(r.visible){const e=y(n,0,r,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)w(l[t],r,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,a){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===e.length)return;const h=t.getRenderTarget(),c=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),p=t.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let h=0,c=e.length;h<c;h++){const c=e[h],m=c.shadow;if(void 0===m){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===m.autoUpdate&&!1===m.needsUpdate)continue;r.copy(m.mapSize);const f=m.getFrameExtents();if(r.multiply(f),s.copy(m.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/f.x),r.x=s.x*f.x,m.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/f.y),r.y=s.y*f.y,m.mapSize.y=s.y)),null===m.map&&!m.isPointLightShadow&&3===this.type){const t={minFilter:u,magFilter:u,format:q};m.map=new ft(r.x,r.y,t),m.map.texture.name=c.name+".shadowMap",m.mapPass=new ft(r.x,r.y,t),m.camera.updateProjectionMatrix()}if(null===m.map){const t={minFilter:l,magFilter:l,format:q};m.map=new ft(r.x,r.y,t),m.map.texture.name=c.name+".shadowMap",m.camera.updateProjectionMatrix()}t.setRenderTarget(m.map),t.clear();const g=m.getViewportCount();for(let t=0;t<g;t++){const e=m.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),p.viewport(o),m.updateMatrices(c,t),i=m.getFrustum(),w(n,a,m.camera,c,this.type)}m.isPointLightShadow||3!==this.type||_(m,a),m.needsUpdate=!1}v.needsUpdate=!1,t.setRenderTarget(h,c,m)}}function hs(t,n,i){const r=i.isWebGL2,s=new function(){let e=!1;const n=new pt;let i=null;const r=new pt(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?F(2929):U(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},a=new function(){let e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null;return{setTest:function(t){e||(t?F(2960):U(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null}}};let l={},h={},c=new WeakMap,u=[],d=null,m=!1,p=null,f=null,g=null,x=null,v=null,q=null,_=null,y=!1,w=null,b=null,M=null,S=null,E=null;const T=t.getParameter(35661);let A=!1,R=0;const L=t.getParameter(7938);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(L)[1]),A=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),A=R>=2);let C=null,P={};const I=t.getParameter(3088),D=t.getParameter(2978),N=(new pt).fromArray(I),z=(new pt).fromArray(D);function O(e,n,i){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return s}const B={};function F(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function U(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}B[3553]=O(3553,3553,1),B[34067]=O(34067,34069,6),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(3),G(!1),W(1),F(2884),V(0);const H={[e]:32774,101:32778,102:32779};if(r)H[103]=32775,H[104]=32776;else{const t=n.get("EXT_blend_minmax");null!==t&&(H[103]=t.MIN_EXT,H[104]=t.MAX_EXT)}const k={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(n,i,r,s,o,a,l,h){if(0!==n){if(!1===m&&(F(3042),m=!0),5===n)o=o||i,a=a||r,l=l||s,i===f&&o===v||(t.blendEquationSeparate(H[i],H[o]),f=i,v=o),r===g&&s===x&&a===q&&l===_||(t.blendFuncSeparate(k[r],k[s],k[a],k[l]),g=r,x=s,q=a,_=l),p=n,y=null;else if(n!==p||h!==y){if(f===e&&v===e||(t.blendEquation(32774),f=e,v=e),h)switch(n){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}else switch(n){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}g=null,x=null,q=null,_=null,p=n,y=h}}else!0===m&&(U(3042),m=!1)}function G(e){w!==e&&(e?t.frontFace(2304):t.frontFace(2305),w=e)}function W(e){0!==e?(F(2884),e!==b&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):U(2884),b=e}function j(e,n,i){e?(F(32823),S===n&&E===i||(t.polygonOffset(n,i),S=n,E=i)):U(32823)}function X(e){void 0===e&&(e=33984+T-1),C!==e&&(t.activeTexture(e),C=e)}return{buffers:{color:s,depth:o,stencil:a},enable:F,disable:U,bindFramebuffer:function(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,r&&(36009===e&&(h[36160]=n),36160===e&&(h[36009]=n)),!0)},drawBuffers:function(e,r){let s=u,o=!1;if(e)if(s=c.get(r),void 0===s&&(s=[],c.set(r,s)),e.isWebGLMultipleRenderTargets){const t=e.texture;if(s.length!==t.length||36064!==s[0]){for(let e=0,n=t.length;e<n;e++)s[e]=36064+e;s.length=t.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0);else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(i.isWebGL2?t.drawBuffers(s):n.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:V,setMaterial:function(t,e){2===t.side?U(2884):F(2884);let n=1===t.side;e&&(n=!n),G(n),1===t.blending&&!1===t.transparent?V(0):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),s.setMask(t.colorWrite);const i=t.stencilWrite;a.setTest(i),i&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),j(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?F(32926):U(32926)},setFlipSided:G,setCullFace:W,setLineWidth:function(e){e!==M&&(A&&t.lineWidth(e),M=e)},setPolygonOffset:j,setScissorTest:function(t){t?F(3089):U(3089)},activeTexture:X,bindTexture:function(e,n){null===C&&X();let i=P[C];void 0===i&&(i={type:void 0,texture:void 0},P[C]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||B[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=P[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},C=null,P={},h={},c=new WeakMap,u=[],d=null,m=!1,p=null,f=null,g=null,x=null,v=null,q=null,_=null,y=!1,w=null,b=null,M=null,S=null,E=null,N.set(0,0,t.canvas.width,t.canvas.height),z.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}}}function cs(t,e,n,i,r,w,b){const M=r.isWebGL2,S=r.maxTextures,E=r.maxCubemapSize,T=r.maxTextureSize,A=r.maxSamples,R=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,L=new WeakMap;let C,D=!1;try{D="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function N(t,e){return D?new OffscreenCanvas(t,e):et("canvas")}function z(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?J:Math.floor,s=i(r*t.width),o=i(r*t.height);void 0===C&&(C=N(s,o));const a=n?N(s,o):C;return a.width=s,a.height=o,a.getContext("2d").drawImage(t,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function O(t){return Y(t.width)&&Y(t.height)}function F(t,e){return t.generateMipmaps&&e&&t.minFilter!==l&&t.minFilter!==u}function U(e){t.generateMipmap(e)}function H(n,i,r,s,o=!1){if(!1===M)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),33319===i&&(5126===r&&(a=33328),5131===r&&(a=33327),5121===r&&(a=33323)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=s===I&&!1===o?35907:32856),32819===r&&(a=32854),32820===r&&(a=32855)),33325!==a&&33326!==a&&33327!==a&&33328!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function k(t,e,n){return!0===F(t,n)||t.isFramebufferTexture&&t.minFilter!==l&&t.minFilter!==u?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function V(t){return t===l||t===h||t===c?9728:9729}function G(e){const n=e.target;n.removeEventListener("dispose",G),function(e){const n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}(n),n.isVideoTexture&&L.delete(n),b.memory.textures--}function W(e){const n=e.target;n.removeEventListener("dispose",W),function(e){const n=e.texture,r=i.get(e),s=i.get(n);if(e){if(void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),b.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),b.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}}(n)}let j=0;function X(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=b.render.frame;L.get(t)!==e&&(L.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void nt(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function Z(e,r){const s=i.get(e);e.version>0&&s.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;tt(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),o=i.image[0]&&i.image[0].isDataTexture,a=[];for(let t=0;t<6;t++)a[t]=s||o?o?i.image[t].image:i.image[t]:z(i.image[t],!1,!0,E),a[t]=at(i,a[t]);const l=a[0],h=O(l)||M,c=w.convert(i.format,i.encoding),u=w.convert(i.type),d=H(i.internalFormat,c,u,i.encoding),m=M&&!0!==i.isVideoTexture,p=void 0===e.__version;let f,g=k(i,l,h);if($(34067,i,h),s){m&&p&&n.texStorage2D(34067,g,d,l.width,l.height);for(let t=0;t<6;t++){f=a[t].mipmaps;for(let e=0;e<f.length;e++){const r=f[e];i.format!==q?null!==c?m?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,c,r.data):n.compressedTexImage2D(34069+t,e,d,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):m?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,c,u,r.data):n.texImage2D(34069+t,e,d,r.width,r.height,0,c,u,r.data)}}}else{f=i.mipmaps,m&&p&&(f.length>0&&g++,n.texStorage2D(34067,g,d,a[0].width,a[0].height));for(let t=0;t<6;t++)if(o){m?n.texSubImage2D(34069+t,0,0,0,a[t].width,a[t].height,c,u,a[t].data):n.texImage2D(34069+t,0,d,a[t].width,a[t].height,0,c,u,a[t].data);for(let e=0;e<f.length;e++){const i=f[e].image[t].image;m?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,c,u,i.data):n.texImage2D(34069+t,e+1,d,i.width,i.height,0,c,u,i.data)}}else{m?n.texSubImage2D(34069+t,0,0,0,c,u,a[t]):n.texImage2D(34069+t,0,d,c,u,a[t]);for(let e=0;e<f.length;e++){const i=f[e];m?n.texSubImage2D(34069+t,e+1,0,0,c,u,i.image[t]):n.texImage2D(34069+t,e+1,d,c,u,i.image[t])}}}F(i,h)&&U(34067),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(s,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}const K={[s]:10497,[o]:33071,[a]:33648},Q={[l]:9728,[h]:9984,[c]:9986,[u]:9729,1007:9985,[d]:9987};function $(n,s,a){if(a?(t.texParameteri(n,10242,K[s.wrapS]),t.texParameteri(n,10243,K[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,K[s.wrapR]),t.texParameteri(n,10240,Q[s.magFilter]),t.texParameteri(n,10241,Q[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS===o&&s.wrapT===o||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,V(s.magFilter)),t.texParameteri(n,10241,V(s.minFilter)),s.minFilter!==l&&s.minFilter!==u&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===g&&!1===e.has("OES_texture_float_linear"))return;if(!1===M&&s.type===x&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function tt(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",G),e.__webglTexture=t.createTexture(),b.memory.textures++)}function nt(e,i,r){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),tt(e,i),n.activeTexture(33984+r),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const a=function(t){return!M&&(t.wrapS!==o||t.wrapT!==o||t.minFilter!==l&&t.minFilter!==u)}(i)&&!1===O(i.image);let h=z(i.image,a,!1,T);h=at(i,h);const c=O(h)||M,d=w.convert(i.format,i.encoding);let m,x=w.convert(i.type),b=H(i.internalFormat,d,x,i.encoding,i.isVideoTexture);$(s,i,c);const S=i.mipmaps,E=M&&!0!==i.isVideoTexture,A=void 0===e.__version,R=k(i,h,c);if(i.isDepthTexture)b=6402,M?b=i.type===g?36012:i.type===f?33190:i.type===v?35056:33189:i.type===g&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===_&&6402===b&&i.type!==p&&i.type!==f&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=p,x=w.convert(i.type)),i.format===y&&6402===b&&(b=34041,i.type!==v&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=v,x=w.convert(i.type))),E&&A?n.texStorage2D(3553,1,b,h.width,h.height):n.texImage2D(3553,0,b,h.width,h.height,0,d,x,null);else if(i.isDataTexture)if(S.length>0&&c){E&&A&&n.texStorage2D(3553,R,b,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],E?n.texSubImage2D(3553,0,0,0,m.width,m.height,d,x,m.data):n.texImage2D(3553,t,b,m.width,m.height,0,d,x,m.data);i.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,R,b,h.width,h.height),n.texSubImage2D(3553,0,0,0,h.width,h.height,d,x,h.data)):n.texImage2D(3553,0,b,h.width,h.height,0,d,x,h.data);else if(i.isCompressedTexture){E&&A&&n.texStorage2D(3553,R,b,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],i.format!==q?null!==d?E?n.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,d,m.data):n.compressedTexImage2D(3553,t,b,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,t,0,0,m.width,m.height,d,x,m.data):n.texImage2D(3553,t,b,m.width,m.height,0,d,x,m.data)}else if(i.isDataTexture2DArray)E?(A&&n.texStorage3D(35866,R,b,h.width,h.height,h.depth),n.texSubImage3D(35866,0,0,0,0,h.width,h.height,h.depth,d,x,h.data)):n.texImage3D(35866,0,b,h.width,h.height,h.depth,0,d,x,h.data);else if(i.isDataTexture3D)E?(A&&n.texStorage3D(32879,R,b,h.width,h.height,h.depth),n.texSubImage3D(32879,0,0,0,0,h.width,h.height,h.depth,d,x,h.data)):n.texImage3D(32879,0,b,h.width,h.height,h.depth,0,d,x,h.data);else if(i.isFramebufferTexture)E&&A?n.texStorage2D(3553,R,b,h.width,h.height):n.texImage2D(3553,0,b,h.width,h.height,0,d,x,null);else if(S.length>0&&c){E&&A&&n.texStorage2D(3553,R,b,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],E?n.texSubImage2D(3553,t,0,0,d,x,m):n.texImage2D(3553,t,b,d,x,m);i.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,R,b,h.width,h.height),n.texSubImage2D(3553,0,0,0,d,x,h)):n.texImage2D(3553,0,b,d,x,h);F(i,c)&&U(s),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function it(e,r,s,o,a){const l=w.convert(s.format,s.encoding),h=w.convert(s.type),c=H(s.internalFormat,l,h,s.encoding);i.get(r).__hasExternalTextures||(32879===a||35866===a?n.texImage3D(a,0,c,r.width,r.height,r.depth,0,l,h,null):n.texImage2D(a,0,c,r.width,r.height,0,l,h,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?R.framebufferTexture2DMultisampleEXT(36160,o,a,i.get(s).__webglTexture,0,ot(r)):t.framebufferTexture2D(36160,o,a,i.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function rt(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||n.useRenderToTexture){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===g?r=36012:e.type===f&&(r=33190));const i=ot(n);n.useRenderToTexture?R.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=ot(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):n.useRenderToTexture?R.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=w.convert(e.format,e.encoding),s=w.convert(e.type),o=H(e.internalFormat,r,s,e.encoding),a=ot(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,a,o,n.width,n.height):n.useRenderToTexture?R.renderbufferStorageMultisampleEXT(36161,a,o,n.width,n.height):t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function st(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),X(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=ot(r);if(r.depthTexture.format===_)r.useRenderToTexture?R.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==y)throw new Error("Unknown depthTexture format");r.useRenderToTexture?R.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),rt(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),rt(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function ot(t){return M&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(A,t.samples):0}function at(t,n){const i=t.encoding,r=t.format,s=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===B||i!==P&&(i===I?!1===M?!0===e.has("EXT_sRGB")&&r===q?(t.format=B,t.minFilter=u,t.generateMipmaps=!1):n=ct.sRGBToLinear(n):r===q&&s===m||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}let lt=!1,ht=!1;this.allocateTextureUnit=function(){const t=j;return t>=S&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+S),j+=1,t},this.resetTextureUnits=function(){j=0},this.setTexture2D=X,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?nt(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?nt(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=Z,this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&it(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&st(t)},this.setupRenderTarget=function(e){const s=e.texture,o=i.get(e),a=i.get(s);e.addEventListener("dispose",W),!0!==e.isWebGLMultipleRenderTargets&&(void 0===a.__webglTexture&&(a.__webglTexture=t.createTexture()),a.__version=s.version,b.memory.textures++);const l=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultipleRenderTargets,c=s.isDataTexture3D||s.isDataTexture2DArray,u=O(e)||M;if(l){o.__webglFramebuffer=[];for(let e=0;e<6;e++)o.__webglFramebuffer[e]=t.createFramebuffer()}else if(o.__webglFramebuffer=t.createFramebuffer(),h)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),b.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(M){o.__webglMultisampledFramebuffer=t.createFramebuffer(),o.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,o.__webglColorRenderbuffer);const i=w.convert(s.format,s.encoding),r=w.convert(s.type),a=H(s.internalFormat,i,r,s.encoding),l=ot(e);t.renderbufferStorageMultisample(36161,l,a,e.width,e.height),n.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(o.__webglDepthRenderbuffer=t.createRenderbuffer(),rt(o.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,a.__webglTexture),$(34067,s,u);for(let t=0;t<6;t++)it(o.__webglFramebuffer[t],e,s,36064,34069+t);F(s,u)&&U(34067),n.unbindTexture()}else if(h){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=i.get(s);n.bindTexture(3553,a.__webglTexture),$(3553,s,u),it(o.__webglFramebuffer,e,s,36064+r,3553),F(s,u)&&U(3553)}n.unbindTexture()}else{let t=3553;c&&(M?t=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(t,a.__webglTexture),$(t,s,u),it(o.__webglFramebuffer,e,s,36064,t),F(s,u)&&U(t),n.unbindTexture()}e.depthBuffer&&st(e)},this.updateRenderTargetMipmap=function(t){const e=O(t)||M,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=r.length;s<o;s++){const o=r[s];if(F(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(o).__webglTexture;n.bindTexture(e,r),U(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer)if(M){const r=e.width,s=e.height;let o=16384;const a=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024));const h=i.get(e);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728),t.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=st,this.setupFrameBufferTexture=it,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===lt&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),lt=!0),t=t.texture),X(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===ht&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ht=!0),t=t.texture),Z(t,e)}}function us(t,e,n){const i=n.isWebGL2;return{convert:function(t,n=null){let r;if(t===m)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1010===t)return 5120;if(1011===t)return 5122;if(t===p)return 5123;if(1013===t)return 5124;if(t===f)return 5125;if(t===g)return 5126;if(t===x)return i?5131:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(1021===t)return 6406;if(t===q)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===_)return 6402;if(t===y)return 34041;if(1028===t)return 6403;if(1022===t)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(t===B)return r=e.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1033===t)return 36249;if(t===w||t===b||t===M||t===S)if(n===I){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(t===w)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===b)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===M)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===S)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(t===w)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===b)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===M)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===S)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(35840===t)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===t||37496===t){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(37492===t)return n===I?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(37808===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===t)return n===I?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===t){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(36492===t)return n===I?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return t===v?i?34042:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}as.prototype.isMeshDistanceMaterial=!0;class ds extends yn{constructor(t=[]){super(),this.cameras=t}}ds.prototype.isArrayCamera=!0;class ms extends _e{constructor(){super(),this.type="Group"}}ms.prototype.isGroup=!0;const ps={type:"move"};class fs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ms,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ms,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new vt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new vt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ms,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new vt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new vt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ps))),l&&t.hand){s=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const t=new ms;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[i.jointName]=t,l.add(t)}const r=l.joints[i.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),a=.02,h=.005;l.inputState.pinching&&o>a+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class gs extends dt{constructor(t,e,n,i,r,s,o,a,h,c){if((c=void 0!==c?c:_)!==_&&c!==y)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===_&&(n=p),void 0===n&&c===y&&(n=v),super(null,i,r,s,o,a,c,n,h),this.image={width:t,height:e},this.magFilter=void 0!==o?o:l,this.minFilter=void 0!==a?a:l,this.flipY=!1,this.generateMipmaps=!1}}gs.prototype.isDepthTexture=!0;class xs extends F{constructor(t,e){super();const n=this;let i=null,r=1,s=null,o="local-floor";const a=t.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,h=null,c=null,u=null,d=!1,f=null;const g=e.getContextAttributes();let x=null,w=null;const b=[],M=new Map,S=new yn;S.layers.enable(1),S.viewport=new pt;const E=new yn;E.layers.enable(2),E.viewport=new pt;const T=[S,E],A=new ds;A.layers.enable(1),A.layers.enable(2);let R=null,L=null;function C(t){const e=M.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function P(){M.forEach((function(t,e){t.disconnect(e)})),M.clear(),R=null,L=null,t.setRenderTarget(x),u=null,c=null,h=null,i=null,w=null,F.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function D(t){const e=i.inputSources;for(let t=0;t<b.length;t++)M.set(e[t],b[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=M.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),M.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],i=M.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=b[t];return void 0===e&&(e=new fs,b[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=b[t];return void 0===e&&(e=new fs,b[t]=e),e.getGripSpace()},this.getHand=function(t){let e=b[t];return void 0===e&&(e=new fs,b[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==c?c:u},this.getBinding=function(){return h},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(x=t.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",P),i.addEventListener("inputsourceschange",D),!0!==g.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:u}),w=new ft(u.framebufferWidth,u.framebufferHeight,{format:q,type:m,encoding:t.outputEncoding})}else{d=g.antialias;let n=null,s=null,o=null;g.depth&&(o=g.stencil?35056:33190,n=g.stencil?y:_,s=g.stencil?v:p);const l={colorFormat:t.outputEncoding===I?35907:32856,depthFormat:o,scaleFactor:r};h=new XRWebGLBinding(i,e),c=h.createProjectionLayer(l),i.updateRenderState({layers:[c]}),w=d?new gt(c.textureWidth,c.textureHeight,{format:q,type:m,depthTexture:new gs(c.textureWidth,c.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:g.stencil,ignoreDepth:c.ignoreDepthValues,useRenderToTexture:a,encoding:t.outputEncoding}):new ft(c.textureWidth,c.textureHeight,{format:q,type:m,depthTexture:new gs(c.textureWidth,c.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:g.stencil,ignoreDepth:c.ignoreDepthValues,encoding:t.outputEncoding})}w.isXRRenderTarget=!0,this.setFoveation(1),s=await i.requestReferenceSpace(o),F.setContext(i),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const N=new vt,z=new vt;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;A.near=E.near=S.near=t.near,A.far=E.far=S.far=t.far,R===A.near&&L===A.far||(i.updateRenderState({depthNear:A.near,depthFar:A.far}),R=A.near,L=A.far);const e=t.parent,n=A.cameras;O(A,e);for(let t=0;t<n.length;t++)O(n[t],e);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),t.position.copy(A.position),t.quaternion.copy(A.quaternion),t.scale.copy(A.scale),t.matrix.copy(A.matrix),t.matrixWorld.copy(A.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){N.setFromMatrixPosition(e.matrixWorld),z.setFromMatrixPosition(n.matrixWorld);const i=N.distanceTo(z),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=o*c,m=o*u,p=i/(-c+u),f=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+p,x=a+p,v=d-f,q=m+(i-f),_=l*a/x*g,y=h*a/x*g;t.projectionMatrix.makePerspective(v,q,_,y,g,x)}(A,S,E):A.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let B=null;const F=new In;F.setAnimationLoop((function(e,n){if(l=n.getViewerPose(s),f=n,null!==l){const e=l.views;null!==u&&(t.setRenderTargetFramebuffer(w,u.framebuffer),t.setRenderTarget(w));let n=!1;e.length!==A.cameras.length&&(A.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==u)s=u.getViewport(r);else{const e=h.getViewSubImage(c,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(w,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(w))}const o=T[i];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===i&&A.matrix.copy(o.matrix),!0===n&&A.cameras.push(o)}}const r=i.inputSources;for(let t=0;t<b.length;t++){const e=b[t],i=r[t];e.update(i,n,s)}B&&B(e,n),f=null})),this.setAnimationLoop=function(t){B=t},this.dispose=function(){}}}function vs(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const i=t.get(n).envMap;let r,s;i&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,s,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate())),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,o):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){let r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,s):i.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function qs(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=et("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,h=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",p=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let f=null,v=null;const _=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=P,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const w=this;let b=!1,M=0,S=0,E=null,T=-1,A=null;const R=new pt,L=new pt;let C=null,I=e.width,D=e.height,N=1,z=null,O=null;const B=new pt(0,0,I,D),F=new pt(0,0,I,D);let U=!1;const H=new Pn;let k=!1,V=!1,G=null;const W=new Zt,j=new vt,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return null===E?N:1}let Z,J,K,Q,$,tt,nt,it,rt,st,ot,at,lt,ht,ct,ut,dt,mt,xt,qt,_t,yt,wt,bt=n;function Mt(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:h,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Tt,!1),e.addEventListener("webglcontextrestored",At,!1),null===bt){const e=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&e.shift(),bt=Mt(e,t),null===bt)throw Mt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===bt.getShaderPrecisionFormat&&(bt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function St(){Z=new di(bt),J=new kn(bt,Z,t),Z.init(J),yt=new us(bt,Z,J),K=new hs(bt,Z,J),Q=new fi(bt),$=new Zr,tt=new cs(bt,Z,K,$,J,yt,Q),nt=new Gn(w),it=new ui(w),rt=new Dn(bt,J),wt=new Un(bt,Z,rt,J),st=new mi(bt,rt,Q,wt),ot=new yi(bt,st,rt,Q),xt=new _i(bt,J,tt),ut=new Vn($),at=new Yr(w,nt,it,Z,J,wt,ut),lt=new vs($),ht=new $r,ct=new ss(Z,J),mt=new Fn(w,nt,K,ot,i,h),dt=new ls(w,ot,J),qt=new Hn(bt,Z,Q,J),_t=new pi(bt,Z,Q,J),Q.programs=at.programs,w.capabilities=J,w.extensions=Z,w.properties=$,w.renderLists=ht,w.shadowMap=dt,w.state=K,w.info=Q}St();const Et=new xs(w,bt);function Tt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=Q.autoReset,e=dt.enabled,n=dt.autoUpdate,i=dt.needsUpdate,r=dt.type;St(),Q.autoReset=t,dt.enabled=e,dt.autoUpdate=n,dt.needsUpdate=i,dt.type=r}function Rt(t){const e=t.target;e.removeEventListener("dispose",Rt),function(t){(function(t){const e=$.get(t).programs;void 0!==e&&(e.forEach((function(t){at.releaseProgram(t)})),t.isShaderMaterial&&at.releaseShaderCache(t))})(t),$.remove(t)}(e)}this.xr=Et,this.getContext=function(){return bt},this.getContextAttributes=function(){return bt.getContextAttributes()},this.forceContextLoss=function(){const t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(t){void 0!==t&&(N=t,this.setSize(I,D,!1))},this.getSize=function(t){return t.set(I,D)},this.setSize=function(t,n,i){Et.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=t,D=n,e.width=Math.floor(t*N),e.height=Math.floor(n*N),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(I*N,D*N).floor()},this.setDrawingBufferSize=function(t,n,i){I=t,D=n,N=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(R)},this.getViewport=function(t){return t.copy(B)},this.setViewport=function(t,e,n,i){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,i),K.viewport(R.copy(B).multiplyScalar(N).floor())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,i){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,i),K.scissor(L.copy(F).multiplyScalar(N).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(t){K.setScissorTest(U=t)},this.setOpaqueSort=function(t){z=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(t){return t.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),bt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Tt,!1),e.removeEventListener("webglcontextrestored",At,!1),ht.dispose(),ct.dispose(),$.dispose(),nt.dispose(),it.dispose(),ot.dispose(),wt.dispose(),at.dispose(),Et.dispose(),Et.removeEventListener("sessionstart",Ct),Et.removeEventListener("sessionend",Pt),G&&(G.dispose(),G=null),It.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=X);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,n,i,r){!0!==e.isScene&&(e=X),tt.resetTextureUnits();const s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===E?w.outputEncoding:!0===E.isXRRenderTarget?E.texture.encoding:P,l=(i.isMeshStandardMaterial?it:nt).get(i.envMap||o),h=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,m=n.morphAttributes.position?n.morphAttributes.position.length:0,p=i.toneMapped?w.toneMapping:0,f=$.get(i),g=v.state.lights;if(!0===k&&(!0===V||t!==A)){const e=t===A&&i.id===T;ut.setState(i,t,e)}let x=!1;i.version===f.__version?f.needsLights&&f.lightsStateVersion!==g.state.version||f.outputEncoding!==a||r.isInstancedMesh&&!1===f.instancing?x=!0:r.isInstancedMesh||!0!==f.instancing?r.isSkinnedMesh&&!1===f.skinning?x=!0:r.isSkinnedMesh||!0!==f.skinning?f.envMap!==l||i.fog&&f.fog!==s?x=!0:void 0===f.numClippingPlanes||f.numClippingPlanes===ut.numPlanes&&f.numIntersection===ut.numIntersection?(f.vertexAlphas!==h||f.vertexTangents!==c||f.morphTargets!==u||f.morphNormals!==d||f.toneMapping!==p||!0===J.isWebGL2&&f.morphTargetsCount!==m)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,f.__version=i.version);let q=f.currentProgram;!0===x&&(q=Bt(i,e,r));let _=!1,y=!1,b=!1;const M=q.getUniforms(),S=f.uniforms;if(K.useProgram(q.program)&&(_=!0,y=!0,b=!0),i.id!==T&&(T=i.id,y=!0),_||A!==t){if(M.setValue(bt,"projectionMatrix",t.projectionMatrix),J.logarithmicDepthBuffer&&M.setValue(bt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),A!==t&&(A=t,y=!0,b=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=M.map.cameraPosition;void 0!==e&&e.setValue(bt,j.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&M.setValue(bt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&M.setValue(bt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){M.setOptional(bt,r,"bindMatrix"),M.setOptional(bt,r,"bindMatrixInverse");const t=r.skeleton;t&&(J.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),M.setValue(bt,"boneTexture",t.boneTexture,tt),M.setValue(bt,"boneTextureSize",t.boneTextureSize)):M.setOptional(bt,t,"boneMatrices"))}var R,L;return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||xt.update(r,n,i,q),(y||f.receiveShadow!==r.receiveShadow)&&(f.receiveShadow=r.receiveShadow,M.setValue(bt,"receiveShadow",r.receiveShadow)),y&&(M.setValue(bt,"toneMappingExposure",w.toneMappingExposure),f.needsLights&&(L=b,(R=S).ambientLightColor.needsUpdate=L,R.lightProbe.needsUpdate=L,R.directionalLights.needsUpdate=L,R.directionalLightShadows.needsUpdate=L,R.pointLights.needsUpdate=L,R.pointLightShadows.needsUpdate=L,R.spotLights.needsUpdate=L,R.spotLightShadows.needsUpdate=L,R.rectAreaLights.needsUpdate=L,R.hemisphereLights.needsUpdate=L),s&&i.fog&&lt.refreshFogUniforms(S,s),lt.refreshMaterialUniforms(S,i,N,D,G),Er.upload(bt,f.uniformsList,S,tt)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Er.upload(bt,f.uniformsList,S,tt),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&M.setValue(bt,"center",r.center),M.setValue(bt,"modelViewMatrix",r.modelViewMatrix),M.setValue(bt,"normalMatrix",r.normalMatrix),M.setValue(bt,"modelMatrix",r.matrixWorld),q}(t,e,n,i,r);K.setMaterial(i,o);let l=n.index;const h=n.attributes.position;if(null===l){if(void 0===h||0===h.count)return}else if(0===l.count)return;let c,u=1;!0===i.wireframe&&(l=st.getWireframeAttribute(n),u=2),wt.setup(r,i,a,n,l);let d=qt;null!==l&&(c=rt.get(l),d=_t,d.setIndex(c));const m=null!==l?l.count:h.count,p=n.drawRange.start*u,f=n.drawRange.count*u,g=null!==s?s.start*u:0,x=null!==s?s.count*u:1/0,q=Math.max(p,g),_=Math.min(m,p+f,g+x)-1,y=Math.max(0,_-q+1);if(0!==y){if(r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*Y()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),K.setLineWidth(t*Y()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(q,y,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(q,y,t)}else d.render(q,y)}},this.compile=function(t,e){v=ct.get(t),v.init(),y.push(v),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(v.pushLight(t),t.castShadow&&v.pushShadow(t))})),v.setupLights(w.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++)Bt(n[i],t,e);else Bt(n,t,e)})),y.pop(),v=null};let Lt=null;function Ct(){It.stop()}function Pt(){It.start()}const It=new In;function Dt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)v.pushLight(t),t.castShadow&&v.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||H.intersectsSprite(t)){i&&j.setFromMatrixPosition(t.matrixWorld).applyMatrix4(W);const e=ot.update(t),r=t.material;r.visible&&f.push(t,e,r,n,j.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Q.render.frame&&(t.skeleton.update(),t.skeleton.frame=Q.render.frame),!t.frustumCulled||H.intersectsObject(t))){i&&j.setFromMatrixPosition(t.matrixWorld).applyMatrix4(W);const e=ot.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=r[o.materialIndex];a&&a.visible&&f.push(t,e,a,n,j.z,o)}}else r.visible&&f.push(t,e,r,n,j.z,null)}const r=t.children;for(let t=0,s=r.length;t<s;t++)Dt(r[t],e,n,i)}function Nt(t,e,n,i){const r=t.opaque,s=t.transmissive,h=t.transparent;v.setupLightsView(n),s.length>0&&function(t,e,n){if(null===G){const t=!0===a&&!0===J.isWebGL2;G=new(t?gt:ft)(1024,1024,{generateMipmaps:!0,type:null!==yt.convert(x)?x:m,minFilter:d,magFilter:l,wrapS:o,wrapT:o,useRenderToTexture:Z.has("WEBGL_multisampled_render_to_texture")})}const i=w.getRenderTarget();w.setRenderTarget(G),w.clear();const r=w.toneMapping;w.toneMapping=0,zt(t,e,n),w.toneMapping=r,tt.updateMultisampleRenderTarget(G),tt.updateRenderTargetMipmap(G),w.setRenderTarget(i)}(r,e,n),i&&K.viewport(R.copy(i)),r.length>0&&zt(r,e,n),s.length>0&&zt(s,e,n),h.length>0&&zt(h,e,n)}function zt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,l=null===i?s.material:i,h=s.group;o.layers.test(n.layers)&&Ot(o,e,n,a,l,h)}}function Ot(t,e,n,i,r,s){t.onBeforeRender(w,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(w,e,n,i,t,s),!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,s),r.side=0,r.needsUpdate=!0,w.renderBufferDirect(n,e,i,r,t,s),r.side=2):w.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(w,e,n,i,r,s)}function Bt(t,e,n){!0!==e.isScene&&(e=X);const i=$.get(t),r=v.state.lights,s=v.state.shadowsArray,o=r.state.version,a=at.getParameters(t,r.state,s,e,n),l=at.getProgramCacheKey(a);let h=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?it:nt).get(t.envMap||i.environment),void 0===h&&(t.addEventListener("dispose",Rt),h=new Map,i.programs=h);let c=h.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return Ft(t,a),c}else a.uniforms=at.getUniforms(t),t.onBuild(n,a,w),t.onBeforeCompile(a,w),c=at.acquireProgram(a,l),h.set(l,c),i.uniforms=a.uniforms;const u=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=ut.uniform),Ft(t,a),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=c.getUniforms(),m=Er.seqWithValue(d.seq,u);return i.currentProgram=c,i.uniformsList=m,c}function Ft(t,e){const n=$.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}It.setAnimationLoop((function(t){Lt&&Lt(t)})),"undefined"!=typeof window&&It.setContext(window),this.setAnimationLoop=function(t){Lt=t,Et.setAnimationLoop(t),null===t?It.stop():It.start()},Et.addEventListener("sessionstart",Ct),Et.addEventListener("sessionend",Pt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===Et.enabled&&!0===Et.isPresenting&&(!0===Et.cameraAutoUpdate&&Et.updateCamera(e),e=Et.getCamera()),!0===t.isScene&&t.onBeforeRender(w,t,e,E),v=ct.get(t,y.length),v.init(),y.push(v),W.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),H.setFromProjectionMatrix(W),V=this.localClippingEnabled,k=ut.init(this.clippingPlanes,V,e),f=ht.get(t,_.length),f.init(),_.push(f),Dt(t,e,0,w.sortObjects),f.finish(),!0===w.sortObjects&&f.sort(z,O),!0===k&&ut.beginShadows();const n=v.state.shadowsArray;if(dt.render(n,t,e),!0===k&&ut.endShadows(),!0===this.info.autoReset&&this.info.reset(),mt.render(f,t),v.setupLights(w.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Nt(f,t,i,i.viewport)}}else Nt(f,t,e);null!==E&&(tt.updateMultisampleRenderTarget(E),tt.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(w,t,e),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1),wt.resetDefaultState(),T=-1,A=null,y.pop(),v=y.length>0?y[y.length-1]:null,_.pop(),f=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){$.get(t.texture).__webglTexture=e,$.get(t.depthTexture).__webglTexture=n;const i=$.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){const n=$.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){E=t,M=e,S=n;let i=!0;if(t){const e=$.get(t);void 0!==e.__useDefaultFramebuffer?(K.bindFramebuffer(36160,null),i=!1):void 0===e.__webglFramebuffer?tt.setupRenderTarget(t):e.__hasExternalTextures&&tt.rebindTextures(t,$.get(t.texture).__webglTexture,$.get(t.depthTexture).__webglTexture)}let r=null,s=!1,o=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const i=$.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],s=!0):r=t.useRenderbuffer?$.get(t).__webglMultisampledFramebuffer:i,R.copy(t.viewport),L.copy(t.scissor),C=t.scissorTest}else R.copy(B).multiplyScalar(N).floor(),L.copy(F).multiplyScalar(N).floor(),C=U;if(K.bindFramebuffer(36160,r)&&J.drawBuffers&&i&&K.drawBuffers(t,r),K.viewport(R),K.scissor(L),K.setScissorTest(C),s){const i=$.get(t.texture);bt.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(o){const i=$.get(t.texture),r=e||0;bt.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}T=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=$.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){K.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==q&&yt.convert(a)!==bt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===x&&(Z.has("EXT_color_buffer_half_float")||J.isWebGL2&&Z.has("EXT_color_buffer_float"));if(!(l===m||yt.convert(l)===bt.getParameter(35738)||l===g&&(J.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===bt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&bt.readPixels(e,n,i,r,yt.convert(a),yt.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==E?$.get(E).__webglFramebuffer:null;K.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);tt.setTexture2D(e,0),bt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,r,s),K.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,s=e.image.height,o=yt.convert(n.format),a=yt.convert(n.type);tt.setTexture2D(n,0),bt.pixelStorei(37440,n.flipY),bt.pixelStorei(37441,n.premultiplyAlpha),bt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?bt.texSubImage2D(3553,i,t.x,t.y,r,s,o,a,e.image.data):e.isCompressedTexture?bt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):bt.texSubImage2D(3553,i,t.x,t.y,o,a,e.image),0===i&&n.generateMipmaps&&bt.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=yt.convert(i.format),h=yt.convert(i.type);let c;if(i.isDataTexture3D)tt.setTexture3D(i,0),c=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");tt.setTexture2DArray(i,0),c=35866}bt.pixelStorei(37440,i.flipY),bt.pixelStorei(37441,i.premultiplyAlpha),bt.pixelStorei(3317,i.unpackAlignment);const u=bt.getParameter(3314),d=bt.getParameter(32878),m=bt.getParameter(3316),p=bt.getParameter(3315),f=bt.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;bt.pixelStorei(3314,g.width),bt.pixelStorei(32878,g.height),bt.pixelStorei(3316,t.min.x),bt.pixelStorei(3315,t.min.y),bt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?bt.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),bt.compressedTexSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,g.data)):bt.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,g),bt.pixelStorei(3314,u),bt.pixelStorei(32878,d),bt.pixelStorei(3316,m),bt.pixelStorei(3315,p),bt.pixelStorei(32877,f),0===r&&i.generateMipmaps&&bt.generateMipmap(c),K.unbindTexture()},this.initTexture=function(t){tt.setTexture2D(t,0),K.unbindTexture()},this.resetState=function(){M=0,S=0,E=null,K.reset(),wt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}qs.prototype.isWebGLRenderer=!0,class extends qs{}.prototype.isWebGL1Renderer=!0;class _s{constructor(t,e=25e-5){this.name="",this.color=new lt(t),this.density=e}clone(){return new _s(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}_s.prototype.isFogExp2=!0;class ys{constructor(t,e=1,n=1e3){this.name="",this.color=new lt(t),this.near=e,this.far=n}clone(){return new ys(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}ys.prototype.isFog=!0;class ws extends _e{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}ws.prototype.isScene=!0;class bs{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=N,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=G()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=G()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=G()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}bs.prototype.isInterleavedBuffer=!0;const Ms=new vt;class Ss{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ms.x=this.getX(e),Ms.y=this.getY(e),Ms.z=this.getZ(e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ms.x=this.getX(e),Ms.y=this.getY(e),Ms.z=this.getZ(e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ms.x=this.getX(e),Ms.y=this.getY(e),Ms.z=this.getZ(e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Oe(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ss(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ss.prototype.isInterleavedBufferAttribute=!0;class Es extends Ie{constructor(t){super(),this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Ts;Es.prototype.isSpriteMaterial=!0;const As=new vt,Rs=new vt,Ls=new vt,Cs=new Q,Ps=new Q,Is=new Zt,Ds=new vt,Ns=new vt,zs=new vt,Os=new Q,Bs=new Q,Fs=new Q;function Us(t,e,n,i,r,s){Cs.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Ps.x=s*Cs.x-r*Cs.y,Ps.y=r*Cs.x+s*Cs.y):Ps.copy(Cs),t.copy(e),t.x+=Ps.x,t.y+=Ps.y,t.applyMatrix4(Is)}(class extends _e{constructor(t){if(super(),this.type="Sprite",void 0===Ts){Ts=new Ye;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new bs(t,5);Ts.setIndex([0,1,2,0,2,3]),Ts.setAttribute("position",new Ss(e,3,0,!1)),Ts.setAttribute("uv",new Ss(e,2,3,!1))}this.geometry=Ts,this.material=void 0!==t?t:new Es,this.center=new Q(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Rs.setFromMatrixScale(this.matrixWorld),Is.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ls.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Rs.multiplyScalar(-Ls.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Us(Ds.set(-.5,-.5,0),Ls,s,Rs,i,r),Us(Ns.set(.5,-.5,0),Ls,s,Rs,i,r),Us(zs.set(.5,.5,0),Ls,s,Rs,i,r),Os.set(0,0),Bs.set(1,0),Fs.set(1,1);let o=t.ray.intersectTriangle(Ds,Ns,zs,!1,As);if(null===o&&(Us(Ns.set(-.5,.5,0),Ls,s,Rs,i,r),Bs.set(0,1),o=t.ray.intersectTriangle(Ds,zs,Ns,!1,As),null===o))return;const a=t.ray.origin.distanceTo(As);a<t.near||a>t.far||e.push({distance:a,point:As.clone(),uv:Ce.getUV(As,Ds,Ns,zs,Os,Bs,Fs,new Q),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const Hs=new vt,ks=new pt,Vs=new pt,Gs=new vt,Ws=new Zt;class js extends mn{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Zt,this.bindMatrixInverse=new Zt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new pt,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;ks.fromBufferAttribute(i.attributes.skinIndex,t),Vs.fromBufferAttribute(i.attributes.skinWeight,t),Hs.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=Vs.getComponent(t);if(0!==i){const r=ks.getComponent(t);Ws.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(Gs.copy(Hs).applyMatrix4(Ws),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}js.prototype.isSkinnedMesh=!0;class Xs extends _e{constructor(){super(),this.type="Bone"}}Xs.prototype.isBone=!0;class Ys extends dt{constructor(t=null,e=1,n=1,i,r,s,o,a,l=1003,h=1003,c,u){super(null,s,o,a,l,h,i,r,c,u),this.image={data:t,width:e,height:n},this.magFilter=l,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ys.prototype.isDataTexture=!0;const Zs=new Zt,Js=new Zt;class Ks{constructor(t=[],e=[]){this.uuid=G(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Zt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Zt;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:Js;Zs.multiplyMatrices(r,e[i]),Zs.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Ks(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=Z(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ys(e,t,t,q,g);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Xs),this.bones.push(r),this.boneInverses.push((new Zt).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class Qs extends Oe{constructor(t,e,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Qs.prototype.isInstancedBufferAttribute=!0;const $s=new Zt,to=new Zt,eo=[],no=new mn;(class extends mn{constructor(t,e,n){super(t,e),this.instanceMatrix=new Qs(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(no.geometry=this.geometry,no.material=this.material,void 0!==no.material)for(let r=0;r<i;r++){this.getMatrixAt(r,$s),to.multiplyMatrices(n,$s),no.matrixWorld=to,no.raycast(t,eo);for(let t=0,n=eo.length;t<n;t++){const n=eo[t];n.instanceId=r,n.object=this,e.push(n)}eo.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Qs(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class io extends Ie{constructor(t){super(),this.type="LineBasicMaterial",this.color=new lt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}io.prototype.isLineBasicMaterial=!0;const ro=new vt,so=new vt,oo=new Zt,ao=new Yt,lo=new Ut;class ho extends _e{constructor(t=new Ye,e=new io){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)ro.fromBufferAttribute(e,t-1),so.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=ro.distanceTo(so);t.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lo.copy(n.boundingSphere),lo.applyMatrix4(i),lo.radius+=r,!1===t.ray.intersectsSphere(lo))return;oo.copy(i).invert(),ao.copy(t.ray).applyMatrix4(oo);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new vt,h=new vt,c=new vt,u=new vt,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i)for(let n=Math.max(0,s.start),o=Math.min(i.count,s.start+s.count)-1;n<o;n+=d){const s=i.getX(n),o=i.getX(n+1);if(l.fromBufferAttribute(r,s),h.fromBufferAttribute(r,o),ao.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(u);d<t.near||d>t.far||e.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,s.start),i=Math.min(r.count,s.start+s.count)-1;n<i;n+=d){if(l.fromBufferAttribute(r,n),h.fromBufferAttribute(r,n+1),ao.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ho.prototype.isLine=!0;const co=new vt,uo=new vt;class mo extends ho{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)co.fromBufferAttribute(e,t),uo.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+co.distanceTo(uo);t.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}mo.prototype.isLineSegments=!0;class po extends ho{constructor(t,e){super(t,e),this.type="LineLoop"}}po.prototype.isLineLoop=!0;class fo extends Ie{constructor(t){super(),this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}fo.prototype.isPointsMaterial=!0;const go=new Zt,xo=new Yt,vo=new Ut,qo=new vt;class _o extends _e{constructor(t=new Ye,e=new fo){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vo.copy(n.boundingSphere),vo.applyMatrix4(i),vo.radius+=r,!1===t.ray.intersectsSphere(vo))return;go.copy(i).invert(),xo.copy(t.ray).applyMatrix4(go);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r)for(let n=Math.max(0,s.start),l=Math.min(r.count,s.start+s.count);n<l;n++){const s=r.getX(n);qo.fromBufferAttribute(o,s),yo(qo,s,a,i,t,e,this)}else for(let n=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);n<r;n++)qo.fromBufferAttribute(o,n),yo(qo,n,a,i,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function yo(t,e,n,i,r,s,o){const a=xo.distanceSqToPoint(t);if(a<n){const n=new vt;xo.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:o})}}_o.prototype.isPoints=!0,class extends dt{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.minFilter=void 0!==s?s:u,this.magFilter=void 0!==r?r:u,this.generateMipmaps=!1;const h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class extends dt{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=l,this.minFilter=l,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class extends dt{constructor(t,e,n,i,r,s,o,a,l,h,c,u){super(null,s,o,a,l,h,i,r,c,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends dt{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new vt,new vt,new vt,new Ce;class wo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let o,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),o=n[i]-s,o<0)a=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const h=n[i];return(i+(s-h)/(n[i+1]-h))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=e||(s.isVector2?new Q:new vt);return a.copy(o).sub(s).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new vt,i=[],r=[],s=[],o=new vt,a=new Zt;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new vt)}r[0]=new vt,s[0]=new vt;let l=Number.MAX_VALUE;const h=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);h<=l&&(l=h,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),s[e]=s[e-1].clone(),o.crossVectors(i[e-1],i[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(W(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(a.makeRotationAxis(o,t))}s[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(W(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class bo extends wo{constructor(t=0,e=0,n=1,i=1,r=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const n=e||new Q,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}bo.prototype.isEllipseCurve=!0;class Mo extends bo{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.type="ArcCurve"}}function So(){let t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){let l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,h=(n-e)/o-(i-e)/(o+a)+(i-n)/a;l*=o,h*=o,r(e,n,l,h)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}Mo.prototype.isArcCurve=!0;const Eo=new vt,To=new So,Ao=new So,Ro=new So;class Lo extends wo{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new vt){const n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t;let o,a,l=Math.floor(s),h=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===h&&l===r-1&&(l=r-2,h=1),this.closed||l>0?o=i[(l-1)%r]:(Eo.subVectors(i[0],i[1]).add(i[0]),o=Eo);const c=i[l%r],u=i[(l+1)%r];if(this.closed||l+2<r?a=i[(l+2)%r]:(Eo.subVectors(i[r-1],i[r-2]).add(i[r-1]),a=Eo),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),To.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,e,n,i),Ao.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,e,n,i),Ro.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,e,n,i)}else"catmullrom"===this.curveType&&(To.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),Ao.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),Ro.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return n.set(To.calc(h),Ao.calc(h),Ro.calc(h)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new vt).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Co(t,e,n,i,r){const s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function Po(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Io(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}Lo.prototype.isCatmullRomCurve3=!0;class Do extends wo{constructor(t=new Q,e=new Q,n=new Q,i=new Q){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Q){const n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Io(t,i.x,r.x,s.x,o.x),Io(t,i.y,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Do.prototype.isCubicBezierCurve=!0;class No extends wo{constructor(t=new vt,e=new vt,n=new vt,i=new vt){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new vt){const n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Io(t,i.x,r.x,s.x,o.x),Io(t,i.y,r.y,s.y,o.y),Io(t,i.z,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}No.prototype.isCubicBezierCurve3=!0;class zo extends wo{constructor(t=new Q,e=new Q){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Q){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Q;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}zo.prototype.isLineCurve=!0;class Oo extends wo{constructor(t=new Q,e=new Q,n=new Q){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Q){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Po(t,i.x,r.x,s.x),Po(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Oo.prototype.isQuadraticBezierCurve=!0;class Bo extends wo{constructor(t=new vt,e=new vt,n=new vt){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new vt){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Po(t,i.x,r.x,s.x),Po(t,i.y,r.y,s.y),Po(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Bo.prototype.isQuadraticBezierCurve3=!0;class Fo extends wo{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Q){const n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],h=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return n.set(Co(o,a.x,l.x,h.x,c.x),Co(o,a.y,l.y,h.y,c.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Q).fromArray(n))}return this}}Fo.prototype.isSplineCurve=!0;var Uo=Object.freeze({__proto__:null,ArcCurve:Mo,CatmullRomCurve3:Lo,CubicBezierCurve:Do,CubicBezierCurve3:No,EllipseCurve:bo,LineCurve:zo,LineCurve3:class extends wo{constructor(t=new vt,e=new vt){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new vt){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Oo,QuadraticBezierCurve3:Bo,SplineCurve:Fo});class Ho extends wo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new zo(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const i=a[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Uo[n.type]).fromJSON(n))}return this}}class ko extends Ho{constructor(t){super(),this.type="Path",this.currentPoint=new Q,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new zo(this.currentPoint.clone(),new Q(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new Oo(this.currentPoint.clone(),new Q(t,e),new Q(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const o=new Do(this.currentPoint.clone(),new Q(t,e),new Q(n,i),new Q(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Fo(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){const l=new bo(t,e,n,i,r,s,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Vo extends ko{constructor(t){super(t),this.uuid=G(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new ko).fromJSON(n))}return this}}function Go(t,e,n,i,r){let s,o;if(r===function(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=ua(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=ua(s,t[s],t[s+1],o);return o&&sa(o,o.next)&&(da(o),o=o.next),o}function Wo(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!sa(i,i.next)&&0!==ra(i.prev,i,i.next))i=i.next;else{if(da(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function jo(t,e,n,i,r,s,o){if(!t)return;!o&&s&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=ta(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,o,a,l,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ,i);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1)}(r)}(t,i,r,s);let a,l,h=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Yo(t,i,r,s):Xo(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),da(t),t=l.next,h=l.next;else if((t=l)===h){o?1===o?jo(t=Zo(Wo(t),e,n),e,n,i,r,s,2):2===o&&Jo(t,e,n,i,r,s):jo(Wo(t),e,n,i,r,s,1);break}}function Xo(t){const e=t.prev,n=t,i=t.next;if(ra(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(na(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ra(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Yo(t,e,n,i){const r=t.prev,s=t,o=t.next;if(ra(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,h=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,c=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=ta(a,l,e,n,i),d=ta(h,c,e,n,i);let m=t.prevZ,p=t.nextZ;for(;m&&m.z>=u&&p&&p.z<=d;){if(m!==t.prev&&m!==t.next&&na(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ra(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,p!==t.prev&&p!==t.next&&na(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&ra(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;m&&m.z>=u;){if(m!==t.prev&&m!==t.next&&na(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&ra(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&na(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&ra(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Zo(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!sa(r,s)&&oa(r,i,i.next,s)&&ha(r,s)&&ha(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),da(i),da(i.next),i=t=s),i=i.next}while(i!==t);return Wo(i)}function Jo(t,e,n,i,r,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&ia(o,t)){let a=ca(o,t);return o=Wo(o,o.next),a=Wo(a,a.next),jo(o,e,n,i,r,s),void jo(a,e,n,i,r,s)}t=t.next}o=o.next}while(o!==t)}function Ko(t,e){return t.x-e.x}function Qo(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let s,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o){if(o=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===o)return s;const a=s,l=s.x,h=s.y;let c,u=1/0;n=s;do{i>=n.x&&n.x>=l&&i!==n.x&&na(r<h?i:o,r,l,h,r<h?o:i,r,n.x,n.y)&&(c=Math.abs(r-n.y)/(i-n.x),ha(n,t)&&(c<u||c===u&&(n.x>s.x||n.x===s.x&&$o(s,n)))&&(s=n,u=c)),n=n.next}while(n!==a);return s}(t,e),e){const n=ca(e,t);Wo(e,e.next),Wo(n,n.next)}}function $o(t,e){return ra(t.prev,t,e.prev)<0&&ra(e.next,t,t.next)<0}function ta(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ea(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function na(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function ia(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&oa(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ha(t,e)&&ha(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(ra(t.prev,t,e.prev)||ra(t,e.prev,e))||sa(t,e)&&ra(t.prev,t,t.next)>0&&ra(e.prev,e,e.next)>0)}function ra(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function sa(t,e){return t.x===e.x&&t.y===e.y}function oa(t,e,n,i){const r=la(ra(t,e,n)),s=la(ra(t,e,i)),o=la(ra(n,i,t)),a=la(ra(n,i,e));return r!==s&&o!==a||!(0!==r||!aa(t,n,e))||!(0!==s||!aa(t,i,e))||!(0!==o||!aa(n,t,i))||!(0!==a||!aa(n,e,i))}function aa(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function la(t){return t>0?1:t<0?-1:0}function ha(t,e){return ra(t.prev,t,t.next)<0?ra(t,e,t.next)>=0&&ra(t,t.prev,e)>=0:ra(t,e,t.prev)<0||ra(t,t.next,e)<0}function ca(t,e){const n=new ma(t.i,t.x,t.y),i=new ma(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function ua(t,e,n,i){const r=new ma(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function da(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ma(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class pa{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return pa.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];fa(t),ga(n,t);let s=t.length;e.forEach(fa);for(let t=0;t<e.length;t++)i.push(s),s+=e[t].length,ga(n,e[t]);const o=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=Go(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,h,c,u,d,m;if(i&&(s=function(t,e,n,i){const r=[];let s,o,a,l,h;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,h=Go(t,a,l,i,!1),h===h.next&&(h.steiner=!0),r.push(ea(h));for(r.sort(Ko),s=0;s<r.length;s++)Qo(r[s],n),n=Wo(n,n.next);return n}(t,e,s,n)),t.length>80*n){a=h=t[0],l=c=t[1];for(let e=n;e<r;e+=n)u=t[e],d=t[e+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);m=Math.max(h-a,c-l),m=0!==m?1/m:0}return jo(s,o,n,a,l,m),o}(n,i);for(let t=0;t<o.length;t+=3)r.push(o.slice(t,t+3));return r}}function fa(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ga(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class xa extends Ye{constructor(t=new Vo([new Q(.5,.5),new Q(-.5,.5),new Q(-.5,-.5),new Q(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let e=0,n=t.length;e<n;e++)s(t[e]);function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:c-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,m=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:va;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,x,v,q,_,y=!1;p&&(g=p.getSpacedPoints(a),y=!0,h=!1,x=p.computeFrenetFrames(a,!1),v=new vt,q=new vt,_=new vt),h||(m=0,c=0,u=0,d=0);const w=t.extractPoints(o);let b=w.shape;const M=w.holes;if(!pa.isClockWise(b)){b=b.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];pa.isClockWise(e)&&(M[t]=e.reverse())}}const S=pa.triangulateShape(b,M),E=b;for(let t=0,e=M.length;t<e;t++){const e=M[t];b=b.concat(e)}function T(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const A=b.length,R=S.length;function L(t,e,n){let i,r,s;const o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,h=n.y-t.y,c=o*o+a*a,u=o*h-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),d=Math.sqrt(l*l+h*h),m=e.x-a/u,p=e.y+o/u,f=((n.x-h/d-m)*h-(n.y+l/d-p)*l)/(o*h-a*l);i=m+o*f-t.x,r=p+a*f-t.y;const g=i*i+r*r;if(g<=2)return new Q(i,r);s=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(h)&&(t=!0),t?(i=-a,r=o,s=Math.sqrt(c)):(i=o,r=a,s=Math.sqrt(c/2))}return new Q(i/s,r/s)}const C=[];for(let t=0,e=E.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),C[t]=L(E[t],E[n],E[i]);const P=[];let I,D=C.concat();for(let t=0,e=M.length;t<e;t++){const e=M[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=L(e[t],e[i],e[r]);P.push(I),D=D.concat(I)}for(let t=0;t<m;t++){const e=t/m,n=c*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],C[t],i);O(e.x,e.y,-n)}for(let t=0,e=M.length;t<e;t++){const e=M[t];I=P[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],I[t],i);O(r.x,r.y,-n)}}}const N=u+d;for(let t=0;t<A;t++){const e=h?T(b[t],D[t],N):b[t];y?(q.copy(x.normals[0]).multiplyScalar(e.x),v.copy(x.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(q).add(v),O(_.x,_.y,_.z)):O(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<A;e++){const n=h?T(b[e],D[e],N):b[e];y?(q.copy(x.normals[t]).multiplyScalar(n.x),v.copy(x.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(q).add(v),O(_.x,_.y,_.z)):O(n.x,n.y,l/a*t)}for(let t=m-1;t>=0;t--){const e=t/m,n=c*Math.cos(e*Math.PI/2),i=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],C[t],i);O(e.x,e.y,l+n)}for(let t=0,e=M.length;t<e;t++){const e=M[t];I=P[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],I[t],i);y?O(r.x,r.y+g[a-1].y,g[a-1].x+n):O(r.x,r.y,l+n)}}}function z(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=a+2*m;t<n;t++){const n=A*t,s=A*(t+1);F(e+i+n,e+r+n,e+r+s,e+i+s)}}}function O(t,e,n){s.push(t),s.push(e),s.push(n)}function B(t,e,r){U(t),U(e),U(r);const s=i.length/3,o=f.generateTopUV(n,i,s-3,s-2,s-1);H(o[0]),H(o[1]),H(o[2])}function F(t,e,r,s){U(t),U(e),U(s),U(e),U(r),U(s);const o=i.length/3,a=f.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);H(a[0]),H(a[1]),H(a[3]),H(a[1]),H(a[2]),H(a[3])}function U(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function H(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(h){let t=0,e=A*t;for(let t=0;t<R;t++){const n=S[t];B(n[2]+e,n[1]+e,n[0]+e)}t=a+2*m,e=A*t;for(let t=0;t<R;t++){const n=S[t];B(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<R;t++){const e=S[t];B(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=S[t];B(e[0]+A*a,e[1]+A*a,e[2]+A*a)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;z(E,e),e+=E.length;for(let t=0,n=M.length;t<n;t++){const n=M[t];z(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new Ue(i,3)),this.setAttribute("uv",new Ue(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new Uo[i.type]).fromJSON(i)),new xa(n,t.options)}}const va={generateTopUV:function(t,e,n,i,r){const s=e[3*n],o=e[3*n+1],a=e[3*i],l=e[3*i+1],h=e[3*r],c=e[3*r+1];return[new Q(s,o),new Q(a,l),new Q(h,c)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[3*n],a=e[3*n+1],l=e[3*n+2],h=e[3*i],c=e[3*i+1],u=e[3*i+2],d=e[3*r],m=e[3*r+1],p=e[3*r+2],f=e[3*s],g=e[3*s+1],x=e[3*s+2];return Math.abs(a-c)<Math.abs(o-h)?[new Q(o,1-l),new Q(h,1-u),new Q(d,1-p),new Q(f,1-x)]:[new Q(a,1-l),new Q(c,1-u),new Q(m,1-p),new Q(g,1-x)]}};class qa extends Ye{constructor(t=new Vo([new Q(0,.5),new Q(-.5,-.5),new Q(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(o,a,e),o+=a,a=0;function l(t){const o=i.length/3,l=t.extractPoints(e);let h=l.shape;const c=l.holes;!1===pa.isClockWise(h)&&(h=h.reverse());for(let t=0,e=c.length;t<e;t++){const e=c[t];!0===pa.isClockWise(e)&&(c[t]=e.reverse())}const u=pa.triangulateShape(h,c);for(let t=0,e=c.length;t<e;t++){const e=c[t];h=h.concat(e)}for(let t=0,e=h.length;t<e;t++){const e=h[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],i=e[0]+o,r=e[1]+o,s=e[2]+o;n.push(i,r,s),a+=3}}this.setIndex(n),this.setAttribute("position",new Ue(i,3)),this.setAttribute("normal",new Ue(r,3)),this.setAttribute("uv",new Ue(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new qa(n,t.curveSegments)}}class _a extends Ye{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const h=[],c=new vt,u=new vt,d=[],m=[],p=[],f=[];for(let d=0;d<=n;d++){const g=[],x=d/n;let v=0;0==d&&0==s?v=.5/e:d==n&&a==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;c.x=-t*Math.cos(i+a*r)*Math.sin(s+x*o),c.y=t*Math.cos(s+x*o),c.z=t*Math.sin(i+a*r)*Math.sin(s+x*o),m.push(c.x,c.y,c.z),u.copy(c).normalize(),p.push(u.x,u.y,u.z),f.push(a+v,1-x),g.push(l++)}h.push(g)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=h[t][i+1],r=h[t][i],o=h[t+1][i],l=h[t+1][i+1];(0!==t||s>0)&&d.push(e,r,l),(t!==n-1||a<Math.PI)&&d.push(r,o,l)}this.setIndex(d),this.setAttribute("position",new Ue(m,3)),this.setAttribute("normal",new Ue(p,3)),this.setAttribute("uv",new Ue(f,2))}static fromJSON(t){return new _a(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}(class extends Ie{constructor(t){super(),this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}).prototype.isShadowMaterial=!0;class ya extends Ie{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}ya.prototype.isMeshStandardMaterial=!0;class wa extends ya{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Q(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return W(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}wa.prototype.isMeshPhysicalMaterial=!0;class ba extends Ie{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}ba.prototype.isMeshPhongMaterial=!0;(class extends Ie{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends Ie{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}).prototype.isMeshNormalMaterial=!0;class Ma extends Ie{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Ma.prototype.isMeshLambertMaterial=!0;(class extends Ie{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends io{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Sa={arraySlice:function(t,e,n){return Sa.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[o++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)},subclip:function(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let t=0;t<s.tracks.length;++t){const e=s.tracks[t],a=e.getValueSize(),l=[],h=[];for(let t=0;t<e.times.length;++t){const s=e.times[t]*r;if(!(s<n||s>=i)){l.push(e.times[t]);for(let n=0;n<a;++n)h.push(e.values[t*a+n])}}0!==l.length&&(e.times=Sa.convertArray(l,e.times.constructor),e.values=Sa.convertArray(h,e.values.constructor),o.push(e))}s.tracks=o;let a=1/0;for(let t=0;t<s.tracks.length;++t)a>s.tracks[t].times[0]&&(a=s.tracks[t].times[0]);for(let t=0;t<s.tracks.length;++t)s.tracks[t].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===o)continue;let a=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let h=0;const c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=c/3);const u=i.times.length-1;let d;if(s<=i.times[0]){const t=a,e=l-a;d=Sa.arraySlice(i.values,t,e)}else if(s>=i.times[u]){const t=u*l+a,e=t+l-a;d=Sa.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=a,n=l-a;t.evaluate(s),d=Sa.arraySlice(t.resultBuffer,e,n)}"quaternion"===r&&(new xt).fromArray(d).normalize().conjugate().toArray(d);const m=o.times.length;for(let t=0;t<m;++t){const e=t*c+h;if("quaternion"===r)xt.multiplyQuaternionsFlat(o.values,e,d,0,o.values,e);else{const t=c-2*h;for(let n=0;n<t;++n)o.values[e+n]-=d[n]}}}return t.blendMode=2501,t}};class Ea{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const o=e[1];t<o&&(n=2,r=o);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ea.prototype.beforeStart_=Ea.prototype.copySampleValue_,Ea.prototype.afterEnd_=Ea.prototype.copySampleValue_;class Ta extends Ea{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:R,endingEnd:R}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case L:r=t,o=2*e-n;break;case C:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case L:s=t,a=2*n-e;break;case C:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}const l=.5*(n-e),h=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,m=(n-e)/(i-e),p=m*m,f=p*m,g=-u*f+2*u*p-u*m,x=(1+u)*f+(-1.5-2*u)*p+(-.5+u)*m+1,v=(-1-d)*f+(1.5+d)*p+.5*m,q=d*f-d*p;for(let t=0;t!==o;++t)r[t]=g*s[h+t]+x*s[l+t]+v*s[a+t]+q*s[c+t];return r}}class Aa extends Ea{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=(n-e)/(i-e),c=1-h;for(let t=0;t!==o;++t)r[t]=s[l+t]*c+s[a+t]*h;return r}}class Ra extends Ea{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class La{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Sa.convertArray(e,this.TimeBufferType),this.values=Sa.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Sa.convertArray(t.times,Array),values:Sa.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Ra(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Aa(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Ta(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case E:e=this.InterpolantFactoryMethodDiscrete;break;case T:e=this.InterpolantFactoryMethodLinear;break;case A:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return E;case this.InterpolantFactoryMethodLinear:return T;case this.InterpolantFactoryMethodSmooth:return A}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=Sa.arraySlice(n,r,s),this.values=Sa.arraySlice(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,s),t=!1;break}s=i}if(void 0!==i&&Sa.isTypedArray(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Sa.arraySlice(this.times),e=Sa.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===A,r=t.length-1;let s=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(i)r=!0;else{const t=o*n,i=t-n,s=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[i+o]||n!==e[s+o]){r=!0;break}}}if(r){if(o!==s){t[s]=t[o];const i=o*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,o=0;o!==n;++o)e[i+o]=e[t+o];++s}return s!==t.length?(this.times=Sa.arraySlice(t,0,s),this.values=Sa.arraySlice(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=Sa.arraySlice(this.times,0),e=Sa.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}La.prototype.TimeBufferType=Float32Array,La.prototype.ValueBufferType=Float32Array,La.prototype.DefaultInterpolation=T;class Ca extends La{}Ca.prototype.ValueTypeName="bool",Ca.prototype.ValueBufferType=Array,Ca.prototype.DefaultInterpolation=E,Ca.prototype.InterpolantFactoryMethodLinear=void 0,Ca.prototype.InterpolantFactoryMethodSmooth=void 0;class Pa extends La{}Pa.prototype.ValueTypeName="color";class Ia extends La{}Ia.prototype.ValueTypeName="number";class Da extends Ea{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let t=l+o;l!==t;l+=4)xt.slerpFlat(r,0,s,l-o,s,l,a);return r}}class Na extends La{InterpolantFactoryMethodLinear(t){return new Da(this.times,this.values,this.getValueSize(),t)}}Na.prototype.ValueTypeName="quaternion",Na.prototype.DefaultInterpolation=T,Na.prototype.InterpolantFactoryMethodSmooth=void 0;class za extends La{}za.prototype.ValueTypeName="string",za.prototype.ValueBufferType=Array,za.prototype.DefaultInterpolation=E,za.prototype.InterpolantFactoryMethodLinear=void 0,za.prototype.InterpolantFactoryMethodSmooth=void 0;class Oa extends La{}Oa.prototype.ValueTypeName="vector";class Ba{constructor(t,e=-1,n,i=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=G(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(Fa(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(La.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let t=0;t<r;t++){let o=[],a=[];o.push((t+r-1)%r,t,(t+1)%r),a.push(0,1,0);const l=Sa.getKeyframeOrder(o);o=Sa.sortedArray(o,1,l),a=Sa.sortedArray(a,1,l),i||0!==o[0]||(o.push(r),a.push(a[0])),s.push(new Ia(".morphTargetInfluences["+e[t].name+"]",o,a).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],s=n.name.match(r);if(s&&s.length>1){const t=s[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const s=[];for(const t in i)s.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],o=[];Sa.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],s=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),s.push(i.morphTarget===n?1:0)}i.push(new Ia(".morphTargetInfluence["+n+"]",t,s))}a=t.length*(s||1)}else{const s=".bones["+e[t].name+"]";n(Oa,s+".position",r,"pos",i),n(Na,s+".quaternion",r,"rot",i),n(Oa,s+".scale",r,"scl",i)}}return 0===i.length?null:new this(r,a,i,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Fa(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ia;case"vector":case"vector2":case"vector3":case"vector4":return Oa;case"color":return Pa;case"quaternion":return Na;case"bool":case"boolean":return Ca;case"string":return za}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Sa.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ua={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};const Ha=new class{constructor(t,e,n){const i=this;let r,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===s&&void 0!==i.onStart&&i.onStart(t,o,a),s=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}};class ka{constructor(t){this.manager=void 0!==t?t:Ha,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Va={};class Ga extends ka{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Ua.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==Va[t])return void Va[t].push({onLoad:e,onProgress:n,onError:i});Va[t]=[],Va[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body.getReader)return e;const n=Va[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),s=r?parseInt(r):0,o=0!==s;let a=0;const l=new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{a+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}))}()}});return new Response(l)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)})).then((t=>{switch(a){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,o)));case"json":return t.json();default:if(void 0===o)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(o),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{Ua.add(t,e);const n=Va[t];delete Va[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const n=Va[t];if(void 0===n)throw this.manager.itemError(t),e;delete Va[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Wa extends ka{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Ua.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o=et("img");function a(){h(),Ua.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){h(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function h(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class ja extends ka{constructor(t){super(t)}load(t,e,n,i){const r=new Mn,s=new Wa(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(t[n],(function(t){r.images[n]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)a(e);return r}}class Xa extends ka{constructor(t){super(t)}load(t,e,n,i){const r=new dt,s=new Wa(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class Ya extends _e{constructor(t,e=1){super(),this.type="Light",this.color=new lt(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Ya.prototype.isLight=!0;class Za extends Ya{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(_e.DefaultUp),this.updateMatrix(),this.groundColor=new lt(e)}copy(t){return Ya.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Za.prototype.isHemisphereLight=!0;const Ja=new Zt,Ka=new vt,Qa=new vt;class $a{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Q(512,512),this.map=null,this.mapPass=null,this.matrix=new Zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pn,this._frameExtents=new Q(1,1),this._viewportCount=1,this._viewports=[new pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Ka.setFromMatrixPosition(t.matrixWorld),e.position.copy(Ka),Qa.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Qa),e.updateMatrixWorld(),Ja.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ja),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class tl extends $a{constructor(){super(new yn(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*V*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}tl.prototype.isSpotLightShadow=!0;class el extends Ya{constructor(t,e,n=0,i=Math.PI/3,r=0,s=1){super(t,e),this.type="SpotLight",this.position.copy(_e.DefaultUp),this.updateMatrix(),this.target=new _e,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.shadow=new tl}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}el.prototype.isSpotLight=!0;const nl=new Zt,il=new vt,rl=new vt;class sl extends $a{constructor(){super(new yn(90,1,.5,500)),this._frameExtents=new Q(4,2),this._viewportCount=6,this._viewports=[new pt(2,1,1,1),new pt(0,1,1,1),new pt(3,1,1,1),new pt(1,1,1,1),new pt(3,0,1,1),new pt(1,0,1,1)],this._cubeDirections=[new vt(1,0,0),new vt(-1,0,0),new vt(0,0,1),new vt(0,0,-1),new vt(0,1,0),new vt(0,-1,0)],this._cubeUps=[new vt(0,1,0),new vt(0,1,0),new vt(0,1,0),new vt(0,1,0),new vt(0,0,1),new vt(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),il.setFromMatrixPosition(t.matrixWorld),n.position.copy(il),rl.copy(n.position),rl.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(rl),n.updateMatrixWorld(),i.makeTranslation(-il.x,-il.y,-il.z),nl.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nl)}}sl.prototype.isPointLightShadow=!0;class ol extends Ya{constructor(t,e,n=0,i=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new sl}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}ol.prototype.isPointLight=!0;class al extends $a{constructor(){super(new Wn(-5,5,5,-5,.5,500))}}al.prototype.isDirectionalLightShadow=!0;class ll extends Ya{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(_e.DefaultUp),this.updateMatrix(),this.target=new _e,this.shadow=new al}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}ll.prototype.isDirectionalLight=!0;(class extends Ya{constructor(t,e){super(t,e),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Ya{constructor(t,e,n=10,i=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class hl{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new vt)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}hl.prototype.isSphericalHarmonics3=!0;class cl extends Ya{constructor(t=new hl,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}cl.prototype.isLightProbe=!0;class ul{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}(class extends Ye{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;class dl extends ka{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Ua.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Ua.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let ml;dl.prototype.isImageBitmapLoader=!0;const pl=function(){return void 0===ml&&(ml=new(window.AudioContext||window.webkitAudioContext)),ml};class fl extends ka{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Ga(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{const t=n.slice(0);pl().decodeAudioData(t,(function(t){e(t)}))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}}(class extends cl{constructor(t,e,n=1){super(void 0,n);const i=(new lt).set(t),r=(new lt).set(e),s=new vt(i.r,i.g,i.b),o=new vt(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0,class extends cl{constructor(t,e=1){super(void 0,e);const n=(new lt).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class gl{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=xl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=xl();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function xl(){return("undefined"==typeof performance?Date:performance).now()}const vl=new vt,ql=new xt,_l=new vt,yl=new vt;class wl extends _e{constructor(){super(),this.type="AudioListener",this.context=pl(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gl}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vl,ql,_l),yl.set(0,0,-1).applyQuaternion(ql),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(vl.x,t),e.positionY.linearRampToValueAtTime(vl.y,t),e.positionZ.linearRampToValueAtTime(vl.z,t),e.forwardX.linearRampToValueAtTime(yl.x,t),e.forwardY.linearRampToValueAtTime(yl.y,t),e.forwardZ.linearRampToValueAtTime(yl.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(vl.x,vl.y,vl.z),e.setOrientation(yl.x,yl.y,yl.z,n.x,n.y,n.z)}}class bl extends _e{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class Ml{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]}_slerp(t,e,n,i){xt.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;xt.multiplyQuaternionsFlat(t,s,t,e,t,n),xt.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*s+t[n+o]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const Sl=new RegExp("[\\[\\]\\.:\\/]","g"),El="[^\\[\\]\\.:\\/]",Tl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Al=/((?:WC+[\/:])*)/.source.replace("WC",El),Rl=/(WCOD+)?/.source.replace("WCOD",Tl),Ll=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",El),Cl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",El),Pl=new RegExp("^"+Al+Rl+Ll+Cl+"$"),Il=["material","materials","bones"];class Dl{constructor(t,e,n){this.path=e,this.parsedPath=n||Dl.parseTrackName(e),this.node=Dl.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Dl.Composite(t,e,n):new Dl(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Sl,"")}static parseTrackName(t){const e=Pl.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Il.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Dl.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const s=t[i];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dl.Composite=class{constructor(t,e,n){const i=n||Dl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Dl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Dl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Dl.prototype.GetterByBindingType=[Dl.prototype._getValue_direct,Dl.prototype._getValue_array,Dl.prototype._getValue_arrayElement,Dl.prototype._getValue_toArray],Dl.prototype.SetterByBindingTypeAndVersioning=[[Dl.prototype._setValue_direct,Dl.prototype._setValue_direct_setNeedsUpdate,Dl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dl.prototype._setValue_array,Dl.prototype._setValue_array_setNeedsUpdate,Dl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dl.prototype._setValue_arrayElement,Dl.prototype._setValue_arrayElement_setNeedsUpdate,Dl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dl.prototype._setValue_fromArray,Dl.prototype._setValue_fromArray_setNeedsUpdate,Dl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Nl{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,o=new Array(s),a={endingStart:R,endingEnd:R};for(let t=0;t!==s;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(o);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,o)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=2202===n;if(0===t)return-1===r?i:s&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=L,i.endingEnd=L):(i.endingStart=t?this.zeroSlopeAtStart?L:R:C,i.endingEnd=e?this.zeroSlopeAtEnd?L:R:C)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}(class extends F{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let h=l[a];void 0===h&&(h={},l[a]=h);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let c=h[l];if(void 0!==c)++c.referenceCount,s[t]=c;else{if(c=s[t],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,a,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;c=new Ml(Dl.create(n,l,i),r.ValueTypeName,r.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,a,l),s[t]=c}o[t].resultBuffer=c.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,a[h]=l,a.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Aa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"==typeof t?Ba.findByName(i,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:2500),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const h=new Nl(this,s,e,n);return this._bindAction(h,l),this._addInactiveAction(h,o,r),h}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?Ba.findByName(n,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let o=0;o!==n;++o)e[o]._update(i,t,r,s);const o=this._bindings,a=this._nActiveBindings;for(let t=0;t!==a;++t)o[t].apply(s);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class zl{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new zl(void 0===this.value.clone?this.value:this.value.clone())}}(class extends bs{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;class Ol{constructor(t,e,n=0,i=1/0){this.ray=new Yt(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new oe,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Fl(t,this,n,e),n.sort(Bl),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)Fl(t[i],this,n,e);return n.sort(Bl),n}}function Bl(t,e){return t.distance-e.distance}function Fl(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)Fl(i[t],e,n,!0)}}const Ul=new Q;class Hl{constructor(t=new Q(1/0,1/0),e=new Q(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ul.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ul.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Hl.prototype.isBox2=!0;const kl=new vt,Vl=new Zt,Gl=new Zt;function Wl(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Wl(t.children[n]));return e}class jl{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ko,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){return this.currentPath.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new Vo;r.curves=i.curves,e.push(r)}return e}function i(t,e){const n=e.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=e[r],o=e[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[s],a=-a,o=e[r],l=-l),t.y<n.y||t.y>o.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-a*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(o.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=o.x)return!0}}return i}const r=pa.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);let o,a,l;const h=[];if(1===s.length)return a=s[0],l=new Vo,l.curves=a.curves,h.push(l),h;let c=!r(s[0].getPoints());c=t?!c:c;const u=[],d=[];let m,p,f=[],g=0;d[g]=void 0,f[g]=[];for(let e=0,n=s.length;e<n;e++)a=s[e],m=a.getPoints(),o=r(m),o=t?!o:o,o?(!c&&d[g]&&g++,d[g]={s:new Vo,p:m},d[g].s.curves=a.curves,c&&g++,f[g]=[]):f[g].push({h:a,p:m[0]});if(!d[0])return n(s);if(d.length>1){let t=!1;const e=[];for(let t=0,e=d.length;t<e;t++)u[t]=[];for(let n=0,r=d.length;n<r;n++){const r=f[n];for(let s=0;s<r.length;s++){const o=r[s];let a=!0;for(let r=0;r<d.length;r++)i(o.p,d[r].p)&&(n!==r&&e.push({froms:n,tos:r,hole:s}),a?(a=!1,u[r].push(o)):t=!0);a&&u[n].push(o)}}e.length>0&&(t||(f=u))}for(let t=0,e=d.length;t<e;t++){l=d[t].s,h.push(l),p=f[t];for(let t=0,e=p.length;t<e;t++)l.holes.push(p[t].h)}return h}}const Xl=new Float32Array(1);new Int32Array(Xl.buffer),wo.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(wo.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},ko.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},class extends mo{constructor(t=10,e=10,n=4473924,i=8947848){n=new lt(n),i=new lt(i);const r=e/2,s=t/e,o=t/2,a=[],l=[];for(let t=0,h=0,c=-o;t<=e;t++,c+=s){a.push(-o,0,c,o,0,c),a.push(c,0,-o,c,0,o);const e=t===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const h=new Ye;h.setAttribute("position",new Ue(a,3)),h.setAttribute("color",new Ue(l,3)),super(h,new io({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends mo{constructor(t){const e=Wl(t),n=new Ye,i=[],r=[],s=new lt(0,0,1),o=new lt(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new Ue(i,3)),n.setAttribute("color",new Ue(r,3)),super(n,new io({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Gl.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Vl.multiplyMatrices(Gl,r.matrixWorld),kl.setFromMatrixPosition(Vl),i.setXYZ(n,kl.x,kl.y,kl.z),Vl.multiplyMatrices(Gl,r.parent.matrixWorld),kl.setFromMatrixPosition(Vl),i.setXYZ(n+1,kl.x,kl.y,kl.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ka.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ul.extractUrlBase(t)},ka.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Hl.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Hl.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Hl.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Hl.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},yt.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},yt.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},yt.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},yt.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},yt.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},Ut.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Pn.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},$.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},$.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},$.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},$.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},$.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},$.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Zt.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Zt.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Zt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new vt).setFromMatrixColumn(this,3)},Zt.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Zt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Zt.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Zt.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Zt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Zt.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Zt.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Zt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Zt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Zt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Zt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Zt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Zt.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Zt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Zt.prototype.makeFrustum=function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)},Zt.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Rn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},xt.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},xt.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Yt.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Yt.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Yt.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Ce.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ce.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Ce.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Ce.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Ce.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Ce.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ce.getBarycoord(t,e,n,i,r)},Ce.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ce.getNormal(t,e,n,i)},Vo.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Vo.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xa(this,t)},Vo.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qa(this,t)},Q.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Q.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},vt.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},vt.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},vt.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},vt.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},vt.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},vt.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},vt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},vt.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},vt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},pt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_e.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},_e.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_e.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},_e.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_e.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(_e.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),mn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(mn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),js.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},yn.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ya.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Oe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===z},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(z)}}}),Oe.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?z:N),this},Oe.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Oe.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ye.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Ye.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Oe(arguments[1],arguments[2])))},Ye.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Ye.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ye.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ye.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Ye.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Ye.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),bs.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?z:N),this},bs.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},xa.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},xa.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},xa.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ws.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},zl.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ie.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new lt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(qn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),qs.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},qs.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},qs.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},qs.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},qs.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},qs.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},qs.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},qs.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},qs.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},qs.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},qs.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},qs.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},qs.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},qs.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},qs.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},qs.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},qs.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},qs.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},qs.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},qs.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},qs.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},qs.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},qs.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},qs.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},qs.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(qs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?I:P}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(ls.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ft.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),bl.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new fl).load(t,(function(t){e.setBuffer(t)})),this},bn.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},bn.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},ct.crossOrigin=void 0,ct.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Xa;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},ct.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new ja;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},ct.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ct.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");class Yl{static createButton(t,e){e&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function i(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.background="rgba(0,0,0,0.1)",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?function(){let e=null;async function i(i){i.addEventListener("end",r),await t.xr.setSession(i),n.textContent="EXIT VR",e=i}function r(){e.removeEventListener("end",r),n.textContent="ENTER VR",e=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===e){const t={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",t).then(i)}else e.end()}}():(n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"),e&&Yl.xrSessionIsGranted&&n.click()})),n;{const t=document.createElement("a");return!1===window.isSecureContext?(t.href=document.location.href.replace(/^http:/,"https:"),t.innerHTML="WEBXR NEEDS HTTPS"):(t.href="https://immersiveweb.dev/",t.innerHTML="WEBXR NOT AVAILABLE"),t.style.left="calc(50% - 90px)",t.style.width="180px",t.style.textDecoration="none",i(t),t}}static xrSessionIsGranted=!1;static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",(()=>{Yl.xrSessionIsGranted=!0}))}}Yl.registerSessionGrantedListener();const Zl=new Q,Jl={type:"",data:Zl};class Kl extends ms{constructor(t,e){super();const n=this,i=new Ol,r=new Zt,s=t.domElement;function o(t){t.stopPropagation(),Zl.x=t.clientX/s.clientWidth*2-1,Zl.y=-t.clientY/s.clientHeight*2+1,i.setFromCamera(Zl,e);const r=i.intersectObjects(n.children,!1);if(r.length>0){const e=r[0],n=e.object,i=e.uv;Jl.type=t.type,Jl.data.set(i.x,1-i.y),n.dispatchEvent(Jl)}}s.addEventListener("pointerdown",o),s.addEventListener("pointerup",o),s.addEventListener("pointermove",o),s.addEventListener("mousedown",o),s.addEventListener("mouseup",o),s.addEventListener("mousemove",o),s.addEventListener("click",o);const a={move:"mousemove",select:"click",selectstart:"mousedown",selectend:"mouseup"};function l(t){const e=t.target;r.identity().extractRotation(e.matrixWorld),i.ray.origin.setFromMatrixPosition(e.matrixWorld),i.ray.direction.set(0,0,-1).applyMatrix4(r);const s=i.intersectObjects(n.children,!1);if(s.length>0){const e=s[0],n=e.object,i=e.uv;Jl.type=a[t.type],Jl.data.set(i.x,1-i.y),n.dispatchEvent(Jl)}}const h=t.xr.getController(0);h.addEventListener("move",l),h.addEventListener("select",l),h.addEventListener("selectstart",l),h.addEventListener("selectend",l);const c=t.xr.getController(1);c.addEventListener("move",l),c.addEventListener("select",l),c.addEventListener("selectstart",l),c.addEventListener("selectend",l)}}class Ql extends ka{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new ih(t)})),this.register((function(t){return new hh(t)})),this.register((function(t){return new ch(t)})),this.register((function(t){return new rh(t)})),this.register((function(t){return new sh(t)})),this.register((function(t){return new oh(t)})),this.register((function(t){return new ah(t)})),this.register((function(t){return new lh(t)})),this.register((function(t){return new eh(t)})),this.register((function(t){return new uh(t)}))}load(t,e,n,i){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ul.extractUrlBase(t),this.manager.itemStart(t);const o=function(e){i?i(e):console.error(e),r.manager.itemError(t),r.manager.itemEnd(t)},a=new Ga(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{r.parse(n,s,(function(n){e(n),r.manager.itemEnd(t)}),o)}catch(t){o(t)}}),n,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const s={},o={};if("string"==typeof t)r=t;else if(ul.decodeText(new Uint8Array(t,0,4))===dh){try{s[th.KHR_BINARY_GLTF]=new mh(t)}catch(t){return void(i&&i(t))}r=s[th.KHR_BINARY_GLTF].content}else r=ul.decodeText(new Uint8Array(t));const a=JSON.parse(r);if(void 0===a.asset||a.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Nh(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](l);o[e.name]=e,s[e.name]=!0}if(a.extensionsUsed)for(let t=0;t<a.extensionsUsed.length;++t){const e=a.extensionsUsed[t],n=a.extensionsRequired||[];switch(e){case th.KHR_MATERIALS_UNLIT:s[e]=new nh;break;case th.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[e]=new xh;break;case th.KHR_DRACO_MESH_COMPRESSION:s[e]=new ph(a,this.dracoLoader);break;case th.KHR_TEXTURE_TRANSFORM:s[e]=new fh;break;case th.KHR_MESH_QUANTIZATION:s[e]=new vh;break;default:n.indexOf(e)>=0&&void 0===o[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}}function $l(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const th={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class eh{constructor(t){this.parser=t,this.name=th.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let o;const a=new lt(16777215);void 0!==s.color&&a.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":o=new ll(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new ol(a),o.distance=l;break;case"spot":o=new el(a),o.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(o),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class nh{constructor(){this.name=th.KHR_MATERIALS_UNLIT}getMaterialType(){return De}extendParams(t,e,n){const i=[];t.color=new lt(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)}}class ih{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Q(t,t)}return Promise.all(r)}}class rh{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new lt(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&e.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",s.sheenColorTexture)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class sh{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class oh{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||0;const o=s.attenuationColor||[1,1,1];return e.attenuationColor=new lt(o[0],o[1],o[2]),Promise.all(r)}}class ah{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class lh{constructor(t){this.parser=t,this.name=th.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?wa:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return e.specularColor=new lt(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",s.specularColorTexture).then((function(t){t.encoding=I}))),Promise.all(r)}}class hh{constructor(t){this.parser=t,this.name=th.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=n.images[r.source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s,o)}}class ch{constructor(t){this.parser=t,this.name=th.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],o=i.images[s.source];let a=n.textureLoader;if(o.uri){const t=n.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,o,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class uh{constructor(t){this.name=th.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,r.ready]).then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,s=t.count,o=t.byteStride,a=new ArrayBuffer(s*o),l=new Uint8Array(e[0],n,i);return r.decodeGltfBuffer(new Uint8Array(a),s,o,l,t.mode,t.filter),a}))}return null}}const dh="glTF";class mh{constructor(t){this.name=th.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:ul.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==dh)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(t,12);let r=0;for(;r<n;){const e=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,1313821514===n){const n=new Uint8Array(t,12+r,e);this.content=ul.decodeText(n)}else if(5130562===n){const n=12+r;this.body=t.slice(n,n+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ph{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=th.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,o={},a={},l={};for(const t in s){const e=Eh[t]||t.toLowerCase();o[e]=s[t]}for(const e in t.attributes){const i=Eh[e]||e.toLowerCase();if(void 0!==s[e]){const r=n.accessors[t.attributes[e]],s=wh[r.componentType];l[i]=s,a[i]=!0===r.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=a[e];void 0!==i&&(n.normalized=i)}e(t)}),o,l)}))}))}}class fh{constructor(){this.name=th.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class gh extends ya{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new lt).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(const e in o)t.uniforms[e]=o[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class xh{constructor(){this.name=th.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return gh}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new lt(1,1,1),t.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const e=i.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new lt(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new lt(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const e=i.specularGlossinessTexture;r.push(n.assignTexture(t,"glossinessMap",e)),r.push(n.assignTexture(t,"specularMap",e))}return Promise.all(r)}createMaterial(t){const e=new gh(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class vh{constructor(){this.name=th.KHR_MESH_QUANTIZATION}}class qh extends Ea{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let t=0;t!==i;t++)e[t]=n[r+t];return e}}qh.prototype.beforeStart_=qh.prototype.copySampleValue_,qh.prototype.afterEnd_=qh.prototype.copySampleValue_,qh.prototype.interpolate_=function(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,h=i-e,c=(n-e)/h,u=c*c,d=u*c,m=t*l,p=m-l,f=-2*d+3*u,g=d-u,x=1-f,v=g-u+c;for(let t=0;t!==o;t++){const e=s[p+t+o],n=s[p+t+a]*h,i=s[m+t+o],l=s[m+t]*h;r[t]=x*e+v*n+f*i+g*l}return r};const _h=new xt;class yh extends qh{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return _h.fromArray(r).normalize().toArray(r),r}}const wh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},bh={9728:l,9729:u,9984:h,9985:1007,9986:c,9987:d},Mh={33071:o,33648:a,10497:s},Sh={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Eh={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Th={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ah={CUBICSPLINE:void 0,LINEAR:T,STEP:E};function Rh(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Lh(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ch(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ph(t){const e=t.extensions&&t.extensions[th.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+Ih(e.attributes):t.indices+":"+Ih(t.attributes)+":"+t.mode,n}function Ih(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function Dh(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Nh{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new $l,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new dl(this.options.manager):this.textureLoader=new Xa(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ga(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};Rh(r,s,i),Lh(s,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n].joints;for(let e=0,n=i.length;e<n;e++)t[i[e]].isBone=!0}for(let e=0,i=t.length;e<i;e++){const i=t[e];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[n,i]of t.children.entries())r(i,e.children[n])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[th.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(ul.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=Sh[i.type],o=wh[i.componentType],a=o.BYTES_PER_ELEMENT,l=a*s,h=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,u=!0===i.normalized;let d,m;if(c&&c!==l){const t=Math.floor(h/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(d=new o(r,t*c,i.count*c/a),l=new bs(d,c/a),e.cache.add(n,l)),m=new Ss(l,s,h%c/a,u)}else d=null===r?new o(i.count*s):new o(r,h,i.count*s),m=new Oe(d,s,u);if(void 0!==i.sparse){const e=Sh.SCALAR,n=wh[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,h=new n(t[1],a,i.sparse.count*e),c=new o(t[2],l,i.sparse.count*s);null!==r&&(m=new Oe(m.array.slice(),m.itemSize,m.normalized));for(let t=0,e=h.length;t<e;t++){const e=h[t];if(m.setX(e,c[t*s]),s>=2&&m.setY(e,c[t*s+1]),s>=3&&m.setZ(e,c[t*s+2]),s>=4&&m.setW(e,c[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],r=e.images[i.source];let s=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,r,s)}loadTextureImage(t,e,n){const i=this,r=this.json,o=this.options,a=r.textures[t],l=(e.uri||e.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const h=self.URL||self.webkitURL;let c=e.uri||"",m=!1;if(void 0!==e.bufferView)c=i.getDependency("bufferView",e.bufferView).then((function(t){m=!0;const n=new Blob([t],{type:e.mimeType});return c=h.createObjectURL(n),c}));else if(void 0===e.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const p=Promise.resolve(c).then((function(t){return new Promise((function(e,i){let r=e;!0===n.isImageBitmapLoader&&(r=function(t){const n=new dt(t);n.needsUpdate=!0,e(n)}),n.load(ul.resolveURL(t,o.path),r,void 0,i)}))})).then((function(e){!0===m&&h.revokeObjectURL(c),e.flipY=!1,a.name&&(e.name=a.name);const n=(r.samplers||{})[a.sampler]||{};return e.magFilter=bh[n.magFilter]||u,e.minFilter=bh[n.minFilter]||d,e.wrapS=Mh[n.wrapS]||s,e.wrapT=Mh[n.wrapT]||s,i.associations.set(e,{textures:t}),e})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[l]=p,p}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[th.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[th.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(r);r=i.extensions[th.KHR_TEXTURE_TRANSFORM].extendTexture(r,t),i.associations.set(r,e)}}return t[e]=r,r}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new fo,Ie.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new io,Ie.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(i||r||s){let t="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return ya}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let s;const o={},a=r.extensions||{},l=[];if(a[th.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=i[th.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else if(a[th.KHR_MATERIALS_UNLIT]){const t=i[th.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else{const n=r.pbrMetallicRoughness||{};if(o.color=new lt(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;o.color.fromArray(t),o.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(o,"map",n.baseColorTexture)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===r.doubleSided&&(o.side=2);const h=r.alphaMode||"OPAQUE";if("BLEND"===h?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===h&&(o.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==De&&(l.push(e.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new Q(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;o.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&s!==De&&(l.push(e.assignTexture(o,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(o.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==De&&(o.emissive=(new lt).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==De&&l.push(e.assignTexture(o,"emissiveMap",r.emissiveTexture)),Promise.all(l).then((function(){let n;return n=s===gh?i[th.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new s(o),r.name&&(n.name=r.name),n.map&&(n.map.encoding=I),n.emissiveMap&&(n.emissiveMap.encoding=I),Lh(n,r),e.associations.set(n,{materials:t}),r.extensions&&Rh(i,n,r),n}))}createUniqueName(t){const e=Dl.sanitizeNodeName(t||"");let n=e;for(let t=1;this.nodeNamesUsed[n];++t)n=e+"_"+t;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[th.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return Oh(n,t,e)}))}const s=[];for(let n=0,o=t.length;n<o;n++){const o=t[n],a=Ph(o),l=i[a];if(l)s.push(l.promise);else{let t;t=o.extensions&&o.extensions[th.KHR_DRACO_MESH_COMPRESSION]?r(o):Oh(new Ye,o,e),i[a]={primitive:o,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],s=r.primitives,o=[];for(let t=0,e=s.length;t<e;t++){const e=void 0===s[t].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new ya({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),a.DefaultMaterial):this.getDependency("material",s[t].material);o.push(e)}var a;return o.push(e.loadGeometries(s)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let n=0,h=a.length;n<h;n++){const h=a[n],c=s[n];let u;const d=o[n];if(4===c.mode||5===c.mode||6===c.mode||void 0===c.mode)u=!0===r.isSkinnedMesh?new js(h,d):new mn(h,d),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),5===c.mode?u.geometry=Bh(u.geometry,1):6===c.mode&&(u.geometry=Bh(u.geometry,2));else if(1===c.mode)u=new mo(h,d);else if(3===c.mode)u=new ho(h,d);else if(2===c.mode)u=new po(h,d);else{if(0!==c.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);u=new _o(h,d)}Object.keys(u.geometry.morphAttributes).length>0&&Ch(u,r),u.name=e.createUniqueName(r.name||"mesh_"+t),Lh(u,r),c.extensions&&Rh(i,u,c),e.assignFinalMaterial(u),l.push(u)}for(let n=0,i=l.length;n<i;n++)e.associations.set(l[n],{meshes:t,primitives:n});if(1===l.length)return l[0];const h=new ms;e.associations.set(h,{meshes:t});for(let t=0,e=l.length;t<e;t++)h.add(l[t]);return h}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new yn(K.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new Wn(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Lh(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}loadAnimation(t){const e=this.json.animations[t],n=[],i=[],r=[],s=[],o=[];for(let t=0,a=e.channels.length;t<a;t++){const a=e.channels[t],l=e.samplers[a.sampler],h=a.target,c=void 0!==h.node?h.node:h.id,u=void 0!==e.parameters?e.parameters[l.input]:l.input,d=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",c)),i.push(this.getDependency("accessor",u)),r.push(this.getDependency("accessor",d)),s.push(l),o.push(h)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(o)]).then((function(n){const i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=[];for(let t=0,e=i.length;t<e;t++){const e=i[t],n=r[t],h=s[t],c=o[t],u=a[t];if(void 0===e)continue;let d;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,Th[u.path]){case Th.weights:d=Ia;break;case Th.rotation:d=Na;break;default:d=Oa}const m=e.name?e.name:e.uuid,p=void 0!==c.interpolation?Ah[c.interpolation]:T,f=[];Th[u.path]===Th.weights?e.traverse((function(t){t.morphTargetInfluences&&f.push(t.name?t.name:t.uuid)})):f.push(m);let g=h.array;if(h.normalized){const t=Dh(g.constructor),e=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)e[n]=g[n]*t;g=e}for(let t=0,e=f.length;t<e;t++){const e=new d(f[t]+"."+Th[u.path],n.array,g,p);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(t){return new(this instanceof Na?yh:qh)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const h=e.name?e.name:"animation_"+t;return new Ba(h,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,i=this,r=e.nodes[t],s=r.name?i.createUniqueName(r.name):"";return function(){const e=[],n=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==r.camera&&e.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let o;if(o=!0===r.isBone?new Xs:e.length>1?new ms:1===e.length?e[0]:new _e,o!==e[0])for(let t=0,n=e.length;t<n;t++)o.add(e[t]);if(r.name&&(o.userData.name=r.name,o.name=s),Lh(o,r),r.extensions&&Rh(n,o,r),void 0!==r.matrix){const t=new Zt;t.fromArray(r.matrix),o.applyMatrix4(t)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=t,o}))}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],r=this,s=new ms;i.name&&(s.name=r.createUniqueName(i.name)),Lh(s,i),i.extensions&&Rh(n,s,i);const o=i.nodes||[],a=[];for(let t=0,n=o.length;t<n;t++)a.push(zh(o[t],s,e,r));return Promise.all(a).then((function(){return r.associations=(t=>{const e=new Map;for(const[t,n]of r.associations)(t instanceof Ie||t instanceof dt)&&e.set(t,n);return t.traverse((t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)})),e})(s),s}))}}function zh(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then((function(t){if(void 0===r.skin)return t;let e;return i.getDependency("skin",r.skin).then((function(t){e=t;const n=[];for(let t=0,r=e.joints.length;t<r;t++)n.push(i.getDependency("node",e.joints[t]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(!t.isMesh)return;const i=[],r=[];for(let t=0,s=n.length;t<s;t++){const s=n[t];if(s){i.push(s);const n=new Zt;void 0!==e.inverseBindMatrices&&n.fromArray(e.inverseBindMatrices.array,16*t),r.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[t])}t.bind(new Ks(i,r),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const s=[];if(r.children){const e=r.children;for(let r=0,o=e.length;r<o;r++){const o=e[r];s.push(zh(o,t,n,i))}}return Promise.all(s)}))}function Oh(t,e,n){const i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const e in i){const n=Eh[e]||e.toLowerCase();n in t.attributes||r.push(s(i[e],n))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return Lh(t,e),function(t,e,n){const i=e.attributes,r=new yt;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new vt(e[0],e[1],e[2]),new vt(s[0],s[1],s[2])),t.normalized){const e=Dh(wh[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new vt,e=new vt;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,o=i.max;if(void 0!==s&&void 0!==o){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),i.normalized){const t=Dh(wh[i.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(t)}t.boundingBox=r;const o=new Ut;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(t);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const l=e[a];if(i){const e=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(e)}if(r){const e=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;o.push(e)}}return Promise.all([Promise.all(s),Promise.all(o)]).then((function(e){const n=e[0],s=e[1];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=s),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function Bh(t,e){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(2===e)for(let t=1;t<=i;t++)r.push(n.getX(0)),r.push(n.getX(t)),r.push(n.getX(t+1));else for(let t=0;t<i;t++)t%2==0?(r.push(n.getX(t)),r.push(n.getX(t+1)),r.push(n.getX(t+2))):(r.push(n.getX(t+2)),r.push(n.getX(t+1)),r.push(n.getX(t)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}const Fh={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function Uh(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}const Hh={xAxis:0,yAxis:0,button:0,state:Fh.ComponentState.DEFAULT};class kh{constructor(t){this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===Fh.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(Hh)}updateFromComponent({xAxis:t,yAxis:e,button:n,state:i}){const{normalizedXAxis:r,normalizedYAxis:s}=function(t=0,e=0){let n=t,i=e;if(Math.sqrt(t*t+e*e)>1){const r=Math.atan2(e,t);n=Math.cos(r),i=Math.sin(r)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*i+.5}}(t,e);switch(this.componentProperty){case Fh.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?r:.5;break;case Fh.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?s:.5;break;case Fh.ComponentProperty.BUTTON:this.value=this.states.includes(i)?n:0;break;case Fh.ComponentProperty.STATE:this.valueNodeProperty===Fh.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class Vh{constructor(t,e){if(!(t&&e&&e.visualResponses&&e.gamepadIndices&&0!==Object.keys(e.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=t,this.type=e.type,this.rootNodeName=e.rootNodeName,this.touchPointNodeName=e.touchPointNodeName,this.visualResponses={},Object.keys(e.visualResponses).forEach((t=>{const n=new kh(e.visualResponses[t]);this.visualResponses[t]=n})),this.gamepadIndices=Object.assign({},e.gamepadIndices),this.values={state:Fh.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(t){if(this.values.state=Fh.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&t.buttons.length>this.gamepadIndices.button){const e=t.buttons[this.gamepadIndices.button];this.values.button=e.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,e.pressed||1===this.values.button?this.values.state=Fh.ComponentState.PRESSED:(e.touched||this.values.button>Fh.ButtonTouchThreshold)&&(this.values.state=Fh.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&t.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=t.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Fh.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Fh.AxisTouchThreshold&&(this.values.state=Fh.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&t.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=t.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Fh.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Fh.AxisTouchThreshold&&(this.values.state=Fh.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((t=>{t.updateFromComponent(this.values)}))}}class Gh{constructor(t,e,n){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=n,this.id=e.profileId,this.layoutDescription=e.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((t=>{const e=this.layoutDescription.components[t];this.components[t]=new Vh(t,e)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const t=[];return Object.values(this.components).forEach((e=>{t.push(e.data)})),t}updateFromGamepad(){Object.values(this.components).forEach((t=>{t.updateFromGamepad(this.xrInputSource.gamepad)}))}}class Wh extends _e{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(t){return this.envMap==t||(this.envMap=t,this.traverse((t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}))),this}updateMatrixWorld(t){super.updateMatrixWorld(t),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((t=>{Object.values(t.visualResponses).forEach((t=>{const{valueNode:e,minNode:n,maxNode:i,value:r,valueNodeProperty:s}=t;e&&(s===Fh.VisualResponseProperty.VISIBILITY?e.visible=r:s===Fh.VisualResponseProperty.TRANSFORM&&(e.quaternion.slerpQuaternions(n.quaternion,i.quaternion,r),e.position.lerpVectors(n.position,i.position,r)))}))})))}}function jh(t,e){!function(t,e){Object.values(t.components).forEach((t=>{const{type:n,touchPointNodeName:i,visualResponses:r}=t;if(n===Fh.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(i),t.touchPointNode){const e=new _a(.001),n=new De({color:255}),i=new mn(e,n);t.touchPointNode.add(i)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(r).forEach((t=>{const{valueNodeName:n,minNodeName:i,maxNodeName:r,valueNodeProperty:s}=t;if(s===Fh.VisualResponseProperty.TRANSFORM){if(t.minNode=e.getObjectByName(i),t.maxNode=e.getObjectByName(r),!t.minNode)return void console.warn(`Could not find ${i} in the model`);if(!t.maxNode)return void console.warn(`Could not find ${r} in the model`)}t.valueNode=e.getObjectByName(n),t.valueNode||console.warn(`Could not find ${n} in the model`)}))}))}(t.motionController,e),t.envMap&&e.traverse((e=>{e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)})),t.add(e)}class Xh{constructor(t=null){this.gltfLoader=t,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new Ql)}createControllerModel(t){const e=new Wh;let n=null;return t.addEventListener("connected",(t=>{const i=t.data;"tracked-pointer"===i.targetRayMode&&i.gamepad&&async function(t,e,n=null,i=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const r=await async function(t){if(!t)throw new Error("No basePath supplied");return await Uh(`${t}/profilesList.json`)}(e);let s;if(t.profiles.some((t=>{const n=r[t];return n&&(s={profileId:t,profilePath:`${e}/${n.path}`,deprecated:!!n.deprecated}),!!s})),!s){if(!n)throw new Error("No matching profile name found");const t=r[n];if(!t)throw new Error(`No matching profile name found and default profile "${n}" missing.`);s={profileId:n,profilePath:`${e}/${t.path}`,deprecated:!!t.deprecated}}const o=await Uh(s.profilePath);let a;if(i){let e;if(e="any"===t.handedness?o.layouts[Object.keys(o.layouts)[0]]:o.layouts[t.handedness],!e)throw new Error(`No matching handedness, ${t.handedness}, in profile ${s.profileId}`);e.assetPath&&(a=s.profilePath.replace("profile.json",e.assetPath))}return{profile:o,assetPath:a}}(i,this.path,"generic-trigger").then((({profile:t,assetPath:r})=>{e.motionController=new Gh(i,t,r);const s=this._assetCache[e.motionController.assetUrl];if(s)n=s.scene.clone(),jh(e,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(e.motionController.assetUrl,(t=>{this._assetCache[e.motionController.assetUrl]=t,n=t.scene.clone(),jh(e,n)}),null,(()=>{throw new Error(`Asset ${e.motionController.assetUrl} missing or malformed.`)}))}})).catch((t=>{console.warn(t)}))})),t.addEventListener("disconnected",(()=>{e.motionController=null,e.remove(n),n=null})),e}}const Yh={type:"change"};class Zh extends F{constructor(t,e){super(),void 0===e&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),e=document),this.object=t,this.domElement=e,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,i=1e-6,r=new xt,s=new vt;this.tmpQuaternion=new xt,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new vt(0,0,0),this.rotationVector=new vt(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(t){if(this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(t){if(!this.dragToLook||this.mouseStatus>0){const e=this.getContainerDimensions(),n=e.size[0]/2,i=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-i)/i,this.updateRotationVector()}},this.mouseup=function(t){if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){const e=t*n.movementSpeed,o=t*n.rollSpeed;n.object.translateX(n.moveVector.x*e),n.object.translateY(n.moveVector.y*e),n.object.translateZ(n.moveVector.z*e),n.tmpQuaternion.set(n.rotationVector.x*o,n.rotationVector.y*o,n.rotationVector.z*o,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(s.distanceToSquared(n.object.position)>i||8*(1-r.dot(n.object.quaternion))>i)&&(n.dispatchEvent(Yh),r.copy(n.object.quaternion),s.copy(n.object.position))},this.updateMovementVector=function(){const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",Jh),this.domElement.removeEventListener("mousedown",a),this.domElement.removeEventListener("mousemove",o),this.domElement.removeEventListener("mouseup",l),window.removeEventListener("keydown",h),window.removeEventListener("keyup",c)};const o=this.mousemove.bind(this),a=this.mousedown.bind(this),l=this.mouseup.bind(this),h=this.keydown.bind(this),c=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",Jh),this.domElement.addEventListener("mousemove",o),this.domElement.addEventListener("mousedown",a),this.domElement.addEventListener("mouseup",l),window.addEventListener("keydown",h),window.addEventListener("keyup",c),this.updateMovementVector(),this.updateRotationVector()}}function Jh(t){t.preventDefault()}class Kh extends ka{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new Ga(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(t){let n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const i=r.parse(n);e&&e(i)}),n,i)}parse(t){return new Qh(t)}}class Qh{constructor(t){this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=function(t,e,n){const i=Array.from(t),r=e/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[];let a=0,l=0;for(let t=0;t<i.length;t++){const e=i[t];if("\n"===e)a=0,l-=s;else{const t=$h(e,r,a,l,n);a+=t.offsetX,o.push(t.path)}}return o}(t,e,this.data);for(let t=0,e=i.length;t<e;t++)Array.prototype.push.apply(n,i[t].toShapes());return n}}function $h(t,e,n,i,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");const o=new jl;let a,l,h,c,u,d,m,p;if(s.o){const t=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let r=0,s=t.length;r<s;)switch(t[r++]){case"m":a=t[r++]*e+n,l=t[r++]*e+i,o.moveTo(a,l);break;case"l":a=t[r++]*e+n,l=t[r++]*e+i,o.lineTo(a,l);break;case"q":h=t[r++]*e+n,c=t[r++]*e+i,u=t[r++]*e+n,d=t[r++]*e+i,o.quadraticCurveTo(u,d,h,c);break;case"b":h=t[r++]*e+n,c=t[r++]*e+i,u=t[r++]*e+n,d=t[r++]*e+i,m=t[r++]*e+n,p=t[r++]*e+i,o.bezierCurveTo(u,d,m,p,h,c)}}return{offsetX:s.ha*e,path:o}}Qh.prototype.isFont=!0;class tc extends xa{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}var ec,nc,ic=[new ba({color:16777215,flatShading:!0}),new ba({color:16777215})];class rc{constructor(t){void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t){void 0===t&&(t=new oc);const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e){void 0===e&&(e=new oc);const n=this.elements,i=t.x,r=t.y,s=t.z;return e.x=n[0]*i+n[1]*r+n[2]*s,e.y=n[3]*i+n[4]*r+n[5]*s,e.z=n[6]*i+n[7]*r+n[8]*s,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e){void 0===e&&(e=new rc);const n=this.elements,i=t.elements,r=e.elements,s=n[0],o=n[1],a=n[2],l=n[3],h=n[4],c=n[5],u=n[6],d=n[7],m=n[8],p=i[0],f=i[1],g=i[2],x=i[3],v=i[4],q=i[5],_=i[6],y=i[7],w=i[8];return r[0]=s*p+o*x+a*_,r[1]=s*f+o*v+a*y,r[2]=s*g+o*q+a*w,r[3]=l*p+h*x+c*_,r[4]=l*f+h*v+c*y,r[5]=l*g+h*q+c*w,r[6]=u*p+d*x+m*_,r[7]=u*f+d*v+m*y,r[8]=u*g+d*q+m*w,e}scale(t,e){void 0===e&&(e=new rc);const n=this.elements,i=e.elements;for(let e=0;3!==e;e++)i[3*e+0]=t.x*n[3*e+0],i[3*e+1]=t.y*n[3*e+1],i[3*e+2]=t.z*n[3*e+2];return e}solve(t,e){void 0===e&&(e=new oc);const n=[];let i,r;for(i=0;i<12;i++)n.push(0);for(i=0;i<3;i++)for(r=0;r<3;r++)n[i+4*r]=this.elements[i+3*r];n[3]=t.x,n[7]=t.y,n[11]=t.z;let s=3;const o=s;let a,l;do{if(i=o-s,0===n[i+4*i])for(r=i+1;r<o;r++)if(0!==n[i+4*r]){a=4;do{l=4-a,n[l+4*i]+=n[l+4*r]}while(--a);break}if(0!==n[i+4*i])for(r=i+1;r<o;r++){const t=n[i+4*r]/n[i+4*i];a=4;do{l=4-a,n[l+4*r]=l<=i?0:n[l+4*r]-n[l+4*i]*t}while(--a)}}while(--s);if(e.z=n[11]/n[10],e.y=(n[7]-n[6]*e.z)/n[5],e.x=(n[3]-n[2]*e.z-n[1]*e.y)/n[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw`Could not solve equation! Got x=[${e.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return e}e(t,e,n){if(void 0===n)return this.elements[e+3*t];this.elements[e+3*t]=n}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";for(let e=0;e<9;e++)t+=this.elements[e]+",";return t}reverse(t){void 0===t&&(t=new rc);const e=sc;let n,i;for(n=0;n<3;n++)for(i=0;i<3;i++)e[n+6*i]=this.elements[n+3*i];e[3]=1,e[9]=0,e[15]=0,e[4]=0,e[10]=1,e[16]=0,e[5]=0,e[11]=0,e[17]=1;let r=3;const s=r;let o,a;do{if(n=s-r,0===e[n+6*n])for(i=n+1;i<s;i++)if(0!==e[n+6*i]){o=6;do{a=6-o,e[a+6*n]+=e[a+6*i]}while(--o);break}if(0!==e[n+6*n])for(i=n+1;i<s;i++){const t=e[n+6*i]/e[n+6*n];o=6;do{a=6-o,e[a+6*i]=a<=n?0:e[a+6*i]-e[a+6*n]*t}while(--o)}}while(--r);n=2;do{i=n-1;do{const t=e[n+6*i]/e[n+6*n];o=6;do{a=6-o,e[a+6*i]=e[a+6*i]-e[a+6*n]*t}while(--o)}while(i--)}while(--n);n=2;do{const t=1/e[n+6*n];o=6;do{a=6-o,e[a+6*n]=e[a+6*n]*t}while(--o)}while(n--);n=2;do{i=2;do{if(a=e[3+i+6*n],isNaN(a)||a===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(n,i,a)}while(i--)}while(n--);return t}setRotationFromQuaternion(t){const e=t.x,n=t.y,i=t.z,r=t.w,s=e+e,o=n+n,a=i+i,l=e*s,h=e*o,c=e*a,u=n*o,d=n*a,m=i*a,p=r*s,f=r*o,g=r*a,x=this.elements;return x[0]=1-(u+m),x[1]=h-g,x[2]=c+f,x[3]=h+g,x[4]=1-(l+m),x[5]=d-p,x[6]=c-f,x[7]=d+p,x[8]=1-(l+u),this}transpose(t){void 0===t&&(t=new rc);const e=this.elements,n=t.elements;let i;return n[0]=e[0],n[4]=e[4],n[8]=e[8],i=e[1],n[1]=e[3],n[3]=i,i=e[2],n[2]=e[6],n[6]=i,i=e[5],n[5]=e[7],n[7]=i,t}}const sc=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class oc{constructor(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}cross(t,e){void 0===e&&(e=new oc);const n=t.x,i=t.y,r=t.z,s=this.x,o=this.y,a=this.z;return e.x=o*r-a*i,e.y=a*n-s*r,e.z=s*i-o*n,e}set(t,e,n){return this.x=t,this.y=e,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(!e)return new oc(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z}vsub(t,e){if(!e)return new oc(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z}crossmat(){return new rc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,n=this.z,i=Math.sqrt(t*t+e*e+n*n);if(i>0){const t=1/i;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return i}unit(t){void 0===t&&(t=new oc);const e=this.x,n=this.y,i=this.z;let r=Math.sqrt(e*e+n*n+i*i);return r>0?(r=1/r,t.x=e*r,t.y=n*r,t.z=i*r):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z;return Math.sqrt((r-e)*(r-e)+(s-n)*(s-n)+(o-i)*(o-i))}distanceSquared(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z;return(r-e)*(r-e)+(s-n)*(s-n)+(o-i)*(o-i)}scale(t,e){void 0===e&&(e=new oc);const n=this.x,i=this.y,r=this.z;return e.x=t*n,e.y=t*i,e.z=t*r,e}vmul(t,e){return void 0===e&&(e=new oc),e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,n){return void 0===n&&(n=new oc),n.x=this.x+t*e.x,n.y=this.y+t*e.y,n.z=this.z+t*e.z,n}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(t){return void 0===t&&(t=new oc),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const n=this.length();if(n>0){const i=ac,r=1/n;i.set(this.x*r,this.y*r,this.z*r);const s=lc;Math.abs(i.x)<.9?(s.set(1,0,0),i.cross(s,t)):(s.set(0,1,0),i.cross(s,t)),i.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,n){const i=this.x,r=this.y,s=this.z;n.x=i+(t.x-i)*e,n.y=r+(t.y-r)*e,n.z=s+(t.z-s)*e}almostEquals(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(hc),hc.almostEquals(t,e)}clone(){return new oc(this.x,this.y,this.z)}}oc.ZERO=new oc(0,0,0),oc.UNIT_X=new oc(1,0,0),oc.UNIT_Y=new oc(0,1,0),oc.UNIT_Z=new oc(0,0,1);const ac=new oc,lc=new oc,hc=new oc;class cc{constructor(t){void 0===t&&(t={}),this.lowerBound=new oc,this.upperBound=new oc,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,n,i){const r=this.lowerBound,s=this.upperBound,o=n;r.copy(t[0]),o&&o.vmult(r,r),s.copy(r);for(let e=1;e<t.length;e++){let n=t[e];o&&(o.vmult(n,uc),n=uc),n.x>s.x&&(s.x=n.x),n.x<r.x&&(r.x=n.x),n.y>s.y&&(s.y=n.y),n.y<r.y&&(r.y=n.y),n.z>s.z&&(s.z=n.z),n.z<r.z&&(r.z=n.z)}return e&&(e.vadd(r,r),e.vadd(s,s)),i&&(r.x-=i,r.y-=i,r.z-=i,s.x+=i,s.y+=i,s.z+=i),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return(new cc).copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,n=this.upperBound,i=t.lowerBound,r=t.upperBound,s=i.x<=n.x&&n.x<=r.x||e.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||e.y<=r.y&&r.y<=n.y,a=i.z<=n.z&&n.z<=r.z||e.z<=r.z&&r.z<=n.z;return s&&o&&a}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,n=this.upperBound,i=t.lowerBound,r=t.upperBound;return e.x<=i.x&&n.x>=r.x&&e.y<=i.y&&n.y>=r.y&&e.z<=i.z&&n.z>=r.z}getCorners(t,e,n,i,r,s,o,a){const l=this.lowerBound,h=this.upperBound;t.copy(l),e.set(h.x,l.y,l.z),n.set(h.x,h.y,l.z),i.set(l.x,h.y,h.z),r.set(h.x,l.y,h.z),s.set(l.x,h.y,l.z),o.set(l.x,l.y,h.z),a.copy(h)}toLocalFrame(t,e){const n=dc,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],c=n[7];this.getCorners(i,r,s,o,a,l,h,c);for(let e=0;8!==e;e++){const i=n[e];t.pointToLocal(i,i)}return e.setFromPoints(n)}toWorldFrame(t,e){const n=dc,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],c=n[7];this.getCorners(i,r,s,o,a,l,h,c);for(let e=0;8!==e;e++){const i=n[e];t.pointToWorld(i,i)}return e.setFromPoints(n)}overlapsRay(t){const{direction:e,from:n}=t,i=1/e.x,r=1/e.y,s=1/e.z,o=(this.lowerBound.x-n.x)*i,a=(this.upperBound.x-n.x)*i,l=(this.lowerBound.y-n.y)*r,h=(this.upperBound.y-n.y)*r,c=(this.lowerBound.z-n.z)*s,u=(this.upperBound.z-n.z)*s,d=Math.max(Math.max(Math.min(o,a),Math.min(l,h)),Math.min(c,u)),m=Math.min(Math.min(Math.max(o,a),Math.max(l,h)),Math.max(c,u));return!(m<0||d>m)}}const uc=new oc,dc=[new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc];class mc{constructor(){this.matrix=[]}get(t,e){let{index:n}=t,{index:i}=e;if(i>n){const t=i;i=n,n=t}return this.matrix[(n*(n+1)>>1)+i-1]}set(t,e,n){let{index:i}=t,{index:r}=e;if(r>i){const t=r;r=i,i=t}this.matrix[(i*(i+1)>>1)+r-1]=n?1:0}reset(){for(let t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class pc{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;return void 0===n[t]&&(n[t]=[]),n[t].includes(e)||n[t].push(e),this}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return!(void 0===n[t]||!n[t].includes(e))}hasAnyEventListener(t){return void 0!==this._listeners&&void 0!==this._listeners[t]}removeEventListener(t,e){if(void 0===this._listeners)return this;const n=this._listeners;if(void 0===n[t])return this;const i=n[t].indexOf(e);return-1!==i&&n[t].splice(i,1),this}dispatchEvent(t){if(void 0===this._listeners)return this;const e=this._listeners[t.type];if(void 0!==e){t.target=this;for(let n=0,i=e.length;n<i;n++)e[n].call(this,t)}return this}}class fc{constructor(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this.x=t,this.y=e,this.z=n,this.w=i}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const n=Math.sin(.5*e);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(.5*e),this}toAxisAngle(t){void 0===t&&(t=new oc),this.normalize();const e=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const e=gc,n=xc;t.tangents(e,n),this.setFromAxisAngle(e,Math.PI)}else{const n=t.cross(e);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(t.length()**2*e.length()**2)+t.dot(e),this.normalize()}return this}mult(t,e){void 0===e&&(e=new fc);const n=this.x,i=this.y,r=this.z,s=this.w,o=t.x,a=t.y,l=t.z,h=t.w;return e.x=n*h+s*o+i*l-r*a,e.y=i*h+s*a+r*o-n*l,e.z=r*h+s*l+n*a-i*o,e.w=s*h-n*o-i*a-r*l,e}inverse(t){void 0===t&&(t=new fc);const e=this.x,n=this.y,i=this.z,r=this.w;this.conjugate(t);const s=1/(e*e+n*n+i*i+r*r);return t.x*=s,t.y*=s,t.z*=s,t.w*=s,t}conjugate(t){return void 0===t&&(t=new fc),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e){void 0===e&&(e=new oc);const n=t.x,i=t.y,r=t.z,s=this.x,o=this.y,a=this.z,l=this.w,h=l*n+o*r-a*i,c=l*i+a*n-s*r,u=l*r+s*i-o*n,d=-s*n-o*i-a*r;return e.x=h*l+d*-s+c*-a-u*-o,e.y=c*l+d*-o+u*-s-h*-a,e.z=u*l+d*-a+h*-o-c*-s,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e){let n,i,r;void 0===e&&(e="YZX");const s=this.x,o=this.y,a=this.z,l=this.w;if("YZX"!==e)throw new Error(`Euler order ${e} not supported yet.`);{const t=s*o+a*l;if(t>.499&&(n=2*Math.atan2(s,l),i=Math.PI/2,r=0),t<-.499&&(n=-2*Math.atan2(s,l),i=-Math.PI/2,r=0),void 0===n){const e=s*s,h=o*o,c=a*a;n=Math.atan2(2*o*l-2*s*a,1-2*h-2*c),i=Math.asin(2*t),r=Math.atan2(2*s*l-2*o*a,1-2*e-2*c)}}t.y=n,t.z=i,t.x=r}setFromEuler(t,e,n,i){void 0===i&&(i="XYZ");const r=Math.cos(t/2),s=Math.cos(e/2),o=Math.cos(n/2),a=Math.sin(t/2),l=Math.sin(e/2),h=Math.sin(n/2);return"XYZ"===i?(this.x=a*s*o+r*l*h,this.y=r*l*o-a*s*h,this.z=r*s*h+a*l*o,this.w=r*s*o-a*l*h):"YXZ"===i?(this.x=a*s*o+r*l*h,this.y=r*l*o-a*s*h,this.z=r*s*h-a*l*o,this.w=r*s*o+a*l*h):"ZXY"===i?(this.x=a*s*o-r*l*h,this.y=r*l*o+a*s*h,this.z=r*s*h+a*l*o,this.w=r*s*o-a*l*h):"ZYX"===i?(this.x=a*s*o-r*l*h,this.y=r*l*o+a*s*h,this.z=r*s*h-a*l*o,this.w=r*s*o+a*l*h):"YZX"===i?(this.x=a*s*o+r*l*h,this.y=r*l*o+a*s*h,this.z=r*s*h-a*l*o,this.w=r*s*o-a*l*h):"XZY"===i&&(this.x=a*s*o-r*l*h,this.y=r*l*o-a*s*h,this.z=r*s*h+a*l*o,this.w=r*s*o+a*l*h),this}clone(){return new fc(this.x,this.y,this.z,this.w)}slerp(t,e,n){void 0===n&&(n=new fc);const i=this.x,r=this.y,s=this.z,o=this.w;let a,l,h,c,u,d=t.x,m=t.y,p=t.z,f=t.w;return l=i*d+r*m+s*p+o*f,l<0&&(l=-l,d=-d,m=-m,p=-p,f=-f),1-l>1e-6?(a=Math.acos(l),h=Math.sin(a),c=Math.sin((1-e)*a)/h,u=Math.sin(e*a)/h):(c=1-e,u=e),n.x=c*i+u*d,n.y=c*r+u*m,n.z=c*s+u*p,n.w=c*o+u*f,n}integrate(t,e,n,i){void 0===i&&(i=new fc);const r=t.x*n.x,s=t.y*n.y,o=t.z*n.z,a=this.x,l=this.y,h=this.z,c=this.w,u=.5*e;return i.x+=u*(r*c+s*h-o*l),i.y+=u*(s*c+o*a-r*h),i.z+=u*(o*c+r*l-s*a),i.w+=u*(-r*a-s*l-o*h),i}}const gc=new oc,xc=new oc;class vc{constructor(t){void 0===t&&(t={}),this.id=vc.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,e,n,i){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}vc.idCounter=0,vc.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class qc{constructor(t){void 0===t&&(t={}),this.position=new oc,this.quaternion=new fc,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return qc.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return qc.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e){return void 0===e&&(e=new oc),this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,n,i){return void 0===i&&(i=new oc),n.vsub(t,i),e.conjugate(_c),_c.vmult(i,i),i}static pointToWorldFrame(t,e,n,i){return void 0===i&&(i=new oc),e.vmult(n,i),i.vadd(t,i),i}static vectorToWorldFrame(t,e,n){return void 0===n&&(n=new oc),t.vmult(e,n),n}static vectorToLocalFrame(t,e,n,i){return void 0===i&&(i=new oc),e.w*=-1,e.vmult(n,i),e.w*=-1,i}}const _c=new fc;class yc extends vc{constructor(t){void 0===t&&(t={});const{vertices:e=[],faces:n=[],normals:i=[],axes:r,boundingSphereRadius:s}=t;super({type:vc.types.CONVEXPOLYHEDRON}),this.vertices=e,this.faces=n,this.faceNormals=i,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=r?r.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,n=this.uniqueEdges;n.length=0;const i=new oc;for(let r=0;r!==t.length;r++){const s=t[r],o=s.length;for(let t=0;t!==o;t++){const r=(t+1)%o;e[s[t]].vsub(e[s[r]],i),i.normalize();let a=!1;for(let t=0;t!==n.length;t++)if(n[t].almostEquals(i)||n[t].almostEquals(i)){a=!0;break}a||n.push(i.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error(`Vertex ${this.faces[t][e]} not found!`);const e=this.faceNormals[t]||new oc;this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e;const n=this.vertices[this.faces[t][0]];if(e.dot(n)<0){console.error(`.faceNormals[${t}] = Vec3(${e.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let e=0;e<this.faces[t].length;e++)console.warn(`.vertices[${this.faces[t][e]}] = Vec3(${this.vertices[this.faces[t][e]].toString()})`)}}}getFaceNormal(t,e){const n=this.faces[t],i=this.vertices[n[0]],r=this.vertices[n[1]],s=this.vertices[n[2]];yc.computeNormal(i,r,s,e)}static computeNormal(t,e,n,i){const r=new oc,s=new oc;e.vsub(t,s),n.vsub(e,r),r.cross(s,i),i.isZero()||i.normalize()}clipAgainstHull(t,e,n,i,r,s,o,a,l){const h=new oc;let c=-1,u=-Number.MAX_VALUE;for(let t=0;t<n.faces.length;t++){h.copy(n.faceNormals[t]),r.vmult(h,h);const e=h.dot(s);e>u&&(u=e,c=t)}const d=[];for(let t=0;t<n.faces[c].length;t++){const e=n.vertices[n.faces[c][t]],s=new oc;s.copy(e),r.vmult(s,s),i.vadd(s,s),d.push(s)}c>=0&&this.clipFaceAgainstHull(s,t,e,d,o,a,l)}findSeparatingAxis(t,e,n,i,r,s,o,a){const l=new oc,h=new oc,c=new oc,u=new oc,d=new oc,m=new oc;let p=Number.MAX_VALUE;const f=this;if(f.uniqueAxes)for(let o=0;o!==f.uniqueAxes.length;o++){n.vmult(f.uniqueAxes[o],l);const a=f.testSepAxis(l,t,e,n,i,r);if(!1===a)return!1;a<p&&(p=a,s.copy(l))}else{const a=o?o.length:f.faces.length;for(let h=0;h<a;h++){const a=o?o[h]:h;l.copy(f.faceNormals[a]),n.vmult(l,l);const c=f.testSepAxis(l,t,e,n,i,r);if(!1===c)return!1;c<p&&(p=c,s.copy(l))}}if(t.uniqueAxes)for(let o=0;o!==t.uniqueAxes.length;o++){r.vmult(t.uniqueAxes[o],h);const a=f.testSepAxis(h,t,e,n,i,r);if(!1===a)return!1;a<p&&(p=a,s.copy(h))}else{const o=a?a.length:t.faces.length;for(let l=0;l<o;l++){const o=a?a[l]:l;h.copy(t.faceNormals[o]),r.vmult(h,h);const c=f.testSepAxis(h,t,e,n,i,r);if(!1===c)return!1;c<p&&(p=c,s.copy(h))}}for(let o=0;o!==f.uniqueEdges.length;o++){n.vmult(f.uniqueEdges[o],u);for(let o=0;o!==t.uniqueEdges.length;o++)if(r.vmult(t.uniqueEdges[o],d),u.cross(d,m),!m.almostZero()){m.normalize();const o=f.testSepAxis(m,t,e,n,i,r);if(!1===o)return!1;o<p&&(p=o,s.copy(m))}}return i.vsub(e,c),c.dot(s)>0&&s.negate(s),!0}testSepAxis(t,e,n,i,r,s){yc.project(this,t,n,i,wc),yc.project(e,t,r,s,bc);const o=wc[0],a=wc[1],l=bc[0],h=bc[1];if(o<h||l<a)return!1;const c=o-h,u=l-a;return c<u?c:u}calculateLocalInertia(t,e){const n=new oc,i=new oc;this.computeLocalAABB(i,n);const r=n.x-i.x,s=n.y-i.y,o=n.z-i.z;e.x=1/12*t*(2*s*2*s+2*o*2*o),e.y=1/12*t*(2*r*2*r+2*o*2*o),e.z=1/12*t*(2*s*2*s+2*r*2*r)}getPlaneConstantOfFace(t){const e=this.faces[t],n=this.faceNormals[t],i=this.vertices[e[0]];return-n.dot(i)}clipFaceAgainstHull(t,e,n,i,r,s,o){const a=new oc,l=new oc,h=new oc,c=new oc,u=new oc,d=new oc,m=new oc,p=new oc,f=this,g=i,x=[];let v=-1,q=Number.MAX_VALUE;for(let e=0;e<f.faces.length;e++){a.copy(f.faceNormals[e]),n.vmult(a,a);const i=a.dot(t);i<q&&(q=i,v=e)}if(v<0)return;const _=f.faces[v];_.connectedFaces=[];for(let t=0;t<f.faces.length;t++)for(let e=0;e<f.faces[t].length;e++)-1!==_.indexOf(f.faces[t][e])&&t!==v&&-1===_.connectedFaces.indexOf(t)&&_.connectedFaces.push(t);const y=_.length;for(let t=0;t<y;t++){const i=f.vertices[_[t]],r=f.vertices[_[(t+1)%y]];i.vsub(r,l),h.copy(l),n.vmult(h,h),e.vadd(h,h),c.copy(this.faceNormals[v]),n.vmult(c,c),e.vadd(c,c),h.cross(c,u),u.negate(u),d.copy(i),n.vmult(d,d),e.vadd(d,d);const s=_.connectedFaces[t];m.copy(this.faceNormals[s]);const o=this.getPlaneConstantOfFace(s);p.copy(m),n.vmult(p,p);const a=o-p.dot(e);for(this.clipFaceAgainstPlane(g,x,p,a);g.length;)g.shift();for(;x.length;)g.push(x.shift())}m.copy(this.faceNormals[v]);const w=this.getPlaneConstantOfFace(v);p.copy(m),n.vmult(p,p);const b=w-p.dot(e);for(let t=0;t<g.length;t++){let e=p.dot(g[t])+b;if(e<=r&&(console.log(`clamped: depth=${e} to minDist=${r}`),e=r),e<=s){const n=g[t];if(e<=1e-6){const t={point:n,normal:p,depth:e};o.push(t)}}}}clipFaceAgainstPlane(t,e,n,i){let r,s;const o=t.length;if(o<2)return e;let a=t[t.length-1],l=t[0];r=n.dot(a)+i;for(let h=0;h<o;h++){if(l=t[h],s=n.dot(l)+i,r<0)if(s<0){const t=new oc;t.copy(l),e.push(t)}else{const t=new oc;a.lerp(l,r/(r-s),t),e.push(t)}else if(s<0){const t=new oc;a.lerp(l,r/(r-s),t),e.push(t),e.push(l)}a=l,r=s}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new oc);const n=this.vertices,i=this.worldVertices;for(let r=0;r!==this.vertices.length;r++)e.vmult(n[r],i[r]),t.vadd(i[r],i[r]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const n=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<this.vertices.length;i++){const r=n[i];r.x<t.x?t.x=r.x:r.x>e.x&&(e.x=r.x),r.y<t.y?t.y=r.y:r.y>e.y&&(e.y=r.y),r.z<t.z?t.z=r.z:r.z>e.z&&(e.z=r.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new oc);const n=this.faceNormals,i=this.worldFaceNormals;for(let r=0;r!==e;r++)t.vmult(n[r],i[r]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let n=0;n!==e.length;n++){const i=e[n].lengthSquared();i>t&&(t=i)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,n,i){const r=this.vertices;let s,o,a,l,h,c,u=new oc;for(let n=0;n<r.length;n++){u.copy(r[n]),e.vmult(u,u),t.vadd(u,u);const i=u;(void 0===s||i.x<s)&&(s=i.x),(void 0===l||i.x>l)&&(l=i.x),(void 0===o||i.y<o)&&(o=i.y),(void 0===h||i.y>h)&&(h=i.y),(void 0===a||i.z<a)&&(a=i.z),(void 0===c||i.z>c)&&(c=i.z)}n.set(s,o,a),i.set(l,h,c)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){void 0===t&&(t=new oc);const e=this.vertices;for(let n=0;n<e.length;n++)t.vadd(e[n],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const n=this.vertices.length,i=this.vertices;if(e){for(let t=0;t<n;t++){const n=i[t];e.vmult(n,n)}for(let t=0;t<this.faceNormals.length;t++){const n=this.faceNormals[t];e.vmult(n,n)}}if(t)for(let e=0;e<n;e++){const n=i[e];n.vadd(t,n)}}pointIsInside(t){const e=this.vertices,n=this.faces,i=this.faceNormals,r=new oc;this.getAveragePointLocal(r);for(let s=0;s<this.faces.length;s++){let o=i[s];const a=e[n[s][0]],l=new oc;t.vsub(a,l);const h=o.dot(l),c=new oc;r.vsub(a,c);const u=o.dot(c);if(h<0&&u>0||h>0&&u<0)return!1}return-1}static project(t,e,n,i,r){const s=t.vertices.length,o=Mc;let a=0,l=0;const h=Sc,c=t.vertices;h.setZero(),qc.vectorToLocalFrame(n,i,e,o),qc.pointToLocalFrame(n,i,h,h);const u=h.dot(o);l=a=c[0].dot(o);for(let t=1;t<s;t++){const e=c[t].dot(o);e>a&&(a=e),e<l&&(l=e)}if(l-=u,a-=u,l>a){const t=l;l=a,a=t}r[0]=a,r[1]=l}}const wc=[],bc=[],Mc=(new oc,new oc),Sc=new oc;class Ec extends vc{constructor(t){super({type:vc.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,n=this.halfExtents.z,i=oc,r=[new i(-t,-e,-n),new i(t,-e,-n),new i(t,e,-n),new i(-t,e,-n),new i(-t,-e,n),new i(t,-e,n),new i(t,e,n),new i(-t,e,n)],s=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],o=new yc({vertices:r,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:s});this.convexPolyhedronRepresentation=o,o.material=this.material}calculateLocalInertia(t,e){return void 0===e&&(e=new oc),Ec.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,n){const i=t;n.x=1/12*e*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*e*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*e*(2*i.y*2*i.y+2*i.x*2*i.x)}getSideNormals(t,e){const n=t,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==e)for(let t=0;t!==n.length;t++)e.vmult(n[t],n[t]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,n){const i=this.halfExtents,r=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]];for(let i=0;i<r.length;i++)Tc.set(r[i][0],r[i][1],r[i][2]),e.vmult(Tc,Tc),t.vadd(Tc,Tc),n(Tc.x,Tc.y,Tc.z)}calculateWorldAABB(t,e,n,i){const r=this.halfExtents;Ac[0].set(r.x,r.y,r.z),Ac[1].set(-r.x,r.y,r.z),Ac[2].set(-r.x,-r.y,r.z),Ac[3].set(-r.x,-r.y,-r.z),Ac[4].set(r.x,-r.y,-r.z),Ac[5].set(r.x,r.y,-r.z),Ac[6].set(-r.x,r.y,-r.z),Ac[7].set(r.x,-r.y,r.z);const s=Ac[0];e.vmult(s,s),t.vadd(s,s),i.copy(s),n.copy(s);for(let r=1;r<8;r++){const s=Ac[r];e.vmult(s,s),t.vadd(s,s);const o=s.x,a=s.y,l=s.z;o>i.x&&(i.x=o),a>i.y&&(i.y=a),l>i.z&&(i.z=l),o<n.x&&(n.x=o),a<n.y&&(n.y=a),l<n.z&&(n.z=l)}}}const Tc=new oc,Ac=[new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc];class Rc extends pc{constructor(t){void 0===t&&(t={}),super(),this.id=Rc.idCounter++,this.index=-1,this.world=null,this.vlambda=new oc,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof t.collisionResponse||t.collisionResponse,this.position=new oc,this.previousPosition=new oc,this.interpolatedPosition=new oc,this.initPosition=new oc,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new oc,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new oc,this.force=new oc;const e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?Rc.STATIC:Rc.DYNAMIC,typeof t.type==typeof Rc.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=Rc.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new oc,this.quaternion=new fc,this.initQuaternion=new fc,this.previousQuaternion=new fc,this.interpolatedQuaternion=new fc,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new oc,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new oc,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new oc,this.invInertia=new oc,this.invInertiaWorld=new rc,this.invMassSolve=0,this.invInertiaSolve=new oc,this.invInertiaWorldSolve=new rc,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new oc(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new oc(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new cc,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new oc,this.isTrigger=Boolean(t.isTrigger),t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=Rc.AWAKE,this.wakeUpAfterNarrowphase=!1,t===Rc.SLEEPING&&this.dispatchEvent(Rc.wakeupEvent)}sleep(){this.sleepState=Rc.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),i=this.sleepSpeedLimit**2;e===Rc.AWAKE&&n<i?(this.sleepState=Rc.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(Rc.sleepyEvent)):e===Rc.SLEEPY&&n>i?this.wakeUp():e===Rc.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Rc.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Rc.SLEEPING||this.type===Rc.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e){return void 0===e&&(e=new oc),t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e){return void 0===e&&(e=new oc),this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e){return void 0===e&&(e=new oc),this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e){return void 0===e&&(e=new oc),this.quaternion.vmult(t,e),e}addShape(t,e,n){const i=new oc,r=new fc;return e&&i.copy(e),n&&r.copy(n),this.shapes.push(t),this.shapeOffsets.push(i),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return-1===e?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,n=t.length;let i=0;for(let r=0;r!==n;r++){const n=t[r];n.updateBoundingSphereRadius();const s=e[r].length(),o=n.boundingSphereRadius;s+o>i&&(i=s+o)}this.boundingRadius=i}updateAABB(){const t=this.shapes,e=this.shapeOffsets,n=this.shapeOrientations,i=t.length,r=Lc,s=Cc,o=this.quaternion,a=this.aabb,l=Pc;for(let h=0;h!==i;h++){const i=t[h];o.vmult(e[h],r),r.vadd(this.position,r),o.mult(n[h],s),i.calculateWorldAABB(r,s,l.lowerBound,l.upperBound),0===h?a.copy(l):a.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){const t=Ic,n=Dc;t.setRotationFromQuaternion(this.quaternion),t.transpose(n),t.scale(e,t),t.mmult(n,this.invInertiaWorld)}}applyForce(t,e){if(void 0===e&&(e=new oc),this.type!==Rc.DYNAMIC)return;this.sleepState===Rc.SLEEPING&&this.wakeUp();const n=Nc;e.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(t,e){if(void 0===e&&(e=new oc),this.type!==Rc.DYNAMIC)return;const n=zc,i=Oc;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,i),this.applyForce(n,i)}applyTorque(t){this.type===Rc.DYNAMIC&&(this.sleepState===Rc.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e){if(void 0===e&&(e=new oc),this.type!==Rc.DYNAMIC)return;this.sleepState===Rc.SLEEPING&&this.wakeUp();const n=e,i=Bc;i.copy(t),i.scale(this.invMass,i),this.velocity.vadd(i,this.velocity);const r=Fc;n.cross(t,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}applyLocalImpulse(t,e){if(void 0===e&&(e=new oc),this.type!==Rc.DYNAMIC)return;const n=Uc,i=Hc;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,i),this.applyImpulse(n,i)}updateMassProperties(){const t=kc;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,n=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Ec.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!n?1/e.x:0,e.y>0&&!n?1/e.y:0,e.z>0&&!n?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const n=new oc;return t.vsub(this.position,n),this.angularVelocity.cross(n,e),this.velocity.vadd(e,e),e}integrate(t,e,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==Rc.DYNAMIC&&this.type!==Rc.KINEMATIC||this.sleepState===Rc.SLEEPING)return;const i=this.velocity,r=this.angularVelocity,s=this.position,o=this.force,a=this.torque,l=this.quaternion,h=this.invMass,c=this.invInertiaWorld,u=this.linearFactor,d=h*t;i.x+=o.x*d*u.x,i.y+=o.y*d*u.y,i.z+=o.z*d*u.z;const m=c.elements,p=this.angularFactor,f=a.x*p.x,g=a.y*p.y,x=a.z*p.z;r.x+=t*(m[0]*f+m[1]*g+m[2]*x),r.y+=t*(m[3]*f+m[4]*g+m[5]*x),r.z+=t*(m[6]*f+m[7]*g+m[8]*x),s.x+=i.x*t,s.y+=i.y*t,s.z+=i.z*t,l.integrate(this.angularVelocity,t,this.angularFactor,l),e&&(n?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}Rc.idCounter=0,Rc.COLLIDE_EVENT_NAME="collide",Rc.DYNAMIC=1,Rc.STATIC=2,Rc.KINEMATIC=4,Rc.AWAKE=0,Rc.SLEEPY=1,Rc.SLEEPING=2,Rc.wakeupEvent={type:"wakeup"},Rc.sleepyEvent={type:"sleepy"},Rc.sleepEvent={type:"sleep"};const Lc=new oc,Cc=new fc,Pc=new cc,Ic=new rc,Dc=new rc,Nc=(new rc,new oc),zc=new oc,Oc=new oc,Bc=new oc,Fc=new oc,Uc=new oc,Hc=new oc,kc=new oc;const Vc=new oc;new oc,new fc,new oc;const Gc={keys:[]},Wc=[],jc=[];new oc,new oc,new oc;class Xc extends class{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,e,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,e){return 0!=(t.collisionFilterGroup&e.collisionFilterMask)&&0!=(e.collisionFilterGroup&t.collisionFilterMask)&&(0==(t.type&Rc.STATIC)&&t.sleepState!==Rc.SLEEPING||0==(e.type&Rc.STATIC)&&e.sleepState!==Rc.SLEEPING)}intersectionTest(t,e,n,i){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,n,i):this.doBoundingSphereBroadphase(t,e,n,i)}doBoundingSphereBroadphase(t,e,n,i){const r=Vc;e.position.vsub(t.position,r);const s=(t.boundingRadius+e.boundingRadius)**2;r.lengthSquared()<s&&(n.push(t),i.push(e))}doBoundingBoxBroadphase(t,e,n,i){t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)&&(n.push(t),i.push(e))}makePairsUnique(t,e){const n=Gc,i=Wc,r=jc,s=t.length;for(let n=0;n!==s;n++)i[n]=t[n],r[n]=e[n];t.length=0,e.length=0;for(let t=0;t!==s;t++){const e=i[t].id,s=r[t].id,o=e<s?`${e},${s}`:`${s},${e}`;n[o]=t,n.keys.push(o)}for(let s=0;s!==n.keys.length;s++){const s=n.keys.pop(),o=n[s];t.push(i[o]),e.push(r[o]),delete n[s]}}setWorld(t){}static boundingSphereCheck(t,e){const n=new oc;t.position.vsub(e.position,n);const i=t.shapes[0],r=e.shapes[0];return Math.pow(i.boundingSphereRadius+r.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(t,e,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}{constructor(){super()}collisionPairs(t,e,n){const i=t.bodies,r=i.length;let s,o;for(let t=0;t!==r;t++)for(let r=0;r!==t;r++)s=i[t],o=i[r],this.needBroadphaseCollision(s,o)&&this.intersectionTest(s,o,e,n)}aabbQuery(t,e,n){void 0===n&&(n=[]);for(let i=0;i<t.bodies.length;i++){const r=t.bodies[i];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&n.push(r)}return n}}class Yc{constructor(){this.rayFromWorld=new oc,this.rayToWorld=new oc,this.hitNormalWorld=new oc,this.hitPointWorld=new oc,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,n,i,r,s,o){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=s,this.distance=o}}let Zc,Jc,Kc,Qc,$c,tu,eu;Zc=vc.types.SPHERE,Jc=vc.types.PLANE,Kc=vc.types.BOX,Qc=vc.types.CYLINDER,$c=vc.types.CONVEXPOLYHEDRON,tu=vc.types.HEIGHTFIELD,eu=vc.types.TRIMESH;class nu{get[Zc](){return this._intersectSphere}get[Jc](){return this._intersectPlane}get[Kc](){return this._intersectBox}get[Qc](){return this._intersectConvex}get[$c](){return this._intersectConvex}get[tu](){return this._intersectHeightfield}get[eu](){return this._intersectTrimesh}constructor(t,e){void 0===t&&(t=new oc),void 0===e&&(e=new oc),this.from=t.clone(),this.to=e.clone(),this.direction=new oc,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=nu.ANY,this.result=new Yc,this.hasHit=!1,this.callback=t=>{}}intersectWorld(t,e){return this.mode=e.mode||nu.ANY,this.result=e.result||new Yc,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(iu),ru.length=0,t.broadphase.aabbQuery(t,iu,ru),this.intersectBodies(ru),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!t.collisionResponse)return;if(0==(this.collisionFilterGroup&t.collisionFilterMask)||0==(t.collisionFilterGroup&this.collisionFilterMask))return;const i=au,r=lu;for(let e=0,s=t.shapes.length;e<s;e++){const s=t.shapes[e];if((!n||s.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[e],r),t.quaternion.vmult(t.shapeOffsets[e],i),i.vadd(t.position,i),this.intersectShape(s,r,i,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let e=0,n=t.length;!this.result.shouldStop&&e<n;e++)this.intersectBody(t[e])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,n,i){const r=function(t,e,n){n.vsub(t,Ru);const i=Ru.dot(e);return e.scale(i,Lu),Lu.vadd(t,Lu),n.distanceTo(Lu)}(this.from,this.direction,n);if(r>t.boundingSphereRadius)return;const s=this[t.type];s&&s.call(this,t,e,n,i,t)}_intersectBox(t,e,n,i,r){return this._intersectConvex(t.convexPolyhedronRepresentation,e,n,i,r)}_intersectPlane(t,e,n,i,r){const s=this.from,o=this.to,a=this.direction,l=new oc(0,0,1);e.vmult(l,l);const h=new oc;s.vsub(n,h);const c=h.dot(l);if(o.vsub(n,h),c*h.dot(l)>0)return;if(s.distanceTo(o)<c)return;const u=l.dot(a);if(Math.abs(u)<this.precision)return;const d=new oc,m=new oc,p=new oc;s.vsub(n,d);const f=-l.dot(d)/u;a.scale(f,m),s.vadd(m,p),this.reportIntersection(l,p,r,i,-1)}getAABB(t){const{lowerBound:e,upperBound:n}=t,i=this.to,r=this.from;e.x=Math.min(i.x,r.x),e.y=Math.min(i.y,r.y),e.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}_intersectHeightfield(t,e,n,i,r){t.data,t.elementSize;const s=fu;s.from.copy(this.from),s.to.copy(this.to),qc.pointToLocalFrame(n,e,s.from,s.from),qc.pointToLocalFrame(n,e,s.to,s.to),s.updateDirection();const o=gu;let a,l,h,c;a=l=0,h=c=t.data.length-1;const u=new cc;s.getAABB(u),t.getIndexOfPosition(u.lowerBound.x,u.lowerBound.y,o,!0),a=Math.max(a,o[0]),l=Math.max(l,o[1]),t.getIndexOfPosition(u.upperBound.x,u.upperBound.y,o,!0),h=Math.min(h,o[0]+1),c=Math.min(c,o[1]+1);for(let o=a;o<h;o++)for(let a=l;a<c;a++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(o,a,u),u.overlapsRay(s)){if(t.getConvexTrianglePillar(o,a,!1),qc.pointToWorldFrame(n,e,t.pillarOffset,pu),this._intersectConvex(t.pillarConvex,e,pu,i,r,mu),this.result.shouldStop)return;t.getConvexTrianglePillar(o,a,!0),qc.pointToWorldFrame(n,e,t.pillarOffset,pu),this._intersectConvex(t.pillarConvex,e,pu,i,r,mu)}}}_intersectSphere(t,e,n,i,r){const s=this.from,o=this.to,a=t.radius,l=(o.x-s.x)**2+(o.y-s.y)**2+(o.z-s.z)**2,h=2*((o.x-s.x)*(s.x-n.x)+(o.y-s.y)*(s.y-n.y)+(o.z-s.z)*(s.z-n.z)),c=h**2-4*l*((s.x-n.x)**2+(s.y-n.y)**2+(s.z-n.z)**2-a**2),u=xu,d=vu;if(!(c<0))if(0===c)s.lerp(o,c,u),u.vsub(n,d),d.normalize(),this.reportIntersection(d,u,r,i,-1);else{const t=(-h-Math.sqrt(c))/(2*l),e=(-h+Math.sqrt(c))/(2*l);if(t>=0&&t<=1&&(s.lerp(o,t,u),u.vsub(n,d),d.normalize(),this.reportIntersection(d,u,r,i,-1)),this.result.shouldStop)return;e>=0&&e<=1&&(s.lerp(o,e,u),u.vsub(n,d),d.normalize(),this.reportIntersection(d,u,r,i,-1))}}_intersectConvex(t,e,n,i,r,s){const o=qu,a=_u,l=s&&s.faceList||null,h=t.faces,c=t.vertices,u=t.faceNormals,d=this.direction,m=this.from,p=this.to,f=m.distanceTo(p),g=l?l.length:h.length,x=this.result;for(let t=0;!x.shouldStop&&t<g;t++){const s=l?l[t]:t,p=h[s],g=u[s],v=e,q=n;a.copy(c[p[0]]),v.vmult(a,a),a.vadd(q,a),a.vsub(m,a),v.vmult(g,o);const _=d.dot(o);if(Math.abs(_)<this.precision)continue;const y=o.dot(a)/_;if(!(y<0)){d.scale(y,hu),hu.vadd(m,hu),cu.copy(c[p[0]]),v.vmult(cu,cu),q.vadd(cu,cu);for(let t=1;!x.shouldStop&&t<p.length-1;t++){uu.copy(c[p[t]]),du.copy(c[p[t+1]]),v.vmult(uu,uu),v.vmult(du,du),q.vadd(uu,uu),q.vadd(du,du);const e=hu.distanceTo(m);!nu.pointInTriangle(hu,cu,uu,du)&&!nu.pointInTriangle(hu,uu,cu,du)||e>f||this.reportIntersection(o,hu,r,i,s)}}}}_intersectTrimesh(t,e,n,i,r,s){const o=yu,a=Tu,l=Au,h=_u,c=wu,u=bu,d=Mu,m=Eu,p=Su,f=t.indices;t.vertices;const g=this.from,x=this.to,v=this.direction;l.position.copy(n),l.quaternion.copy(e),qc.vectorToLocalFrame(n,e,v,c),qc.pointToLocalFrame(n,e,g,u),qc.pointToLocalFrame(n,e,x,d),d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,u.x*=t.scale.x,u.y*=t.scale.y,u.z*=t.scale.z,d.vsub(u,c),c.normalize();const q=u.distanceSquared(d);t.tree.rayQuery(this,l,a);for(let s=0,l=a.length;!this.result.shouldStop&&s!==l;s++){const l=a[s];t.getNormal(l,o),t.getVertex(f[3*l],cu),cu.vsub(u,h);const d=c.dot(o),g=o.dot(h)/d;if(g<0)continue;c.scale(g,hu),hu.vadd(u,hu),t.getVertex(f[3*l+1],uu),t.getVertex(f[3*l+2],du);const x=hu.distanceSquared(u);!nu.pointInTriangle(hu,uu,cu,du)&&!nu.pointInTriangle(hu,cu,uu,du)||x>q||(qc.vectorToWorldFrame(e,o,p),qc.pointToWorldFrame(n,e,hu,m),this.reportIntersection(p,m,r,i,l))}a.length=0}reportIntersection(t,e,n,i,r){const s=this.from,o=this.to,a=s.distanceTo(e),l=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(l.hitFaceIndex=void 0!==r?r:-1,this.mode){case nu.ALL:this.hasHit=!0,l.set(s,o,t,e,n,i,a),l.hasHit=!0,this.callback(l);break;case nu.CLOSEST:(a<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,o,t,e,n,i,a));break;case nu.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,o,t,e,n,i,a),l.shouldStop=!0}}static pointInTriangle(t,e,n,i){i.vsub(e,Ru),n.vsub(e,su),t.vsub(e,ou);const r=Ru.dot(Ru),s=Ru.dot(su),o=Ru.dot(ou),a=su.dot(su),l=su.dot(ou);let h,c;return(h=a*o-s*l)>=0&&(c=r*l-s*o)>=0&&h+c<r*a-s*s}}nu.CLOSEST=1,nu.ANY=2,nu.ALL=4;const iu=new cc,ru=[],su=new oc,ou=new oc,au=new oc,lu=new fc,hu=new oc,cu=new oc,uu=new oc,du=new oc;new oc,new Yc;const mu={faceList:[0]},pu=new oc,fu=new nu,gu=[],xu=new oc,vu=new oc,qu=new oc,_u=(new oc,new oc,new oc),yu=new oc,wu=new oc,bu=new oc,Mu=new oc,Su=new oc,Eu=new oc;new cc;const Tu=[],Au=new qc,Ru=new oc,Lu=new oc;class Cu{static defaults(t,e){void 0===t&&(t={});for(let n in e)n in t||(t[n]=e[n]);return t}}class Pu{constructor(t,e,n){void 0===n&&(n={}),n=Cu.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=Pu.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}update(){throw new Error("method update() not implmemented in this Constraint subclass!")}enable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!0}disable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!1}}Pu.idCounter=0;class Iu{constructor(){this.spatial=new oc,this.rotational=new oc}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}}class Du{constructor(t,e,n,i){void 0===n&&(n=-1e6),void 0===i&&(i=1e6),this.id=Du.idCounter++,this.minForce=n,this.maxForce=i,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Iu,this.jacobianElementB=new Iu,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,e,n){const i=e,r=t,s=n;this.a=4/(s*(1+4*i)),this.b=4*i/(1+4*i),this.eps=4/(s*s*r*(1+4*i))}computeB(t,e,n){const i=this.computeGW();return-this.computeGq()*t-i*e-this.computeGiMf()*n}computeGq(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.position,s=i.position;return t.spatial.dot(r)+e.spatial.dot(s)}computeGW(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.velocity,s=i.velocity,o=n.angularVelocity,a=i.angularVelocity;return t.multiplyVectors(r,o)+e.multiplyVectors(s,a)}computeGWlambda(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.vlambda,s=i.vlambda,o=n.wlambda,a=i.wlambda;return t.multiplyVectors(r,o)+e.multiplyVectors(s,a)}computeGiMf(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.force,s=n.torque,o=i.force,a=i.torque,l=n.invMassSolve,h=i.invMassSolve;return r.scale(l,Nu),o.scale(h,zu),n.invInertiaWorldSolve.vmult(s,Ou),i.invInertiaWorldSolve.vmult(a,Bu),t.multiplyVectors(Nu,Ou)+e.multiplyVectors(zu,Bu)}computeGiMGt(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.invMassSolve,s=i.invMassSolve,o=n.invInertiaWorldSolve,a=i.invInertiaWorldSolve;let l=r+s;return o.vmult(t.rotational,Fu),l+=Fu.dot(t.rotational),a.vmult(e.rotational,Fu),l+=Fu.dot(e.rotational),l}addToWlambda(t){const e=this.jacobianElementA,n=this.jacobianElementB,i=this.bi,r=this.bj,s=Uu;i.vlambda.addScaledVector(i.invMassSolve*t,e.spatial,i.vlambda),r.vlambda.addScaledVector(r.invMassSolve*t,n.spatial,r.vlambda),i.invInertiaWorldSolve.vmult(e.rotational,s),i.wlambda.addScaledVector(t,s,i.wlambda),r.invInertiaWorldSolve.vmult(n.rotational,s),r.wlambda.addScaledVector(t,s,r.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Du.idCounter=0;const Nu=new oc,zu=new oc,Ou=new oc,Bu=new oc,Fu=new oc,Uu=new oc;class Hu extends Du{constructor(t,e,n){void 0===n&&(n=1e6),super(t,e,0,n),this.restitution=0,this.ri=new oc,this.rj=new oc,this.ni=new oc}computeB(t){const e=this.a,n=this.b,i=this.bi,r=this.bj,s=this.ri,o=this.rj,a=ku,l=Vu,h=i.velocity,c=i.angularVelocity;i.force,i.torque;const u=r.velocity,d=r.angularVelocity;r.force,r.torque;const m=Gu,p=this.jacobianElementA,f=this.jacobianElementB,g=this.ni;s.cross(g,a),o.cross(g,l),g.negate(p.spatial),a.negate(p.rotational),f.spatial.copy(g),f.rotational.copy(l),m.copy(r.position),m.vadd(o,m),m.vsub(i.position,m),m.vsub(s,m);const x=g.dot(m),v=this.restitution+1;return-x*e-(v*u.dot(g)-v*h.dot(g)+d.dot(l)-c.dot(a))*n-t*this.computeGiMf()}getImpactVelocityAlongNormal(){const t=Wu,e=ju,n=Xu,i=Yu,r=Zu;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,i),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(i,e),t.vsub(e,r),this.ni.dot(r)}}const ku=new oc,Vu=new oc,Gu=new oc,Wu=new oc,ju=new oc,Xu=new oc,Yu=new oc,Zu=new oc;new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc;class Ju extends Du{constructor(t,e,n){super(t,e,-n,n),this.ri=new oc,this.rj=new oc,this.t=new oc}computeB(t){this.a;const e=this.b;this.bi,this.bj;const n=this.ri,i=this.rj,r=Ku,s=Qu,o=this.t;n.cross(o,r),i.cross(o,s);const a=this.jacobianElementA,l=this.jacobianElementB;return o.negate(a.spatial),r.negate(a.rotational),l.spatial.copy(o),l.rotational.copy(s),-this.computeGW()*e-t*this.computeGiMf()}}const Ku=new oc,Qu=new oc;class $u{constructor(t,e,n){n=Cu.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=$u.idCounter++,this.materials=[t,e],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}$u.idCounter=0;class td{constructor(t){void 0===t&&(t={});let e="";"string"==typeof t&&(e=t,t={}),this.name=e,this.id=td.idCounter++,this.friction=void 0!==t.friction?t.friction:-1,this.restitution=void 0!==t.restitution?t.restitution:-1}}td.idCounter=0,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new nu,new oc,new oc,new oc,new oc(1,0,0),new oc(0,1,0),new oc(0,0,1),new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc;class ed extends vc{constructor(t){if(super({type:vc.types.SPHERE}),this.radius=void 0!==t?t:1,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}calculateLocalInertia(t,e){void 0===e&&(e=new oc);const n=2*t*this.radius*this.radius/5;return e.x=n,e.y=n,e.z=n,e}volume(){return 4*Math.PI*Math.pow(this.radius,3)/3}updateBoundingSphereRadius(){this.boundingSphereRadius=this.radius}calculateWorldAABB(t,e,n,i){const r=this.radius,s=["x","y","z"];for(let e=0;e<s.length;e++){const o=s[e];n[o]=t[o]-r,i[o]=t[o]+r}}}new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new cc,new oc,new cc,new oc,new oc,new oc,new oc,new oc,new oc,new oc,new cc,new oc,new qc,new cc;class nd extends class{constructor(){this.equations=[]}solve(t,e){return 0}addEquation(t){!t.enabled||t.bi.isTrigger||t.bj.isTrigger||this.equations.push(t)}removeEquation(t){const e=this.equations,n=e.indexOf(t);-1!==n&&e.splice(n,1)}removeAllEquations(){this.equations.length=0}}{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,e){let n=0;const i=this.iterations,r=this.tolerance*this.tolerance,s=this.equations,o=s.length,a=e.bodies,l=a.length,h=t;let c,u,d,m,p,f;if(0!==o)for(let t=0;t!==l;t++)a[t].updateSolveMassProperties();const g=rd,x=sd,v=id;g.length=o,x.length=o,v.length=o;for(let t=0;t!==o;t++){const e=s[t];v[t]=0,x[t]=e.computeB(h),g[t]=1/e.computeC()}if(0!==o){for(let t=0;t!==l;t++){const e=a[t],n=e.vlambda,i=e.wlambda;n.set(0,0,0),i.set(0,0,0)}for(n=0;n!==i;n++){m=0;for(let t=0;t!==o;t++){const e=s[t];c=x[t],u=g[t],f=v[t],p=e.computeGWlambda(),d=u*(c-p-e.eps*f),f+d<e.minForce?d=e.minForce-f:f+d>e.maxForce&&(d=e.maxForce-f),v[t]+=d,m+=d>0?d:-d,e.addToWlambda(d)}if(m*m<r)break}for(let t=0;t!==l;t++){const e=a[t],n=e.velocity,i=e.angularVelocity;e.vlambda.vmul(e.linearFactor,e.vlambda),n.vadd(e.vlambda,n),e.wlambda.vmul(e.angularFactor,e.wlambda),i.vadd(e.wlambda,i)}let t=s.length;const e=1/h;for(;t--;)s[t].multiplier=v[t]*e}return n}}const id=[],rd=[],sd=[];Rc.STATIC;class od extends class{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return 0===this.objects.length?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}}{constructor(){super(...arguments),this.type=oc}constructObject(){return new oc}}const ad=vc.types.SPHERE,ld=vc.types.SPHERE|vc.types.PLANE,hd=vc.types.BOX|vc.types.BOX,cd=vc.types.SPHERE|vc.types.BOX,ud=vc.types.PLANE|vc.types.BOX,dd=vc.types.CONVEXPOLYHEDRON,md=vc.types.SPHERE|vc.types.CONVEXPOLYHEDRON,pd=vc.types.PLANE|vc.types.CONVEXPOLYHEDRON,fd=vc.types.BOX|vc.types.CONVEXPOLYHEDRON,gd=vc.types.SPHERE|vc.types.HEIGHTFIELD,xd=vc.types.BOX|vc.types.HEIGHTFIELD,vd=vc.types.CONVEXPOLYHEDRON|vc.types.HEIGHTFIELD,qd=vc.types.PARTICLE|vc.types.SPHERE,_d=vc.types.PLANE|vc.types.PARTICLE,yd=vc.types.BOX|vc.types.PARTICLE,wd=vc.types.PARTICLE|vc.types.CONVEXPOLYHEDRON,bd=vc.types.CYLINDER,Md=vc.types.SPHERE|vc.types.CYLINDER,Sd=vc.types.PLANE|vc.types.CYLINDER,Ed=vc.types.BOX|vc.types.CYLINDER,Td=vc.types.CONVEXPOLYHEDRON|vc.types.CYLINDER,Ad=vc.types.HEIGHTFIELD|vc.types.CYLINDER,Rd=vc.types.PARTICLE|vc.types.CYLINDER,Ld=vc.types.SPHERE|vc.types.TRIMESH,Cd=vc.types.PLANE|vc.types.TRIMESH;class Pd{get[ad](){return this.sphereSphere}get[ld](){return this.spherePlane}get[hd](){return this.boxBox}get[cd](){return this.sphereBox}get[ud](){return this.planeBox}get[dd](){return this.convexConvex}get[md](){return this.sphereConvex}get[pd](){return this.planeConvex}get[fd](){return this.boxConvex}get[gd](){return this.sphereHeightfield}get[xd](){return this.boxHeightfield}get[vd](){return this.convexHeightfield}get[qd](){return this.sphereParticle}get[_d](){return this.planeParticle}get[yd](){return this.boxParticle}get[wd](){return this.convexParticle}get[bd](){return this.convexConvex}get[Md](){return this.sphereConvex}get[Sd](){return this.planeConvex}get[Ed](){return this.boxConvex}get[Td](){return this.convexConvex}get[Ad](){return this.heightfieldCylinder}get[Rd](){return this.particleCylinder}get[Ld](){return this.sphereTrimesh}get[Cd](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new od,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,n,i,r,s){let o;this.contactPointPool.length?(o=this.contactPointPool.pop(),o.bi=t,o.bj=e):o=new Hu(t,e),o.enabled=t.collisionResponse&&e.collisionResponse&&n.collisionResponse&&i.collisionResponse;const a=this.currentContactMaterial;o.restitution=a.restitution,o.setSpookParams(a.contactEquationStiffness,a.contactEquationRelaxation,this.world.dt);const l=n.material||t.material,h=i.material||e.material;return l&&h&&l.restitution>=0&&h.restitution>=0&&(o.restitution=l.restitution*h.restitution),o.si=r||n,o.sj=s||i,o}createFrictionEquationsFromContact(t,e){const n=t.bi,i=t.bj,r=t.si,s=t.sj,o=this.world,a=this.currentContactMaterial;let l=a.friction;const h=r.material||n.material,c=s.material||i.material;if(h&&c&&h.friction>=0&&c.friction>=0&&(l=h.friction*c.friction),l>0){const r=l*o.gravity.length();let s=n.invMass+i.invMass;s>0&&(s=1/s);const h=this.frictionEquationPool,c=h.length?h.pop():new Ju(n,i,r*s),u=h.length?h.pop():new Ju(n,i,r*s);return c.bi=u.bi=n,c.bj=u.bj=i,c.minForce=u.minForce=-r*s,c.maxForce=u.maxForce=r*s,c.ri.copy(t.ri),c.rj.copy(t.rj),u.ri.copy(t.ri),u.rj.copy(t.rj),t.ni.tangents(c.t,u.t),c.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),u.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),c.enabled=u.enabled=t.enabled,e.push(c,u),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||1===t)return;const n=this.frictionResult[this.frictionResult.length-2],i=this.frictionResult[this.frictionResult.length-1];Id.setZero(),Dd.setZero(),Nd.setZero();const r=e.bi;e.bj;for(let n=0;n!==t;n++)e=this.result[this.result.length-1-n],e.bi!==r?(Id.vadd(e.ni,Id),Dd.vadd(e.ri,Dd),Nd.vadd(e.rj,Nd)):(Id.vsub(e.ni,Id),Dd.vadd(e.rj,Dd),Nd.vadd(e.ri,Nd));const s=1/t;Dd.scale(s,n.ri),Nd.scale(s,n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj),Id.normalize(),Id.tangents(n.t,i.t)}getContacts(t,e,n,i,r,s,o){this.contactPointPool=r,this.frictionEquationPool=o,this.result=i,this.frictionResult=s;const a=Bd,l=Fd,h=zd,c=Od;for(let i=0,r=t.length;i!==r;i++){const r=t[i],s=e[i];let o=null;r.material&&s.material&&(o=n.getContactMaterial(r.material,s.material)||null);const u=r.type&Rc.KINEMATIC&&s.type&Rc.STATIC||r.type&Rc.STATIC&&s.type&Rc.KINEMATIC||r.type&Rc.KINEMATIC&&s.type&Rc.KINEMATIC;for(let t=0;t<r.shapes.length;t++){r.quaternion.mult(r.shapeOrientations[t],a),r.quaternion.vmult(r.shapeOffsets[t],h),h.vadd(r.position,h);const e=r.shapes[t];for(let t=0;t<s.shapes.length;t++){s.quaternion.mult(s.shapeOrientations[t],l),s.quaternion.vmult(s.shapeOffsets[t],c),c.vadd(s.position,c);const i=s.shapes[t];if(!(e.collisionFilterMask&i.collisionFilterGroup&&i.collisionFilterMask&e.collisionFilterGroup))continue;if(h.distanceTo(c)>e.boundingSphereRadius+i.boundingSphereRadius)continue;let d=null;e.material&&i.material&&(d=n.getContactMaterial(e.material,i.material)||null),this.currentContactMaterial=d||o||n.defaultContactMaterial;const m=this[e.type|i.type];if(m){let t=!1;t=e.type<i.type?m.call(this,e,i,h,c,a,l,r,s,e,i,u):m.call(this,i,e,c,h,l,a,s,r,e,i,u),t&&u&&(n.shapeOverlapKeeper.set(e.id,i.id),n.bodyOverlapKeeper.set(r.id,s.id))}}}}}sphereSphere(t,e,n,i,r,s,o,a,l,h,c){if(c)return n.distanceSquared(i)<(t.radius+e.radius)**2;const u=this.createContactEquation(o,a,t,e,l,h);i.vsub(n,u.ni),u.ni.normalize(),u.ri.copy(u.ni),u.rj.copy(u.ni),u.ri.scale(t.radius,u.ri),u.rj.scale(-e.radius,u.rj),u.ri.vadd(n,u.ri),u.ri.vsub(o.position,u.ri),u.rj.vadd(i,u.rj),u.rj.vsub(a.position,u.rj),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}spherePlane(t,e,n,i,r,s,o,a,l,h,c){const u=this.createContactEquation(o,a,t,e,l,h);if(u.ni.set(0,0,1),s.vmult(u.ni,u.ni),u.ni.negate(u.ni),u.ni.normalize(),u.ni.scale(t.radius,u.ri),n.vsub(i,rm),u.ni.scale(u.ni.dot(rm),sm),rm.vsub(sm,u.rj),-rm.dot(u.ni)<=t.radius){if(c)return!0;const t=u.ri,e=u.rj;t.vadd(n,t),t.vsub(o.position,t),e.vadd(i,e),e.vsub(a.position,e),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}}boxBox(t,e,n,i,r,s,o,a,l,h,c){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,n,i,r,s,o,a,t,e,c)}sphereBox(t,e,n,i,r,s,o,a,l,h,c){const u=this.v3pool,d=pm;n.vsub(i,cm),e.getSideNormals(d,s);const m=t.radius;let p=!1;const f=gm,g=xm,x=vm;let v=null,q=0,_=0,y=0,w=null;for(let t=0,e=d.length;t!==e&&!1===p;t++){const e=um;e.copy(d[t]);const n=e.length();e.normalize();const i=cm.dot(e);if(i<n+m&&i>0){const r=dm,s=mm;r.copy(d[(t+1)%3]),s.copy(d[(t+2)%3]);const o=r.length(),a=s.length();r.normalize(),s.normalize();const l=cm.dot(r),h=cm.dot(s);if(l<o&&l>-o&&h<a&&h>-a){const t=Math.abs(i-n-m);if((null===w||t<w)&&(w=t,_=l,y=h,v=n,f.copy(e),g.copy(r),x.copy(s),q++,c))return!0}}}if(q){p=!0;const r=this.createContactEquation(o,a,t,e,l,h);f.scale(-m,r.ri),r.ni.copy(f),r.ni.negate(r.ni),f.scale(v,f),g.scale(_,g),f.vadd(g,f),x.scale(y,x),f.vadd(x,r.rj),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(i,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}let b=u.get();const M=fm;for(let r=0;2!==r&&!p;r++)for(let s=0;2!==s&&!p;s++)for(let u=0;2!==u&&!p;u++)if(b.set(0,0,0),r?b.vadd(d[0],b):b.vsub(d[0],b),s?b.vadd(d[1],b):b.vsub(d[1],b),u?b.vadd(d[2],b):b.vsub(d[2],b),i.vadd(b,M),M.vsub(n,M),M.lengthSquared()<m*m){if(c)return!0;p=!0;const r=this.createContactEquation(o,a,t,e,l,h);r.ri.copy(M),r.ri.normalize(),r.ni.copy(r.ri),r.ri.scale(m,r.ri),r.rj.copy(b),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(i,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}u.release(b),b=null;const S=u.get(),E=u.get(),T=u.get(),A=u.get(),R=u.get(),L=d.length;for(let r=0;r!==L&&!p;r++)for(let s=0;s!==L&&!p;s++)if(r%3!=s%3){d[s].cross(d[r],S),S.normalize(),d[r].vadd(d[s],E),T.copy(n),T.vsub(E,T),T.vsub(i,T);const u=T.dot(S);S.scale(u,A);let f=0;for(;f===r%3||f===s%3;)f++;R.copy(n),R.vsub(A,R),R.vsub(E,R),R.vsub(i,R);const g=Math.abs(u),x=R.length();if(g<d[f].length()&&x<m){if(c)return!0;p=!0;const r=this.createContactEquation(o,a,t,e,l,h);E.vadd(A,r.rj),r.rj.copy(r.rj),R.negate(r.ni),r.ni.normalize(),r.ri.copy(r.rj),r.ri.vadd(i,r.ri),r.ri.vsub(n,r.ri),r.ri.normalize(),r.ri.scale(m,r.ri),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(i,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}u.release(S,E,T,A,R)}planeBox(t,e,n,i,r,s,o,a,l,h,c){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,n,i,r,s,o,a,t,e,c)}convexConvex(t,e,n,i,r,s,o,a,l,h,c,u,d){const m=Im;if(!(n.distanceTo(i)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,n,r,i,s,m,u,d)){const u=[],d=Dm;t.clipAgainstHull(n,r,e,i,s,m,-100,100,u);let p=0;for(let r=0;r!==u.length;r++){if(c)return!0;const s=this.createContactEquation(o,a,t,e,l,h),f=s.ri,g=s.rj;m.negate(s.ni),u[r].normal.negate(d),d.scale(u[r].depth,d),u[r].point.vadd(d,f),g.copy(u[r].point),f.vsub(n,f),g.vsub(i,g),f.vadd(n,f),f.vsub(o.position,f),g.vadd(i,g),g.vsub(a.position,g),this.result.push(s),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(s,this.frictionResult)}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)}}sphereConvex(t,e,n,i,r,s,o,a,l,h,c){const u=this.v3pool;n.vsub(i,qm);const d=e.faceNormals,m=e.faces,p=e.vertices,f=t.radius;let g=!1;for(let r=0;r!==p.length;r++){const u=p[r],d=bm;s.vmult(u,d),i.vadd(d,d);const m=wm;if(d.vsub(n,m),m.lengthSquared()<f*f){if(c)return!0;g=!0;const r=this.createContactEquation(o,a,t,e,l,h);return r.ri.copy(m),r.ri.normalize(),r.ni.copy(r.ri),r.ri.scale(f,r.ri),d.vsub(i,r.rj),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(i,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),void this.createFrictionEquationsFromContact(r,this.frictionResult)}}for(let r=0,x=m.length;r!==x&&!1===g;r++){const x=d[r],v=m[r],q=Mm;s.vmult(x,q);const _=Sm;s.vmult(p[v[0]],_),_.vadd(i,_);const y=Em;q.scale(-f,y),n.vadd(y,y);const w=Tm;y.vsub(_,w);const b=w.dot(q),M=Am;if(n.vsub(_,M),b<0&&M.dot(q)>0){const r=[];for(let t=0,e=v.length;t!==e;t++){const e=u.get();s.vmult(p[v[t]],e),i.vadd(e,e),r.push(e)}if(hm(r,q,n)){if(c)return!0;g=!0;const s=this.createContactEquation(o,a,t,e,l,h);q.scale(-f,s.ri),q.negate(s.ni);const d=u.get();q.scale(-b,d);const m=u.get();q.scale(-f,m),n.vsub(i,s.rj),s.rj.vadd(m,s.rj),s.rj.vadd(d,s.rj),s.rj.vadd(i,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(n,s.ri),s.ri.vsub(o.position,s.ri),u.release(d),u.release(m),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let t=0,e=r.length;t!==e;t++)u.release(r[t]);return}for(let d=0;d!==v.length;d++){const m=u.get(),g=u.get();s.vmult(p[v[(d+1)%v.length]],m),s.vmult(p[v[(d+2)%v.length]],g),i.vadd(m,m),i.vadd(g,g);const x=_m;g.vsub(m,x);const q=ym;x.unit(q);const _=u.get(),y=u.get();n.vsub(m,y);const w=y.dot(q);q.scale(w,_),_.vadd(m,_);const b=u.get();if(_.vsub(n,b),w>0&&w*w<x.lengthSquared()&&b.lengthSquared()<f*f){if(c)return!0;const s=this.createContactEquation(o,a,t,e,l,h);_.vsub(i,s.rj),_.vsub(n,s.ni),s.ni.normalize(),s.ni.scale(f,s.ri),s.rj.vadd(i,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(n,s.ri),s.ri.vsub(o.position,s.ri),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let t=0,e=r.length;t!==e;t++)u.release(r[t]);return u.release(m),u.release(g),u.release(_),u.release(b),void u.release(y)}u.release(m),u.release(g),u.release(_),u.release(b),u.release(y)}for(let t=0,e=r.length;t!==e;t++)u.release(r[t])}}}planeConvex(t,e,n,i,r,s,o,a,l,h,c){const u=Rm,d=Lm;d.set(0,0,1),r.vmult(d,d);let m=0;const p=Cm;for(let r=0;r!==e.vertices.length;r++)if(u.copy(e.vertices[r]),s.vmult(u,u),i.vadd(u,u),u.vsub(n,p),d.dot(p)<=0){if(c)return!0;const r=this.createContactEquation(o,a,t,e,l,h),s=Pm;d.scale(d.dot(p),s),u.vsub(s,s),s.vsub(n,r.ri),r.ni.copy(d),u.vsub(i,r.rj),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.vadd(i,r.rj),r.rj.vsub(a.position,r.rj),this.result.push(r),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(r,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}boxConvex(t,e,n,i,r,s,o,a,l,h,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,n,i,r,s,o,a,t,e,c)}sphereHeightfield(t,e,n,i,r,s,o,a,l,h,c){const u=e.data,d=t.radius,m=e.elementSize,p=Ym,f=Xm;qc.pointToLocalFrame(i,s,n,f);let g=Math.floor((f.x-d)/m)-1,x=Math.ceil((f.x+d)/m)+1,v=Math.floor((f.y-d)/m)-1,q=Math.ceil((f.y+d)/m)+1;if(x<0||q<0||g>u.length||v>u[0].length)return;g<0&&(g=0),x<0&&(x=0),v<0&&(v=0),q<0&&(q=0),g>=u.length&&(g=u.length-1),x>=u.length&&(x=u.length-1),q>=u[0].length&&(q=u[0].length-1),v>=u[0].length&&(v=u[0].length-1);const _=[];e.getRectMinMax(g,v,x,q,_);const y=_[0],w=_[1];if(f.z-d>w||f.z+d<y)return;const b=this.result;for(let l=g;l<x;l++)for(let h=v;h<q;h++){const u=b.length;let d=!1;if(e.getConvexTrianglePillar(l,h,!1),qc.pointToWorldFrame(i,s,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,n,p,r,s,o,a,t,e,c)),c&&d)return!0;if(e.getConvexTrianglePillar(l,h,!0),qc.pointToWorldFrame(i,s,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,n,p,r,s,o,a,t,e,c)),c&&d)return!0;if(b.length-u>2)return}}boxHeightfield(t,e,n,i,r,s,o,a,l,h,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,n,i,r,s,o,a,t,e,c)}convexHeightfield(t,e,n,i,r,s,o,a,l,h,c){const u=e.data,d=e.elementSize,m=t.boundingSphereRadius,p=Wm,f=jm,g=Gm;qc.pointToLocalFrame(i,s,n,g);let x=Math.floor((g.x-m)/d)-1,v=Math.ceil((g.x+m)/d)+1,q=Math.floor((g.y-m)/d)-1,_=Math.ceil((g.y+m)/d)+1;if(v<0||_<0||x>u.length||q>u[0].length)return;x<0&&(x=0),v<0&&(v=0),q<0&&(q=0),_<0&&(_=0),x>=u.length&&(x=u.length-1),v>=u.length&&(v=u.length-1),_>=u[0].length&&(_=u[0].length-1),q>=u[0].length&&(q=u[0].length-1);const y=[];e.getRectMinMax(x,q,v,_,y);const w=y[0],b=y[1];if(!(g.z-m>b||g.z+m<w))for(let l=x;l<v;l++)for(let h=q;h<_;h++){let u=!1;if(e.getConvexTrianglePillar(l,h,!1),qc.pointToWorldFrame(i,s,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(u=this.convexConvex(t,e.pillarConvex,n,p,r,s,o,a,null,null,c,f,null)),c&&u)return!0;if(e.getConvexTrianglePillar(l,h,!0),qc.pointToWorldFrame(i,s,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(u=this.convexConvex(t,e.pillarConvex,n,p,r,s,o,a,null,null,c,f,null)),c&&u)return!0}}sphereParticle(t,e,n,i,r,s,o,a,l,h,c){const u=Bm;if(u.set(0,0,1),i.vsub(n,u),u.lengthSquared()<=t.radius*t.radius){if(c)return!0;const n=this.createContactEquation(a,o,e,t,l,h);u.normalize(),n.rj.copy(u),n.rj.scale(t.radius,n.rj),n.ni.copy(u),n.ni.negate(n.ni),n.ri.set(0,0,0),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}planeParticle(t,e,n,i,r,s,o,a,l,h,c){const u=Nm;u.set(0,0,1),o.quaternion.vmult(u,u);const d=zm;if(i.vsub(o.position,d),u.dot(d)<=0){if(c)return!0;const n=this.createContactEquation(a,o,e,t,l,h);n.ni.copy(u),n.ni.negate(n.ni),n.ri.set(0,0,0);const r=Om;u.scale(u.dot(i),r),i.vsub(r,r),n.rj.copy(r),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}boxParticle(t,e,n,i,r,s,o,a,l,h,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,n,i,r,s,o,a,t,e,c)}convexParticle(t,e,n,i,r,s,o,a,l,h,c){let u=-1;const d=Hm,m=Vm;let p=null;const f=Um;if(f.copy(i),f.vsub(n,f),r.conjugate(Fm),Fm.vmult(f,f),t.pointIsInside(f)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,r),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(r);for(let e=0,n=t.faces.length;e!==n;e++){const n=[t.worldVertices[t.faces[e][0]]],r=t.worldFaceNormals[e];i.vsub(n[0],km);const s=-r.dot(km);if(null===p||Math.abs(s)<Math.abs(p)){if(c)return!0;p=s,u=e,d.copy(r)}}if(-1!==u){const r=this.createContactEquation(a,o,e,t,l,h);d.scale(p,m),m.vadd(i,m),m.vsub(n,m),r.rj.copy(m),d.negate(r.ni),r.ri.set(0,0,0);const s=r.ri,c=r.rj;s.vadd(i,s),s.vsub(a.position,s),c.vadd(n,c),c.vsub(o.position,c),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,e,n,i,r,s,o,a,l,h,c){return this.convexHeightfield(e,t,i,n,s,r,a,o,l,h,c)}particleCylinder(t,e,n,i,r,s,o,a,l,h,c){return this.convexParticle(e,t,i,n,s,r,a,o,l,h,c)}sphereTrimesh(t,e,n,i,r,s,o,a,l,h,c){const u=Xd,d=Yd,m=Zd,p=Jd,f=Kd,g=Qd,x=nm,v=jd,q=Gd,_=im;qc.pointToLocalFrame(i,s,n,f);const y=t.radius;x.lowerBound.set(f.x-y,f.y-y,f.z-y),x.upperBound.set(f.x+y,f.y+y,f.z+y),e.getTrianglesInAABB(x,_);const w=Wd,b=t.radius*t.radius;for(let r=0;r<_.length;r++)for(let u=0;u<3;u++)if(e.getVertex(e.indices[3*_[r]+u],w),w.vsub(f,q),q.lengthSquared()<=b){if(v.copy(w),qc.pointToWorldFrame(i,s,v,w),w.vsub(n,q),c)return!0;let r=this.createContactEquation(o,a,t,e,l,h);r.ni.copy(q),r.ni.normalize(),r.ri.copy(r.ni),r.ri.scale(t.radius,r.ri),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),r.rj.copy(w),r.rj.vsub(a.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}for(let r=0;r<_.length;r++)for(let x=0;x<3;x++){e.getVertex(e.indices[3*_[r]+x],u),e.getVertex(e.indices[3*_[r]+(x+1)%3],d),d.vsub(u,m),f.vsub(d,g);const v=g.dot(m);f.vsub(u,g);let q=g.dot(m);if(q>0&&v<0&&(f.vsub(u,g),p.copy(m),p.normalize(),q=g.dot(p),p.scale(q,g),g.vadd(u,g),g.distanceTo(f)<t.radius)){if(c)return!0;const r=this.createContactEquation(o,a,t,e,l,h);g.vsub(f,r.ni),r.ni.normalize(),r.ni.scale(t.radius,r.ri),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),qc.pointToWorldFrame(i,s,g,g),g.vsub(a.position,r.rj),qc.vectorToWorldFrame(s,r.ni,r.ni),qc.vectorToWorldFrame(s,r.ri,r.ri),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}const M=$d,S=tm,E=em,T=Vd;for(let r=0,u=_.length;r!==u;r++){e.getTriangleVertices(_[r],M,S,E),e.getNormal(_[r],T),f.vsub(M,g);let u=g.dot(T);if(T.scale(u,g),f.vsub(g,g),u=g.distanceTo(f),nu.pointInTriangle(g,M,S,E)&&u<t.radius){if(c)return!0;let r=this.createContactEquation(o,a,t,e,l,h);g.vsub(f,r.ni),r.ni.normalize(),r.ni.scale(t.radius,r.ri),r.ri.vadd(n,r.ri),r.ri.vsub(o.position,r.ri),qc.pointToWorldFrame(i,s,g,g),g.vsub(a.position,r.rj),qc.vectorToWorldFrame(s,r.ni,r.ni),qc.vectorToWorldFrame(s,r.ri,r.ri),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}_.length=0}planeTrimesh(t,e,n,i,r,s,o,a,l,h,c){const u=new oc,d=Ud;d.set(0,0,1),r.vmult(d,d);for(let r=0;r<e.vertices.length/3;r++){e.getVertex(r,u);const m=new oc;m.copy(u),qc.pointToWorldFrame(i,s,m,u);const p=Hd;if(u.vsub(n,p),d.dot(p)<=0){if(c)return!0;const n=this.createContactEquation(o,a,t,e,l,h);n.ni.copy(d);const i=kd;d.scale(p.dot(d),i),u.vsub(i,i),n.ri.copy(i),n.ri.vsub(o.position,n.ri),n.rj.copy(u),n.rj.vsub(a.position,n.rj),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}}}const Id=new oc,Dd=new oc,Nd=new oc,zd=new oc,Od=new oc,Bd=new fc,Fd=new fc,Ud=new oc,Hd=new oc,kd=new oc,Vd=new oc,Gd=new oc;new oc;const Wd=new oc,jd=new oc,Xd=new oc,Yd=new oc,Zd=new oc,Jd=new oc,Kd=new oc,Qd=new oc,$d=new oc,tm=new oc,em=new oc,nm=new cc,im=[],rm=new oc,sm=new oc,om=new oc,am=new oc,lm=new oc;function hm(t,e,n){let i=null;const r=t.length;for(let s=0;s!==r;s++){const o=t[s],a=om;t[(s+1)%r].vsub(o,a);const l=am;a.cross(e,l);const h=lm;n.vsub(o,h);const c=l.dot(h);if(!(null===i||c>0&&!0===i||c<=0&&!1===i))return!1;null===i&&(i=c>0)}return!0}const cm=new oc,um=new oc,dm=new oc,mm=new oc,pm=[new oc,new oc,new oc,new oc,new oc,new oc],fm=new oc,gm=new oc,xm=new oc,vm=new oc,qm=new oc,_m=new oc,ym=new oc,wm=new oc,bm=new oc,Mm=new oc,Sm=new oc,Em=new oc,Tm=new oc,Am=new oc;new oc,new oc;const Rm=new oc,Lm=new oc,Cm=new oc,Pm=new oc,Im=new oc,Dm=new oc,Nm=new oc,zm=new oc,Om=new oc,Bm=new oc,Fm=new fc,Um=new oc;new oc;const Hm=new oc,km=new oc,Vm=new oc,Gm=new oc,Wm=new oc,jm=[0],Xm=new oc,Ym=new oc;class Zm{constructor(){this.current=[],this.previous=[]}getKey(t,e){if(e<t){const n=e;e=t,t=n}return t<<16|e}set(t,e){const n=this.getKey(t,e),i=this.current;let r=0;for(;n>i[r];)r++;if(n!==i[r]){for(let t=i.length-1;t>=r;t--)i[t+1]=i[t];i[r]=n}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,e){const n=this.current,i=this.previous,r=n.length,s=i.length;let o=0;for(let e=0;e<r;e++){let r=!1;const s=n[e];for(;s>i[o];)o++;r=s===i[o],r||Jm(t,s)}o=0;for(let t=0;t<s;t++){let r=!1;const s=i[t];for(;s>n[o];)o++;r=n[o]===s,r||Jm(e,s)}}}function Jm(t,e){t.push((4294901760&e)>>16,65535&e)}const Km=(t,e)=>t<e?`${t}-${e}`:`${e}-${t}`;class Qm{constructor(){this.data={keys:[]}}get(t,e){const n=Km(t,e);return this.data[n]}set(t,e,n){const i=Km(t,e);this.get(t,e)||this.data.keys.push(i),this.data[i]=n}delete(t,e){const n=Km(t,e),i=this.data.keys.indexOf(n);-1!==i&&this.data.keys.splice(i,1),delete this.data[n]}reset(){const t=this.data,e=t.keys;for(;e.length>0;)delete t[e.pop()]}}class $m extends pc{constructor(t){void 0===t&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==t.quatNormalizeSkip?t.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==t.quatNormalizeFast&&t.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new oc,t.gravity&&this.gravity.copy(t.gravity),this.broadphase=void 0!==t.broadphase?t.broadphase:new Xc,this.bodies=[],this.hasActiveBodies=!1,this.solver=void 0!==t.solver?t.solver:new nd,this.constraints=[],this.narrowphase=new Pd(this),this.collisionMatrix=new mc,this.collisionMatrixPrevious=new mc,this.bodyOverlapKeeper=new Zm,this.shapeOverlapKeeper=new Zm,this.contactmaterials=[],this.contactMaterialTable=new Qm,this.defaultMaterial=new td("default"),this.defaultContactMaterial=new $u(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,e){return this.contactMaterialTable.get(t.id,e.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)}rayTest(t,e,n){n instanceof Yc?this.raycastClosest(t,e,{skipBackfaces:!0},n):this.raycastAll(t,e,{skipBackfaces:!0},n)}raycastAll(t,e,n,i){return void 0===n&&(n={}),n.mode=nu.ALL,n.from=t,n.to=e,n.callback=i,tp.intersectWorld(this,n)}raycastAny(t,e,n,i){return void 0===n&&(n={}),n.mode=nu.ANY,n.from=t,n.to=e,n.result=i,tp.intersectWorld(this,n)}raycastClosest(t,e,n,i){return void 0===n&&(n={}),n.mode=nu.CLOSEST,n.from=t,n.to=e,n.result=i,tp.intersectWorld(this,n)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof Rc&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const e=this.bodies.length-1,n=this.bodies,i=n.indexOf(t);if(-1!==i){n.splice(i,1);for(let t=0;t!==n.length;t++)n[t].index=t;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const e=this.bodies;for(let n=0;n<e.length;n++){const i=e[n].shapes;for(let e=0;e<i.length;e++){const n=i[e];if(n.id===t)return n}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const e=this.contactmaterials.indexOf(t);-1!==e&&(this.contactmaterials.splice(e,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,e){void 0===t&&(t=1/60),void 0===e&&(e=10);const n=ep.now()/1e3;if(this.lastCallTime){const i=n-this.lastCallTime;this.step(t,i,e)}else this.step(t,void 0,e);this.lastCallTime=n}step(t,e,n){if(void 0===n&&(n=10),void 0===e)this.internalStep(t),this.time+=t;else{this.accumulator+=e;const i=ep.now();let r=0;for(;this.accumulator>=t&&r<n&&(this.internalStep(t),this.accumulator-=t,r++,!(ep.now()-i>1e3*t)););this.accumulator=this.accumulator%t;const s=this.accumulator/t;for(let t=0;t!==this.bodies.length;t++){const e=this.bodies[t];e.previousPosition.lerp(e.position,s,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,s,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=e}}internalStep(t){this.dt=t;const e=this.contacts,n=ap,i=lp,r=this.bodies.length,s=this.bodies,o=this.solver,a=this.gravity,l=this.doProfiling,h=this.profile,c=Rc.DYNAMIC;let u=-1/0;const d=this.constraints,m=op;a.length();const p=a.x,f=a.y,g=a.z;let x=0;for(l&&(u=ep.now()),x=0;x!==r;x++){const t=s[x];if(t.type===c){const e=t.force,n=t.mass;e.x+=n*p,e.y+=n*f,e.z+=n*g}}for(let t=0,e=this.subsystems.length;t!==e;t++)this.subsystems[t].update();l&&(u=ep.now()),n.length=0,i.length=0,this.broadphase.collisionPairs(this,n,i),l&&(h.broadphase=ep.now()-u);let v=d.length;for(x=0;x!==v;x++){const t=d[x];if(!t.collideConnected)for(let e=n.length-1;e>=0;e-=1)(t.bodyA===n[e]&&t.bodyB===i[e]||t.bodyB===n[e]&&t.bodyA===i[e])&&(n.splice(e,1),i.splice(e,1))}this.collisionMatrixTick(),l&&(u=ep.now());const q=sp,_=e.length;for(x=0;x!==_;x++)q.push(e[x]);e.length=0;const y=this.frictionEquations.length;for(x=0;x!==y;x++)m.push(this.frictionEquations[x]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,i,this,e,q,this.frictionEquations,m),l&&(h.narrowphase=ep.now()-u),l&&(u=ep.now()),x=0;x<this.frictionEquations.length;x++)o.addEquation(this.frictionEquations[x]);const w=e.length;for(let t=0;t!==w;t++){const n=e[t],i=n.bi,r=n.bj,s=n.si,a=n.sj;let l;l=i.material&&r.material&&this.getContactMaterial(i.material,r.material)||this.defaultContactMaterial,l.friction,i.material&&r.material&&(i.material.friction>=0&&r.material.friction>=0&&(i.material.friction,r.material.friction),i.material.restitution>=0&&r.material.restitution>=0&&(n.restitution=i.material.restitution*r.material.restitution)),o.addEquation(n),i.allowSleep&&i.type===Rc.DYNAMIC&&i.sleepState===Rc.SLEEPING&&r.sleepState===Rc.AWAKE&&r.type!==Rc.STATIC&&r.velocity.lengthSquared()+r.angularVelocity.lengthSquared()>=2*r.sleepSpeedLimit**2&&(i.wakeUpAfterNarrowphase=!0),r.allowSleep&&r.type===Rc.DYNAMIC&&r.sleepState===Rc.SLEEPING&&i.sleepState===Rc.AWAKE&&i.type!==Rc.STATIC&&i.velocity.lengthSquared()+i.angularVelocity.lengthSquared()>=2*i.sleepSpeedLimit**2&&(r.wakeUpAfterNarrowphase=!0),this.collisionMatrix.set(i,r,!0),this.collisionMatrixPrevious.get(i,r)||(rp.body=r,rp.contact=n,i.dispatchEvent(rp),rp.body=i,r.dispatchEvent(rp)),this.bodyOverlapKeeper.set(i.id,r.id),this.shapeOverlapKeeper.set(s.id,a.id)}for(this.emitContactEvents(),l&&(h.makeContactConstraints=ep.now()-u,u=ep.now()),x=0;x!==r;x++){const t=s[x];t.wakeUpAfterNarrowphase&&(t.wakeUp(),t.wakeUpAfterNarrowphase=!1)}for(v=d.length,x=0;x!==v;x++){const t=d[x];t.update();for(let e=0,n=t.equations.length;e!==n;e++){const n=t.equations[e];o.addEquation(n)}}o.solve(t,this),l&&(h.solve=ep.now()-u),o.removeAllEquations();const b=Math.pow;for(x=0;x!==r;x++){const e=s[x];if(e.type&c){const n=b(1-e.linearDamping,t),i=e.velocity;i.scale(n,i);const r=e.angularVelocity;if(r){const n=b(1-e.angularDamping,t);r.scale(n,r)}}}this.dispatchEvent(ip),l&&(u=ep.now());const M=this.stepnumber%(this.quatNormalizeSkip+1)==0,S=this.quatNormalizeFast;for(x=0;x!==r;x++)s[x].integrate(t,M,S);this.clearForces(),this.broadphase.dirty=!0,l&&(h.integrate=ep.now()-u),this.stepnumber+=1,this.dispatchEvent(np);let E=!0;if(this.allowSleep)for(E=!1,x=0;x!==r;x++){const t=s[x];t.sleepTick(this.time),t.sleepState!==Rc.SLEEPING&&(E=!0)}this.hasActiveBodies=E}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(hp,cp),t){for(let t=0,e=hp.length;t<e;t+=2)up.bodyA=this.getBodyById(hp[t]),up.bodyB=this.getBodyById(hp[t+1]),this.dispatchEvent(up);up.bodyA=up.bodyB=null}if(e){for(let t=0,e=cp.length;t<e;t+=2)dp.bodyA=this.getBodyById(cp[t]),dp.bodyB=this.getBodyById(cp[t+1]),this.dispatchEvent(dp);dp.bodyA=dp.bodyB=null}hp.length=cp.length=0;const n=this.hasAnyEventListener("beginShapeContact"),i=this.hasAnyEventListener("endShapeContact");if((n||i)&&this.shapeOverlapKeeper.getDiff(hp,cp),n){for(let t=0,e=hp.length;t<e;t+=2){const e=this.getShapeById(hp[t]),n=this.getShapeById(hp[t+1]);mp.shapeA=e,mp.shapeB=n,e&&(mp.bodyA=e.body),n&&(mp.bodyB=n.body),this.dispatchEvent(mp)}mp.bodyA=mp.bodyB=mp.shapeA=mp.shapeB=null}if(i){for(let t=0,e=cp.length;t<e;t+=2){const e=this.getShapeById(cp[t]),n=this.getShapeById(cp[t+1]);pp.shapeA=e,pp.shapeB=n,e&&(pp.bodyA=e.body),n&&(pp.bodyB=n.body),this.dispatchEvent(pp)}pp.bodyA=pp.bodyB=pp.shapeA=pp.shapeB=null}}clearForces(){const t=this.bodies,e=t.length;for(let n=0;n!==e;n++){const e=t[n];e.force,e.torque,e.force.set(0,0,0),e.torque.set(0,0,0)}}}new cc;const tp=new nu,ep=globalThis.performance||{};if(!ep.now){let t=Date.now();ep.timing&&ep.timing.navigationStart&&(t=ep.timing.navigationStart),ep.now=()=>Date.now()-t}new oc;const np={type:"postStep"},ip={type:"preStep"},rp={type:Rc.COLLIDE_EVENT_NAME,body:null,contact:null},sp=[],op=[],ap=[],lp=[],hp=[],cp=[],up={type:"beginContact",bodyA:null,bodyB:null},dp={type:"endContact",bodyA:null,bodyB:null},mp={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},pp={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};var fp,gp,xp,vp,qp,_p,yp,wp,bp,Mp,Sp,Ep;function Tp(t,e){return Math.random()*(e-t)+t}function Ap(t,e,n){t.position.x+=t.vector.x*e*n,t.position.y+=t.vector.y*e*n,t.position.z+=t.vector.z*e*n,t.rotation.x+=t.vector.x*e,t.rotation.y+=t.vector.y*e,t.rotation.z+=t.vector.z*e}function Rp(t,e){t.inner={x:t.vector.x>0&&t.position.x+t.radius>e[1],y:t.vector.y>0&&t.position.y+t.radius>e[1],z:t.vector.z>0&&t.position.z+t.radius>e[1],x0:t.vector.x<0&&t.position.x-t.radius<e[0],y0:t.vector.y<0&&t.position.y-t.radius<e[0],z0:t.vector.z<0&&t.position.z-t.radius<e[0]}}function Lp(t,e){t.outer={x:t.vector.x>0&&t.position.x-t.radius>e[1],y:t.vector.y>0&&t.position.y-t.radius>e[1],z:t.vector.z>0&&t.position.z-t.radius>e[1],x0:t.vector.x<0&&t.position.x+t.radius<e[0],y0:t.vector.y<0&&t.position.y+t.radius<e[0],z0:t.vector.z<0&&t.position.z+t.radius<e[0]}}function Cp(t,e){t.outer.x&&(t.position.x=e[0]-t.radius),t.outer.y&&(t.position.y=e[0]-t.radius),t.outer.z&&(t.position.z=e[0]-t.radius),t.outer.x0&&(t.position.x=e[1]+t.radius),t.outer.y0&&(t.position.y=e[1]+t.radius),t.outer.z0&&(t.position.z=e[1]+t.radius)}function Pp(t){return{position:(s=t[0],o=t[1],{x:Tp(s,o),y:Tp(s,o),z:Tp(s,o)}),rotation:{x:0,y:0,z:0},vector:(e=2*Math.PI,n=Math.random()*e,i=2*Math.random()-1,r=Math.sqrt(1-i*i),{x:r*Math.cos(n),y:r*Math.sin(n),z:i}),radius:Math.floor(5*Math.random())+1,inner:{x:!1,y:!1,z:!1,x0:!1,y0:!1,z0:!1},outer:{x:!1,y:!1,z:!1,x0:!1,y0:!1,z0:!1},colour:16777215*Math.random(),duplicate:void 0,destroy:!1,ghosts:{x:null,y:null,z:null,xy:null,xz:null,yz:null,xyz:null}};var e,n,i,r,s,o}function Ip(t,e){if(Dp(t.inner)){var n=e[1]-e[0];t.ghost={position:{x:t.inner.x?t.position.x-n:t.position.x,y:t.inner.y?t.position.y-n:t.position.y,z:t.inner.z?t.position.z-n:t.position.z}}}else delete t.ghost}function Dp(t){return!!(t.x||t.y||t.z||t.x0||t.y0||t.z0)}function Np(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var zp,Op,Bp,Fp=[-100,100],Up=(new Xa).load("rock/Rock_041_ambientOcclusion.jpg"),Hp=((new Xa).load("rock/Rock_041_basecolor.jpg"),(new Xa).load("rock/Rock_041_height.png")),kp=(new Xa).load("rock/Rock_041_normal.jpg"),Vp=(new Xa).load("rock/Rock_041_roughness.jpg");function Gp(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var i=.003,r=new fn(200,200,200),s=new ya({transparent:!0,opacity:.2});(Ep=new mn(r,s)).position.set(0,1,0),Ep.scale.set(i,i,i),t.add(Ep)}else Ep=t;Sp=[];for(var o=0;o<12;o++){var a=Pp(Fp);a.asteroid=Wp(a),Sp.push(a),Ep.add(a.asteroid)}Xp(e)}function Wp(t){var e=new _a(t.radius,10,10),n=new mn(e,new ya({aoMap:Up,aoMapIntensity:1,color:t.colour,displacementMap:Hp,displacementScale:4,normalMap:kp,roughnessMap:Vp}));return n.position.x=t.position.x,n.position.y=t.position.y,n.position.z=t.position.z,n}function jp(t){t.asteroid.position.x=t.position.x,t.asteroid.position.y=t.position.y,t.asteroid.position.z=t.position.z,t.asteroid.rotation.x=t.rotation.x,t.asteroid.rotation.y=t.rotation.y,t.asteroid.rotation.z=t.rotation.z}function Xp(t){(new Ql).setPath("spaceship/").load("spaceship.glb",(function(e){t.add(e.scene)}))}function Yp(t){if(Sp){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Np(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Np(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(Sp);try{for(n.s();!(e=n.n()).done;){var i=e.value;Ap(i,t,15),jp(i),Rp(i,Fp),Lp(i,Fp),Ip(i,Fp),Dp(i.inner),Dp(i.outer)&&(console.log(i.position),Cp(i,Fp))}}catch(t){n.e(t)}finally{n.f()}}}function Zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Jp=[-50,50],Kp=(new Xa).load("rock/Rock_041_ambientOcclusion.jpg"),Qp=((new Xa).load("rock/Rock_041_basecolor.jpg"),(new Xa).load("rock/Rock_041_height.png")),$p=(new Xa).load("rock/Rock_041_normal.jpg"),tf=(new Xa).load("rock/Rock_041_roughness.jpg");function ef(t){var e=new ed(t.radius),n=new Rc({mass:t.radius});n.addShape(e);var i=t.vector,r=i.x,s=i.y,o=i.z;n.position.copy(t.position),n.velocity.set(15*r,15*s,15*o),Bp.addBody(n);var a=new _a(t.radius,30,30),l=new mn(a,new ya({aoMap:Kp,aoMapIntensity:1,color:t.colour,displacementMap:Qp,displacementScale:4,normalMap:$p,roughnessMap:tf}));return n.threemesh=l,t.body=n,l}function nf(){(new Ql).setPath("spaceship/").load("spaceship.glb",(function(t){Op.add(t.scene)}))}JSON.parse('{"glyphs":{"0":{"x_min":100,"x_max":734,"ha":834,"o":"m 415 -14 q 180 117 260 -14 q 100 496 100 248 q 415 1007 100 1007 q 653 875 573 1007 q 734 496 734 744 q 415 -14 734 -14 m 415 91 q 561 186 514 91 q 608 497 608 281 q 561 806 608 711 q 415 901 514 901 q 271 807 317 901 q 225 497 225 712 q 271 186 225 281 q 415 91 317 91 "},"1":{"x_min":153,"x_max":514.375,"ha":834,"o":"m 514 0 l 395 0 l 395 619 q 400 864 395 702 q 318 788 373 835 l 218 706 l 153 789 l 412 992 l 514 992 l 514 0 "},"2":{"x_min":107,"x_max":726,"ha":834,"o":"m 726 0 l 107 0 l 107 105 l 344 364 q 519 579 477 508 q 561 736 561 650 q 518 856 561 812 q 401 900 475 900 q 185 808 293 900 l 116 889 q 403 1006 246 1006 q 610 934 534 1006 q 687 740 687 862 q 646 575 687 660 q 449 320 606 490 l 258 118 l 258 112 l 726 112 l 726 0 "},"3":{"x_min":89,"x_max":716,"ha":834,"o":"m 471 521 l 471 517 q 716 281 716 485 q 622 64 716 143 q 351 -14 528 -14 q 89 39 187 -14 l 89 154 q 349 91 214 91 q 590 285 590 91 q 331 458 590 458 l 241 458 l 241 564 l 331 564 q 499 615 440 564 q 559 751 559 666 q 513 860 559 820 q 389 900 467 900 q 155 819 268 900 l 93 904 q 388 1006 219 1006 q 606 938 528 1006 q 685 759 685 871 q 629 602 685 665 q 471 521 574 539 "},"4":{"x_min":41,"x_max":764.453125,"ha":834,"o":"m 764 222 l 620 222 l 620 0 l 500 0 l 500 222 l 41 222 l 41 330 l 492 997 l 620 997 l 620 335 l 764 335 l 764 222 m 500 335 l 500 576 q 509 869 500 695 l 503 869 q 442 747 478 800 l 162 335 l 500 335 "},"5":{"x_min":117,"x_max":716,"ha":834,"o":"m 117 39 l 117 156 q 361 91 214 91 q 590 303 590 91 q 356 502 590 502 q 199 485 295 502 l 138 524 l 175 992 l 643 992 l 643 879 l 282 879 l 256 594 q 397 608 328 608 q 628 530 540 608 q 716 317 716 452 q 622 72 716 158 q 358 -14 528 -14 q 117 39 206 -14 "},"6":{"x_min":104,"x_max":730,"ha":834,"o":"m 655 993 l 655 888 q 542 900 606 900 q 315 806 391 900 q 232 505 238 711 l 240 505 q 448 621 304 621 q 655 540 580 621 q 730 319 730 459 q 648 75 730 164 q 428 -14 566 -14 q 192 100 280 -14 q 104 423 104 214 q 538 1006 104 1006 q 655 993 608 1006 m 610 320 q 564 471 610 418 q 431 524 517 524 q 287 469 345 524 q 229 343 229 414 q 284 165 229 240 q 427 91 339 91 q 562 150 513 91 q 610 320 610 210 "},"7":{"x_min":97,"x_max":735,"ha":834,"o":"m 227 0 l 608 879 l 97 879 l 97 992 l 735 992 l 735 893 l 358 0 l 227 0 "},"8":{"x_min":106,"x_max":728,"ha":834,"o":"m 517 526 q 728 258 728 417 q 642 60 728 135 q 416 -14 557 -14 q 188 56 270 -14 q 106 253 106 126 q 297 520 106 428 q 138 770 138 619 q 216 943 138 879 q 416 1007 295 1007 q 618 942 541 1007 q 696 768 696 878 q 517 526 696 613 m 417 576 q 576 762 576 645 q 533 866 576 830 q 415 901 490 901 q 300 866 342 901 q 257 762 257 830 q 291 660 257 702 q 417 576 324 618 m 399 473 q 225 253 225 391 q 413 91 225 91 q 557 135 506 91 q 608 258 608 179 q 565 366 608 319 q 420 463 522 413 l 399 473 "},"9":{"x_min":104,"x_max":730,"ha":834,"o":"m 179 -1 l 179 104 q 291 82 224 82 q 518 178 442 82 q 601 483 595 274 l 593 483 q 385 368 528 368 q 178 448 253 368 q 104 670 104 528 q 185 916 104 826 q 405 1006 267 1006 q 642 889 555 1006 q 730 568 730 773 q 295 -14 730 -14 q 179 -1 224 -14 m 223 670 q 269 518 223 571 q 402 464 316 464 q 546 520 488 464 q 604 646 604 576 q 550 825 604 749 q 406 900 496 900 q 271 841 319 900 q 223 670 223 782 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 414 842 q 304 881 345 842 q 263 988 263 920 q 304 1094 263 1055 q 414 1134 345 1134 q 526 1093 482 1134 q 570 989 570 1053 q 526 882 570 922 q 414 842 483 842 m 416 1064 q 359 1044 381 1064 q 337 988 337 1024 q 416 911 337 911 q 473 931 451 911 q 495 988 495 951 q 473 1044 495 1024 q 416 1064 451 1064 m 347 1185 q 465 1389 411 1275 l 614 1389 l 614 1374 q 429 1167 537 1257 l 347 1167 l 347 1185 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 353 1089 q 471 1293 417 1179 l 620 1293 l 620 1278 q 435 1071 543 1161 l 353 1071 l 353 1089 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 1055 l 232 1055 l 232 741 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 m 652 1109 l 569 1109 q 426 1234 512 1146 q 283 1109 336 1142 l 202 1109 l 202 1127 q 242 1172 218 1146 q 361 1331 336 1277 l 492 1331 q 611 1172 517 1277 l 652 1127 l 652 1109 "},"":{"x_min":143,"x_max":813.25,"ha":834,"o":"m 813 0 l 669 0 l 364 473 l 269 396 l 269 0 l 143 0 l 143 992 l 269 992 l 269 496 l 351 609 l 659 992 l 801 992 l 447 559 l 813 0 "},"":{"x_min":134,"x_max":699,"ha":834,"o":"m 699 356 l 489 78 l 410 130 l 571 366 l 410 602 l 489 655 l 699 374 l 699 356 m 423 356 l 212 78 l 134 130 l 295 366 l 134 602 l 212 655 l 423 374 l 423 356 "},"":{"x_min":50,"x_max":784,"ha":834,"o":"m 50 76 l 353 992 l 479 992 l 784 75 l 784 0 l 50 0 l 50 76 m 478 625 q 415 856 438 749 q 355 629 384 720 l 185 111 l 646 111 l 478 625 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 m 684 1058 q 419 842 670 842 q 229 892 287 842 q 164 1058 170 942 l 280 1058 q 314 959 286 988 q 424 930 343 930 q 567 1058 555 930 l 684 1058 "},"":{"x_min":95,"x_max":696,"ha":834,"o":"m 692 101 l 692 7 q 521 -14 603 -14 q 276 218 276 -14 l 276 648 l 95 648 l 95 715 l 276 749 l 328 943 l 399 943 l 399 745 l 696 745 l 696 648 l 399 648 l 399 219 q 529 88 399 88 q 692 101 592 88 m 332 -288 q 389 -85 374 -193 l 510 -85 l 510 -98 q 477 -182 510 -113 q 399 -307 444 -251 l 332 -307 l 332 -288 "},"":{"x_min":134,"x_max":699,"ha":834,"o":"m 134 374 l 343 655 l 423 602 l 261 366 l 423 130 l 343 78 l 134 356 l 134 374 m 410 374 l 619 655 l 699 602 l 537 366 l 699 130 l 619 78 l 410 356 l 410 374 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 360 860 q 478 1064 424 950 l 627 1064 l 627 1049 q 442 842 550 932 l 360 842 l 360 860 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 m 309 -288 q 366 -85 351 -193 l 487 -85 l 487 -98 q 454 -182 487 -113 q 376 -307 421 -251 l 309 -307 l 309 -288 "},"":{"x_min":122,"x_max":712,"ha":834,"o":"m 245 264 q 393 88 245 88 q 541 150 494 88 q 588 357 588 211 l 588 745 l 712 745 l 712 0 l 612 0 l 593 99 l 587 99 q 386 -14 521 -14 q 241 45 291 -14 q 245 -117 245 -58 l 245 -334 l 122 -334 l 122 745 l 245 745 l 245 264 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 m 480 842 l 397 842 q 213 1049 285 938 l 213 1064 l 361 1064 q 480 860 420 943 l 480 842 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 "},"":{"x_min":-160,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m -160 789 l -137 861 q -108 993 -115 938 l 22 993 l 22 978 q -11 897 22 967 q -86 771 -44 827 l -160 771 l -160 789 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 "},"":{"x_min":82,"x_max":753,"ha":834,"o":"m 753 0 l 82 0 l 82 992 l 208 992 l 208 111 l 354 111 l 354 992 l 480 992 l 480 111 l 626 111 l 626 992 l 753 992 l 753 0 "},"M":{"x_min":77,"x_max":757,"ha":834,"o":"m 361 0 l 173 868 l 167 868 q 180 592 180 687 l 180 0 l 77 0 l 77 992 l 244 992 l 412 183 l 416 183 l 586 992 l 757 992 l 757 0 l 653 0 l 653 601 q 663 866 653 670 l 657 866 l 466 0 l 361 0 "},"":{"x_min":39,"x_max":797,"ha":834,"o":"m 797 667 q 720 387 797 472 q 494 303 644 303 l 483 303 l 483 0 l 357 0 l 357 303 l 346 303 q 115 388 192 303 q 39 664 39 473 l 39 992 l 165 992 l 165 667 q 208 460 165 511 q 346 410 252 410 l 357 410 l 357 992 l 483 992 l 483 410 l 493 410 q 628 459 585 410 q 670 664 670 508 l 670 992 l 797 992 l 797 667 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 245 841 l 174 841 q 317 1021 190 1021 q 426 982 356 1021 q 518 944 495 944 q 590 1022 573 944 l 662 1022 q 519 843 643 843 q 412 881 480 843 q 317 919 344 919 q 245 841 262 919 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 621 1030 q 560 892 614 943 q 414 842 506 842 q 213 1030 224 842 l 287 1030 q 319 960 292 977 q 416 943 346 943 q 546 1030 539 943 l 621 1030 "},"":{"x_min":-4,"x_max":838,"ha":834,"o":"m -4 315 l -4 429 l 838 429 l 838 315 l -4 315 "},"{":{"x_min":153,"x_max":679,"ha":834,"o":"m 505 -10 q 543 -91 505 -65 q 679 -118 581 -116 l 679 -220 q 382 -19 382 -215 l 382 208 q 153 337 382 337 l 153 439 q 382 567 382 439 l 382 793 q 679 992 382 987 l 679 890 q 543 863 581 888 q 505 783 505 838 l 505 559 q 347 391 505 419 l 347 383 q 505 214 505 355 l 505 -10 "},"":{"x_min":15,"x_max":823.71875,"ha":834,"o":"m 163 990 l 257 990 l 257 456 l 156 456 l 156 771 q 162 906 156 817 q 111 862 134 876 l 64 828 l 15 887 l 163 990 m 717 992 l 222 0 l 115 0 l 609 992 l 717 992 m 823 117 l 766 117 l 766 0 l 665 0 l 665 117 l 411 117 l 411 184 l 666 539 l 766 539 l 766 195 l 823 195 l 823 117 m 665 195 l 665 314 q 669 430 665 369 q 614 341 641 381 l 509 195 l 665 195 "},"":{"x_min":77,"x_max":757,"ha":834,"o":"m 361 0 l 173 868 l 167 868 q 180 592 180 687 l 180 0 l 77 0 l 77 992 l 244 992 l 412 183 l 416 183 l 586 992 l 757 992 l 757 0 l 653 0 l 653 601 q 663 866 653 670 l 657 866 l 466 0 l 361 0 m 352 1091 q 470 1295 416 1181 l 619 1295 l 619 1280 q 434 1073 542 1163 l 352 1073 l 352 1091 "},"":{"x_min":290,"x_max":690,"ha":834,"o":"m 413 745 l 413 220 q 544 88 413 88 q 690 101 621 88 l 690 7 q 536 -14 626 -14 q 290 219 290 -14 l 290 745 l 413 745 "},"":{"x_min":106,"x_max":719,"ha":834,"o":"m 106 0 l 106 992 l 232 992 l 232 0 l 106 0 m 334 15 l 334 125 q 460 93 397 93 q 592 286 592 93 l 592 992 l 719 992 l 719 295 q 471 -14 719 -14 q 334 15 380 -14 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 666 1071 l 583 1071 q 440 1196 526 1108 q 297 1071 350 1104 l 216 1071 l 216 1089 q 256 1134 232 1108 q 375 1293 350 1239 l 506 1293 q 625 1134 531 1239 l 666 1089 l 666 1071 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 25 789 l 47 861 q 76 993 69 938 l 207 993 l 207 978 q 173 897 207 967 q 98 771 140 827 l 25 771 l 25 789 "},")":{"x_min":201,"x_max":634,"ha":834,"o":"m 331 -220 l 202 -220 q 506 386 506 31 q 201 992 506 737 l 331 992 q 634 384 634 747 q 331 -220 634 18 "},"":{"x_min":136,"x_max":700.703125,"ha":834,"o":"m 570 439 l 570 336 l 462 336 q 259 210 259 336 q 450 88 259 88 q 698 145 583 88 l 698 36 q 441 -14 606 -14 q 217 43 298 -14 q 136 203 136 100 q 297 385 136 334 l 297 392 q 160 561 160 437 q 236 705 160 652 q 440 758 312 758 q 700 706 587 758 l 658 606 q 446 655 550 655 q 283 551 283 655 q 467 439 283 439 l 570 439 "},"":{"x_min":124.9375,"x_max":720,"ha":834,"o":"m 129 27 l 129 135 q 343 93 239 93 q 592 326 580 93 l 228 326 l 228 434 l 591 434 q 344 650 572 650 q 166 610 271 650 l 124 717 q 350 758 228 758 q 625 658 531 758 q 720 367 720 559 q 622 85 720 184 q 346 -14 525 -14 q 129 27 219 -14 "},"":{"x_min":85,"x_max":751,"ha":834,"o":"m 470 102 l 645 102 l 645 745 l 751 745 l 751 0 l 85 0 l 85 745 l 190 745 l 190 102 l 365 102 l 365 745 l 470 745 l 470 102 "},"":{"x_min":38.75,"x_max":707,"ha":834,"o":"m 414 409 l 187 0 l 38 0 l 297 443 q 113 720 113 510 q 454 992 113 992 l 707 992 l 707 0 l 580 0 l 580 409 l 414 409 m 580 884 l 454 884 q 246 710 246 884 q 301 567 246 617 q 460 517 356 517 l 580 517 l 580 884 "},"a":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 692 -217 l 692 -293 q 586 -309 642 -309 q 462 -271 505 -309 q 420 -171 420 -234 q 544 0 420 -73 l 636 0 q 517 -162 517 -85 q 606 -227 517 -227 q 692 -217 652 -227 "},"Z":{"x_min":69,"x_max":763,"ha":834,"o":"m 763 0 l 69 0 l 69 97 l 607 880 l 83 880 l 83 992 l 749 992 l 749 895 l 210 111 l 763 111 l 763 0 "},"":{"x_min":0,"x_max":0,"ha":834},"k":{"x_min":146,"x_max":789,"ha":834,"o":"m 261 375 l 352 478 l 619 745 l 770 745 l 435 422 l 789 0 l 644 0 l 356 341 l 269 286 l 269 0 l 146 0 l 146 1055 l 269 1055 l 269 571 l 258 375 l 261 375 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 504 1071 l 421 1071 q 237 1278 309 1167 l 237 1293 l 385 1293 q 504 1089 444 1172 l 504 1071 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 415 1071 q 305 1110 346 1071 q 264 1217 264 1149 q 305 1323 264 1284 q 415 1363 346 1363 q 527 1322 483 1363 q 571 1218 571 1282 q 527 1111 571 1151 q 415 1071 484 1071 m 417 1293 q 360 1273 382 1293 q 338 1217 338 1253 q 417 1140 338 1140 q 474 1160 452 1140 q 496 1217 496 1180 q 474 1273 496 1253 q 417 1293 452 1293 "},"":{"x_min":117,"x_max":719.890625,"ha":834,"o":"m 531 894 q 719 854 627 892 l 677 747 q 496 786 576 786 q 244 505 244 786 q 489 229 244 229 q 707 271 593 229 l 707 163 q 531 122 635 124 l 531 -14 l 411 -14 l 411 126 q 117 503 117 172 q 411 889 117 838 l 411 1006 l 531 1006 l 531 894 "},"":{"x_min":92,"x_max":772,"ha":834,"o":"m 92 992 l 390 992 q 660 932 576 992 q 744 740 744 873 q 690 596 744 653 q 546 526 637 538 l 546 519 q 772 287 772 482 q 685 76 772 153 q 449 0 598 0 l 92 0 l 92 992 m 218 572 l 409 572 q 562 609 514 572 q 610 732 610 646 q 558 848 610 813 q 395 884 507 884 l 218 884 l 218 572 m 218 464 l 218 107 l 426 107 q 638 292 638 107 q 418 464 638 464 l 218 464 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 235 943 l 626 943 l 626 842 l 235 842 l 235 943 "},"":{"x_min":107,"x_max":749,"ha":834,"o":"m 490 562 l 490 558 q 749 280 749 525 q 665 63 749 141 q 436 -14 582 -14 q 230 28 309 -14 l 230 -334 l 107 -334 l 107 743 q 187 979 107 896 q 409 1063 268 1063 q 623 991 543 1063 q 704 796 704 920 q 649 642 704 704 q 490 562 594 580 m 230 141 q 426 88 322 88 q 625 290 625 88 q 561 445 625 389 q 388 501 496 501 l 325 501 l 325 604 l 372 604 q 522 654 467 604 q 576 791 576 705 q 531 915 576 871 q 408 960 485 960 q 230 736 230 960 l 230 141 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 271 300 l 103 300 l 103 401 l 318 401 l 401 577 l 103 577 l 103 679 l 448 679 l 539 870 l 632 830 l 560 679 l 730 679 l 730 577 l 513 577 l 430 401 l 730 401 l 730 300 l 382 300 l 294 111 l 202 150 l 271 300 "},"":{"x_min":173,"x_max":659.265625,"ha":834,"o":"m 615 280 l 533 280 l 498 992 l 649 992 l 615 280 m 573 168 q 659 74 659 168 q 573 -20 659 -20 q 487 74 487 -20 q 573 168 487 168 m 301 280 l 219 280 l 184 992 l 335 992 l 301 280 m 259 168 q 345 74 345 168 q 259 -20 345 -20 q 173 74 173 -20 q 259 168 173 168 "},"":{"x_min":54,"x_max":779,"ha":834,"o":"m 415 490 l 649 992 l 779 992 l 517 471 l 681 471 l 681 378 l 475 378 l 475 270 l 681 270 l 681 178 l 475 178 l 475 0 l 356 0 l 356 178 l 152 178 l 152 270 l 356 270 l 356 378 l 152 378 l 152 471 l 310 471 l 54 992 l 184 992 l 415 490 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 992 l 218 992 l 218 574 l 615 574 l 615 992 l 742 992 l 742 0 m 642 1071 l 559 1071 q 416 1196 502 1108 q 273 1071 326 1104 l 192 1071 l 192 1089 q 232 1134 208 1108 q 351 1293 326 1239 l 482 1293 q 601 1134 507 1239 l 642 1089 l 642 1071 "},"U":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 m 246 1070 l 175 1070 q 318 1250 191 1250 q 427 1211 357 1250 q 519 1173 496 1173 q 591 1251 574 1173 l 663 1251 q 520 1072 644 1072 q 413 1110 481 1072 q 318 1148 345 1148 q 246 1070 263 1148 "},"F":{"x_min":165,"x_max":736,"ha":834,"o":"m 291 0 l 165 0 l 165 992 l 736 992 l 736 880 l 291 880 l 291 531 l 710 531 l 710 419 l 291 419 l 291 0 "},"":{"x_min":7.125,"x_max":815.203125,"ha":834,"o":"m 594 662 q 565 794 585 736 q 520 892 546 852 q 463 953 494 932 q 399 974 432 974 q 318 943 348 974 q 289 864 289 913 q 305 789 289 825 q 356 725 320 753 q 451 680 392 697 q 594 662 509 662 m 722 573 q 724 538 723 558 q 725 497 725 518 q 703 295 725 388 q 637 133 681 201 q 527 25 594 64 q 372 -14 461 -14 q 247 4 297 -14 q 169 55 198 23 q 128 130 140 87 q 117 219 117 172 q 120 278 117 247 q 127 340 123 310 q 134 396 131 370 q 137 438 137 421 q 127 479 137 468 q 95 491 117 491 q 61 485 79 491 q 32 474 43 480 l 7 559 q 66 579 32 570 q 136 588 100 588 q 193 578 169 588 q 231 551 216 568 q 252 511 245 534 q 258 461 258 488 q 255 408 258 437 q 248 347 251 379 q 241 283 244 316 q 237 219 237 250 q 244 165 237 191 q 268 122 252 140 q 311 93 284 104 q 377 82 338 82 q 545 187 489 82 q 601 501 601 292 q 600 538 601 516 q 598 573 600 559 q 398 599 480 574 q 265 665 316 625 q 191 757 214 705 q 169 864 169 809 q 182 947 169 909 q 222 1012 195 984 q 293 1055 250 1040 q 396 1071 336 1071 q 521 1042 466 1071 q 615 960 576 1013 q 680 832 655 907 q 718 662 706 756 l 815 662 l 815 573 l 722 573 "},"":{"x_min":143,"x_max":813.25,"ha":834,"o":"m 813 0 l 664 0 l 269 502 l 269 0 l 143 0 l 143 992 l 269 992 l 269 511 l 654 992 l 794 992 l 409 515 l 813 0 m 390 1089 q 508 1293 454 1179 l 657 1293 l 657 1278 q 472 1071 580 1161 l 390 1071 l 390 1089 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 413 842 q 303 881 344 842 q 262 988 262 920 q 303 1094 262 1055 q 413 1134 344 1134 q 525 1093 481 1134 q 569 989 569 1053 q 525 882 569 922 q 413 842 482 842 m 415 1064 q 358 1044 380 1064 q 336 988 336 1024 q 415 911 336 911 q 472 931 450 911 q 494 988 494 951 q 472 1044 494 1024 q 415 1064 450 1064 "},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 221 943 l 612 943 l 612 842 l 221 842 l 221 943 "},"":{"x_min":158,"x_max":674,"ha":834,"o":"m 375 992 l 385 977 q 265 652 347 832 l 158 652 q 224 992 200 832 l 375 992 m 664 992 l 674 977 q 554 652 636 832 l 447 652 q 513 992 489 832 l 664 992 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 285 1015 q 350 945 350 1015 q 285 876 350 876 q 220 945 220 876 q 285 1015 220 1015 m 539 1015 q 605 945 605 1015 q 539 876 605 876 q 474 945 474 876 q 539 1015 474 1015 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 m 392 860 q 510 1064 456 950 l 659 1064 l 659 1049 q 474 842 582 932 l 392 842 l 392 860 "},"":{"x_min":107,"x_max":741,"ha":834,"o":"m 230 644 q 449 758 305 758 q 663 656 585 758 q 741 373 741 555 q 662 88 741 190 q 449 -14 584 -14 q 230 93 308 -14 l 222 93 q 230 -16 230 6 l 230 -334 l 107 -334 l 107 1055 l 230 1055 l 230 744 l 225 644 l 230 644 m 230 401 l 230 373 q 277 153 230 219 q 428 88 325 88 q 613 374 613 88 q 427 655 613 655 q 278 595 323 655 q 230 401 233 536 "},"]":{"x_min":196,"x_max":555,"ha":834,"o":"m 196 -118 l 431 -118 l 431 890 l 196 890 l 196 992 l 555 992 l 555 -220 l 196 -220 l 196 -118 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 "},"":{"x_min":336,"x_max":496.734375,"ha":834,"o":"m 496 992 l 468 634 l 363 634 l 336 992 l 496 992 "},"":{"x_min":65,"x_max":769,"ha":834,"o":"m 65 0 l 65 992 l 191 992 l 191 574 l 221 574 q 573 290 573 574 q 484 74 573 149 q 226 0 395 0 l 65 0 m 191 107 l 240 107 q 456 290 456 107 q 401 421 456 380 q 221 462 347 462 l 191 462 l 191 107 m 652 0 l 652 992 l 769 992 l 769 0 l 652 0 "},"":{"x_min":-3,"x_max":836,"ha":834,"o":"m 551 0 l 462 404 l 416 628 l 411 628 l 367 401 l 276 0 l 148 0 l -3 745 l 106 745 l 173 376 q 212 109 196 250 l 216 109 q 262 352 237 235 l 352 745 l 483 745 l 569 352 q 614 109 598 220 l 619 109 q 659 376 640 274 l 728 745 l 836 745 l 683 0 l 551 0 m 473 842 l 390 842 q 206 1049 278 938 l 206 1064 l 354 1064 q 473 860 413 943 l 473 842 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 639 1030 q 578 892 632 943 q 432 842 524 842 q 231 1030 242 842 l 305 1030 q 337 960 310 977 q 434 943 364 943 q 564 1030 557 943 l 639 1030 "},"R":{"x_min":126,"x_max":794.25,"ha":834,"o":"m 252 409 l 252 0 l 126 0 l 126 992 l 368 992 q 721 710 721 992 q 524 443 721 515 l 794 0 l 645 0 l 407 409 l 252 409 m 252 517 l 362 517 q 532 561 478 517 q 587 704 587 606 q 533 842 587 800 q 359 884 479 884 l 252 884 l 252 517 "},"":{"x_min":69,"x_max":763,"ha":834,"o":"m 763 0 l 69 0 l 69 97 l 607 880 l 83 880 l 83 992 l 749 992 l 749 895 l 210 111 l 763 111 l 763 0 m 434 1252 q 499 1174 499 1252 q 434 1097 499 1097 q 369 1174 369 1097 q 434 1252 369 1252 "},"":{"x_min":3.203125,"x_max":725,"ha":834,"o":"m 601 0 l 601 451 q 441 627 601 627 q 282 564 332 627 q 232 357 232 500 l 232 0 l 109 0 l 109 843 l 3 843 l 3 932 l 109 932 l 109 1055 l 233 1055 l 233 932 l 516 932 l 516 843 l 232 843 l 232 715 l 225 616 l 232 616 q 466 730 305 730 q 660 665 596 730 q 725 458 725 600 l 725 0 l 601 0 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 244 841 l 173 841 q 316 1021 189 1021 q 425 982 355 1021 q 517 944 494 944 q 589 1022 572 944 l 661 1022 q 518 843 642 843 q 411 881 479 843 q 316 919 343 919 q 244 841 261 919 "},"":{"x_min":359.25,"x_max":489.46875,"ha":834,"o":"m 424 1023 q 489 945 489 1023 q 424 868 489 868 q 359 945 359 868 q 424 1023 359 1023 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 653 842 l 570 842 q 427 967 513 879 q 284 842 337 875 l 203 842 l 203 860 q 243 905 219 879 q 362 1064 337 1010 l 493 1064 q 612 905 518 1010 l 653 860 l 653 842 "},"":{"x_min":193,"x_max":640.734375,"ha":834,"o":"m 353 992 l 325 634 l 220 634 l 193 992 l 353 992 m 640 992 l 612 634 l 507 634 l 480 992 l 640 992 "},"":{"x_min":166,"x_max":667,"ha":834,"o":"m 367 161 l 378 145 q 258 -179 340 1 l 166 -179 q 217 161 202 18 l 367 161 m 656 161 l 667 145 q 547 -179 632 12 l 455 -179 q 506 161 491 18 l 656 161 "},"":{"x_min":103,"x_max":720,"ha":834,"o":"m 226 745 l 226 466 q 365 348 226 348 q 596 426 481 348 l 596 745 l 720 745 l 720 0 l 596 0 l 596 331 q 337 246 473 246 q 166 305 229 246 q 103 458 103 364 l 103 745 l 226 745 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 378 636 q 206 872 206 734 q 267 1012 206 962 q 437 1063 329 1063 q 704 989 572 1063 l 654 890 q 434 960 541 960 q 355 936 384 960 q 326 868 326 911 q 354 791 326 825 q 499 689 383 756 q 742 337 742 549 q 654 78 742 170 q 413 -14 566 -14 q 180 69 269 -14 q 92 296 92 153 q 378 636 92 549 m 464 579 q 219 294 219 511 q 271 145 219 202 q 412 88 323 88 q 614 325 614 88 q 464 579 614 491 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 642 1071 l 559 1071 q 416 1196 502 1108 q 273 1071 326 1104 l 192 1071 l 192 1089 q 232 1134 208 1108 q 351 1293 326 1239 l 482 1293 q 601 1134 507 1239 l 642 1089 l 642 1071 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 558 -217 l 558 -293 q 452 -309 508 -309 q 328 -271 371 -309 q 286 -171 286 -234 q 410 0 286 -73 l 502 0 q 383 -162 383 -85 q 472 -227 383 -227 q 558 -217 518 -227 "},"":{"x_min":61,"x_max":774,"ha":834,"o":"m 132 745 l 244 745 q 166 360 166 567 q 266 88 166 88 q 341 136 314 88 q 368 270 368 184 l 368 478 l 473 478 l 473 270 q 501 135 473 182 q 572 88 528 88 q 668 360 668 88 q 590 745 668 568 l 702 745 q 774 360 774 569 q 579 -14 774 -14 q 424 106 458 -14 l 417 106 q 258 -14 382 -14 q 61 360 61 -14 q 132 745 61 565 "},"":{"x_min":69,"x_max":762,"ha":834,"o":"m 479 0 l 353 0 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 0 m 304 -288 q 361 -85 346 -193 l 482 -85 l 482 -98 q 449 -182 482 -113 q 371 -307 416 -251 l 304 -307 l 304 -288 "},"":{"x_min":284,"x_max":551,"ha":834,"o":"m 284 860 q 402 1064 348 950 l 551 1064 l 551 1049 q 366 842 474 932 l 284 842 l 284 860 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 m 751 1071 l 668 1071 q 525 1196 611 1108 q 382 1071 435 1104 l 301 1071 l 301 1089 q 341 1134 317 1108 q 460 1293 435 1239 l 591 1293 q 710 1134 616 1239 l 751 1089 l 751 1071 "},"":{"x_min":93,"x_max":742,"ha":834,"o":"m 93 992 l 209 992 l 209 449 q 204 276 209 352 l 200 174 l 204 174 l 597 992 l 742 992 l 742 0 l 625 0 l 625 538 q 637 821 625 633 l 632 821 l 237 0 l 93 0 l 93 992 "},"":{"x_min":0,"x_max":820,"ha":834,"o":"m 256 880 l 242 508 q 185 52 228 119 q 65 -14 142 -14 q 0 -1 27 -14 l 0 96 q 46 82 21 82 q 88 106 70 82 q 114 193 106 130 q 137 551 123 256 q 153 992 150 846 l 504 992 l 504 574 l 529 574 q 820 290 820 574 q 742 74 820 149 q 518 0 665 0 l 378 0 l 378 880 l 256 880 m 504 107 l 532 107 q 703 290 703 107 q 659 421 703 381 q 516 462 615 462 l 504 462 l 504 107 "},"":{"x_min":107,"x_max":741,"ha":834,"o":"m 230 93 l 222 93 q 230 -16 230 6 l 230 -334 l 107 -334 l 107 745 l 206 745 l 225 644 l 230 644 q 449 758 305 758 q 663 656 585 758 q 741 373 741 555 q 662 88 741 190 q 449 -14 584 -14 q 230 93 308 -14 m 230 401 l 230 373 q 277 153 230 219 q 428 88 325 88 q 613 374 613 88 q 427 655 613 655 q 278 595 323 655 q 230 401 233 536 "},"":{"x_min":49.859375,"x_max":786.140625,"ha":834,"o":"m 367 99 l 367 0 l 49 0 l 49 111 l 230 111 q 58 559 58 270 q 153 889 58 771 q 417 1007 248 1007 q 682 889 587 1007 q 778 559 778 771 q 604 111 778 268 l 786 111 l 786 0 l 468 0 l 468 99 q 644 556 644 256 q 417 895 644 895 q 191 556 191 895 q 367 99 191 256 "},"":{"x_min":82,"x_max":749,"ha":834,"o":"m 749 642 l 477 642 l 477 0 l 354 0 l 354 642 l 82 642 l 82 745 l 749 745 l 749 642 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 880 l 218 880 l 218 0 l 92 0 l 92 992 l 742 992 l 742 0 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"z":{"x_min":123,"x_max":709,"ha":834,"o":"m 709 0 l 123 0 l 123 88 l 572 648 l 145 648 l 145 745 l 697 745 l 697 641 l 256 96 l 709 96 l 709 0 "},"":{"x_min":-0.375,"x_max":801,"ha":834,"o":"m 205 503 l 119 503 l 119 918 l 0 918 l 0 992 l 326 992 l 326 918 l 205 918 l 205 503 m 542 503 l 444 875 l 436 875 l 443 753 l 443 503 l 357 503 l 357 992 l 486 992 l 579 629 l 679 992 l 801 992 l 801 503 l 714 503 l 714 734 q 721 875 714 793 l 713 875 l 609 503 l 542 503 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 278 560 l 557 560 l 557 452 l 278 452 l 278 560 "},"":{"x_min":126,"x_max":794.25,"ha":834,"o":"m 252 409 l 252 0 l 126 0 l 126 992 l 368 992 q 721 710 721 992 q 524 443 721 515 l 794 0 l 645 0 l 407 409 l 252 409 m 252 517 l 362 517 q 532 561 478 517 q 587 704 587 606 q 533 842 587 800 q 359 884 479 884 l 252 884 l 252 517 m 622 1274 q 581 1229 605 1255 q 462 1071 486 1122 l 331 1071 q 212 1229 307 1122 l 172 1274 l 172 1293 l 253 1293 q 396 1166 309 1256 q 539 1293 479 1253 l 622 1293 l 622 1274 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 m 640 1274 q 599 1229 623 1255 q 480 1071 504 1122 l 349 1071 q 230 1229 325 1122 l 190 1274 l 190 1293 l 271 1293 q 414 1166 327 1256 q 557 1293 497 1253 l 640 1293 l 640 1274 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 326 1089 q 444 1293 390 1179 l 593 1293 l 593 1278 q 408 1071 516 1161 l 326 1071 l 326 1089 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 229 745 l 229 291 l 220 120 l 562 745 l 725 745 l 725 0 l 604 0 l 604 439 l 611 622 l 271 0 l 109 0 l 109 745 l 229 745 "},"":{"x_min":232,"x_max":574,"ha":834,"o":"m 454 738 q 574 611 574 711 q 523 487 574 531 q 377 444 472 444 q 232 477 289 444 l 232 562 q 370 522 307 522 q 472 614 472 522 q 371 699 472 699 l 322 699 l 322 768 l 369 768 q 454 851 454 768 q 388 924 454 924 q 278 880 339 924 l 233 938 q 394 1002 308 1002 q 512 965 468 1002 q 556 865 556 928 q 454 738 556 771 "},"[":{"x_min":279,"x_max":638,"ha":834,"o":"m 638 -220 l 279 -220 l 279 992 l 638 992 l 638 890 l 402 890 l 402 -118 l 638 -118 l 638 -220 "},"":{"x_min":110,"x_max":724,"ha":834,"o":"m 151 1055 l 720 1055 l 720 960 q 344 631 451 765 q 237 323 237 497 q 293 175 237 219 q 505 105 350 132 q 672 51 621 85 q 724 -58 724 16 q 641 -272 724 -159 l 526 -272 q 603 -95 603 -162 q 568 -35 603 -57 q 403 6 534 -12 q 180 106 250 30 q 110 318 110 181 q 219 642 110 492 q 583 960 328 793 q 344 952 437 952 l 151 952 l 151 1055 "},"":{"x_min":106,"x_max":755,"ha":834,"o":"m 628 -334 l 628 880 l 232 880 l 232 -334 l 106 -334 l 106 992 l 755 992 l 755 -334 l 628 -334 "},"":{"x_min":-76,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m -76 789 l -53 861 q -24 993 -31 938 l 106 993 l 106 978 q 72 897 106 967 q -2 771 39 827 l -76 771 l -76 789 "},"":{"x_min":119,"x_max":742,"ha":834,"o":"m 245 385 l 245 0 l 119 0 l 119 992 l 393 992 q 742 701 742 992 q 647 468 742 552 q 374 385 553 385 l 245 385 m 245 493 l 359 493 q 550 541 493 493 q 608 694 608 590 q 380 884 608 884 l 245 884 l 245 493 "},"":{"x_min":70,"x_max":763.84375,"ha":834,"o":"m 763 745 l 763 668 l 630 650 q 675 506 675 592 q 602 333 675 397 q 401 269 530 269 q 343 273 364 269 q 275 182 275 234 q 384 125 275 125 l 511 125 q 691 72 629 125 q 754 -77 754 20 q 371 -334 754 -334 q 146 -278 223 -334 q 70 -123 70 -223 q 232 61 70 22 q 167 165 167 93 q 257 293 167 240 q 162 376 197 318 q 128 502 128 434 q 200 691 128 625 q 405 758 272 758 q 507 745 464 758 l 763 745 m 402 353 q 554 508 554 353 q 401 669 554 669 q 248 506 248 669 q 402 353 248 353 m 469 17 l 342 17 q 186 -118 186 17 q 370 -237 186 -237 q 637 -84 637 -237 q 603 -3 637 -24 q 469 17 569 17 m 612 1030 q 551 892 605 943 q 405 842 497 842 q 204 1030 215 842 l 278 1030 q 310 960 283 977 q 407 943 337 943 q 537 1030 530 943 l 612 1030 "},"":{"x_min":187,"x_max":616,"ha":834,"o":"m 539 541 l 516 622 q 336 532 446 532 q 187 671 187 532 q 244 784 187 749 q 430 823 301 819 l 514 827 l 514 833 q 412 925 514 925 q 247 889 336 925 l 219 963 q 418 1003 313 1003 q 616 841 616 1003 l 616 541 l 539 541 m 446 757 q 329 738 369 755 q 288 670 288 720 q 358 610 288 610 q 472 646 429 610 q 514 745 514 683 l 514 758 l 446 757 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 289 1015 q 354 945 354 1015 q 289 876 354 876 q 224 945 224 876 q 289 1015 224 1015 m 543 1015 q 609 945 609 1015 q 543 876 609 876 q 478 945 478 876 q 543 1015 478 1015 "},"T":{"x_min":69,"x_max":762,"ha":834,"o":"m 479 0 l 353 0 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 0 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 m 649 1045 q 608 1000 632 1026 q 489 842 513 893 l 358 842 q 239 1000 334 893 l 199 1045 l 199 1064 l 280 1064 q 423 937 336 1027 q 566 1064 506 1024 l 649 1064 l 649 1045 "},"":{"x_min":117,"x_max":719.890625,"ha":834,"o":"m 719 717 l 677 610 q 500 650 576 650 q 245 434 266 650 l 609 434 l 609 326 l 244 326 q 494 93 258 93 q 707 135 597 93 l 707 27 q 490 -14 616 -14 q 213 85 310 -14 q 117 367 117 184 q 215 658 117 559 q 496 758 314 758 q 719 717 616 758 "},"":{"x_min":119,"x_max":742,"ha":834,"o":"m 245 215 l 245 0 l 119 0 l 119 992 l 245 992 l 245 821 l 393 821 q 742 530 742 821 q 647 298 742 381 q 374 215 553 215 l 245 215 m 245 322 l 359 322 q 550 371 493 322 q 608 524 608 420 q 380 713 608 713 l 245 713 l 245 322 "},"j":{"x_min":92,"x_max":580,"ha":834,"o":"m 504 1051 q 577 973 577 1051 q 504 896 577 896 q 432 973 432 896 q 504 1051 432 1051 m 92 -310 l 92 -205 q 288 -231 182 -231 q 412 -192 367 -231 q 456 -85 456 -154 l 456 648 l 171 662 l 171 745 l 580 745 l 580 -79 q 503 -267 580 -201 q 286 -334 426 -334 q 92 -310 175 -334 "},"":{"x_min":89,"x_max":744,"ha":834,"o":"m 89 0 l 89 103 l 370 519 l 97 892 l 97 992 l 703 992 l 703 880 l 241 880 l 505 520 l 228 111 l 744 111 l 744 0 l 89 0 "},"":{"x_min":21,"x_max":818.3125,"ha":834,"o":"m 414 496 q 456 603 431 546 q 508 715 482 660 q 559 815 535 769 q 600 892 584 862 q 631 940 615 919 q 665 974 646 960 q 705 994 683 987 q 754 1000 726 1000 q 792 997 777 1000 q 818 989 806 994 l 818 890 q 798 894 810 892 q 779 896 787 896 q 739 880 760 896 q 694 823 718 864 q 670 781 686 809 q 635 715 654 753 q 593 634 615 678 q 549 544 570 591 q 509 453 528 498 q 477 367 490 407 l 477 0 l 351 0 l 351 379 l 21 992 l 158 992 l 414 496 "},"":{"x_min":154,"x_max":678,"ha":834,"o":"m 584 225 l 678 225 q 483 -14 665 -14 q 337 49 389 -14 q 285 232 285 112 l 285 393 q 154 354 226 372 l 154 429 q 285 469 202 442 l 285 803 q 331 952 285 898 q 468 1006 377 1006 q 585 950 542 1006 q 628 804 628 895 q 404 443 628 567 l 404 235 q 491 82 404 82 q 584 225 578 82 m 404 524 q 534 798 534 605 q 469 925 534 925 q 420 897 436 925 q 404 798 404 870 l 404 524 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 m 699 842 l 616 842 q 473 967 559 879 q 330 842 383 875 l 249 842 l 249 860 q 289 905 265 879 q 408 1064 383 1010 l 539 1064 q 658 905 564 1010 l 699 860 l 699 842 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 221 943 l 612 943 l 612 842 l 221 842 l 221 943 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 "},"":{"x_min":117,"x_max":724,"ha":834,"o":"m 668 601 l 668 512 l 531 512 q 318 456 391 512 q 244 298 244 400 q 270 200 244 236 q 343 145 296 164 q 511 104 390 126 q 672 50 621 84 q 724 -58 724 16 q 638 -272 724 -159 l 521 -272 q 603 -94 603 -162 q 570 -36 603 -58 q 410 5 536 -14 q 117 286 117 51 q 168 449 117 377 q 308 550 219 521 l 308 558 q 163 747 163 598 q 213 875 163 824 q 390 960 264 926 q 200 952 270 952 l 158 952 l 158 1055 l 677 1055 l 677 952 l 630 952 q 383 898 483 952 q 283 748 283 843 q 345 636 283 671 q 539 601 407 601 l 668 601 "},"":{"x_min":92,"x_max":778,"ha":834,"o":"m 92 0 l 92 992 l 323 992 q 658 863 538 992 q 778 505 778 735 q 653 130 778 260 q 296 0 529 0 l 92 0 m 218 884 l 218 107 l 283 107 q 644 501 644 107 q 309 884 644 884 l 218 884 m 637 1274 q 596 1229 620 1255 q 477 1071 501 1122 l 346 1071 q 227 1229 322 1122 l 187 1274 l 187 1293 l 268 1293 q 411 1166 324 1256 q 554 1293 494 1253 l 637 1293 l 637 1274 "},"&":{"x_min":41,"x_max":833,"ha":834,"o":"m 410 525 l 600 290 q 671 470 648 371 l 795 470 q 674 197 759 311 l 833 0 l 685 0 l 596 112 q 316 -14 478 -14 q 114 58 188 -14 q 41 258 41 131 q 84 413 41 347 q 243 548 127 479 q 133 790 133 678 q 197 948 133 890 q 384 1007 262 1007 q 562 948 499 1007 q 625 789 625 890 q 410 525 625 652 m 346 607 q 468 701 435 661 q 501 792 501 741 q 468 873 501 842 q 381 904 435 904 q 289 874 322 904 q 256 789 256 844 q 346 607 256 709 m 528 194 l 308 466 q 168 261 168 382 q 214 141 168 189 q 323 93 260 93 q 528 194 433 93 "},"G":{"x_min":79,"x_max":742,"ha":834,"o":"m 455 524 l 742 524 l 742 36 q 456 -14 609 -14 q 179 121 279 -14 q 79 497 79 256 q 188 870 79 735 q 491 1006 298 1006 q 726 947 621 1006 l 677 837 q 487 894 578 894 q 285 789 357 894 q 212 496 212 683 q 479 97 212 97 q 615 116 544 97 l 615 412 l 455 412 l 455 524 "},"":{"x_min":109,"x_max":735,"ha":834,"o":"m 109 745 l 232 745 l 232 345 q 418 88 232 88 q 565 167 520 88 q 611 412 611 245 q 568 745 611 573 l 691 745 q 735 406 735 578 q 657 88 735 191 q 414 -14 579 -14 q 109 337 109 -14 l 109 745 m 359 959 q 412 1164 388 1054 l 561 1164 l 561 1150 q 414 942 497 1039 l 359 942 l 359 959 m 265 1015 q 331 945 331 1015 q 312 894 331 912 q 265 876 293 876 q 201 945 201 876 q 265 1015 201 1015 m 562 1015 q 628 945 628 1015 q 562 876 628 876 q 497 945 497 876 q 562 1015 497 1015 "},"`":{"x_min":284,"x_max":551,"ha":834,"o":"m 551 842 l 468 842 q 284 1049 356 938 l 284 1064 l 432 1064 q 551 860 491 943 l 551 842 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 621 1030 q 560 892 614 943 q 414 842 506 842 q 213 1030 224 842 l 287 1030 q 319 960 292 977 q 416 943 346 943 q 546 1030 539 943 l 621 1030 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 m 335 860 q 453 1064 399 950 l 602 1064 l 602 1049 q 417 842 525 932 l 335 842 l 335 860 "},"":{"x_min":191,"x_max":643,"ha":834,"o":"m 415 532 q 254 595 317 532 q 191 768 191 658 q 251 940 191 878 q 418 1003 312 1003 q 579 940 516 1003 q 643 768 643 877 q 580 594 643 656 q 415 532 518 532 m 417 613 q 541 769 541 613 q 417 921 541 921 q 292 769 292 921 q 417 613 292 613 "},"":{"x_min":47,"x_max":785,"ha":834,"o":"m 411 421 q 228 277 332 277 q 97 335 147 277 q 47 490 47 394 q 97 642 47 581 q 228 704 147 704 q 413 555 340 704 q 604 699 492 699 q 735 641 685 699 q 785 486 785 583 q 733 334 785 397 q 604 272 681 272 q 411 421 488 272 m 365 490 q 238 611 310 611 q 168 576 195 611 q 141 489 141 540 q 168 403 141 436 q 239 369 195 369 q 365 490 308 369 m 461 486 q 592 365 519 365 q 663 400 636 365 q 690 487 690 436 q 661 573 690 539 q 590 607 633 607 q 461 486 520 607 "},"":{"x_min":123,"x_max":709,"ha":834,"o":"m 709 0 l 123 0 l 123 88 l 572 648 l 145 648 l 145 745 l 697 745 l 697 641 l 256 96 l 709 96 l 709 0 m 336 860 q 454 1064 400 950 l 603 1064 l 603 1049 q 418 842 526 932 l 336 842 l 336 860 "},"":{"x_min":77.75,"x_max":702,"ha":834,"o":"m 212 0 l 77 0 l 275 315 q 117 527 117 360 q 186 686 117 628 q 372 745 255 745 l 702 745 l 702 0 l 578 0 l 578 295 l 385 295 l 212 0 m 578 398 l 578 642 l 381 642 q 240 525 240 642 q 399 398 240 398 l 578 398 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 306 1244 q 371 1174 371 1244 q 306 1105 371 1105 q 241 1174 241 1105 q 306 1244 241 1244 m 560 1244 q 626 1174 626 1244 q 560 1105 626 1105 q 495 1174 495 1105 q 560 1244 495 1244 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 m 359 860 q 477 1064 423 950 l 626 1064 l 626 1049 q 441 842 549 932 l 359 842 l 359 860 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":158,"x_max":719,"ha":834,"o":"m 719 992 l 719 880 l 284 880 l 284 0 l 158 0 l 158 992 l 719 992 "},"":{"x_min":119,"x_max":742,"ha":834,"o":"m 119 0 l 119 992 l 245 992 l 245 574 l 374 574 q 742 290 742 574 q 652 74 742 149 q 393 0 563 0 l 119 0 m 245 107 l 380 107 q 608 290 608 107 q 550 421 608 380 q 359 462 493 462 l 245 462 l 245 107 "},"":{"x_min":118.59375,"x_max":716.0625,"ha":834,"o":"m 206 634 l 118 721 l 185 788 l 271 700 q 416 747 339 747 q 561 700 494 747 l 648 788 l 716 723 l 628 635 q 674 489 674 567 q 628 343 674 408 l 714 257 l 648 192 l 561 278 q 416 234 494 234 q 271 280 336 234 l 185 193 l 119 259 l 206 345 q 162 489 162 409 q 206 634 162 567 m 416 326 q 531 374 483 326 q 579 489 579 421 q 531 605 579 557 q 416 654 483 654 q 303 606 350 654 q 256 489 256 558 q 303 374 256 421 q 416 326 350 326 "},"":{"x_min":79,"x_max":742,"ha":834,"o":"m 455 524 l 742 524 l 742 36 q 456 -14 609 -14 q 179 121 279 -14 q 79 497 79 256 q 188 870 79 735 q 491 1006 298 1006 q 726 947 621 1006 l 677 837 q 487 894 578 894 q 285 789 357 894 q 212 496 212 683 q 479 97 212 97 q 615 116 544 97 l 615 412 l 455 412 l 455 524 m 696 1071 l 613 1071 q 470 1196 556 1108 q 327 1071 380 1104 l 246 1071 l 246 1089 q 286 1134 262 1108 q 405 1293 380 1239 l 536 1293 q 655 1134 561 1239 l 696 1089 l 696 1071 "},"p":{"x_min":107,"x_max":741,"ha":834,"o":"m 230 93 l 222 93 q 230 -16 230 6 l 230 -334 l 107 -334 l 107 745 l 206 745 l 225 644 l 230 644 q 449 758 305 758 q 663 656 585 758 q 741 373 741 555 q 662 88 741 190 q 449 -14 584 -14 q 230 93 308 -14 m 230 401 l 230 373 q 277 153 230 219 q 428 88 325 88 q 613 374 613 88 q 427 655 613 655 q 278 595 323 655 q 230 401 233 536 "},"":{"x_min":66,"x_max":787,"ha":834,"o":"m 273 462 l 192 462 l 192 0 l 66 0 l 66 992 l 192 992 l 192 574 l 276 574 q 348 908 288 810 q 532 1007 407 1007 q 724 887 662 1007 q 787 496 787 767 q 724 106 787 227 q 530 -14 661 -14 q 340 92 401 -14 q 273 462 279 199 m 530 97 q 637 176 604 97 q 670 497 670 255 q 636 818 670 741 q 530 895 603 895 q 422 815 455 895 q 389 497 389 735 q 422 179 389 261 q 530 97 454 97 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 "},"S":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 "},"/":{"x_min":143,"x_max":690,"ha":834,"o":"m 690 992 l 263 0 l 143 0 l 569 992 l 690 992 "},"":{"x_min":69,"x_max":762,"ha":834,"o":"m 353 556 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 556 l 679 556 l 679 448 l 479 448 l 479 0 l 353 0 l 353 448 l 151 448 l 151 556 l 353 556 "},"":{"x_min":3.203125,"x_max":725,"ha":834,"o":"m 438 -317 l 438 -216 q 515 -231 474 -231 q 601 -115 601 -231 l 601 451 q 441 627 601 627 q 282 564 332 627 q 232 357 232 500 l 232 0 l 109 0 l 109 843 l 3 843 l 3 932 l 109 932 l 109 1055 l 232 1055 l 232 932 l 489 932 l 489 843 l 232 843 l 232 715 l 227 616 l 233 616 q 460 730 305 730 q 725 458 725 730 l 725 -107 q 528 -334 725 -334 q 438 -317 473 -334 "},"y":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 880 l 218 880 l 218 0 l 92 0 l 92 992 l 742 992 l 742 0 "},"":{"x_min":-14,"x_max":848,"ha":834,"o":"m 848 -125 l -14 -125 l -14 -31 l 848 -31 l 848 -125 m 848 -314 l -14 -314 l -14 -219 l 848 -219 l 848 -314 "},"":{"x_min":125,"x_max":709,"ha":834,"o":"m 125 315 l 125 429 l 709 429 l 709 315 l 125 315 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 301 1015 q 366 945 366 1015 q 301 876 366 876 q 236 945 236 876 q 301 1015 236 1015 m 555 1015 q 621 945 621 1015 q 555 876 621 876 q 490 945 490 876 q 555 1015 490 1015 "},"":{"x_min":97,"x_max":735,"ha":834,"o":"m 705 1065 l 728 956 q 388 889 458 911 q 275 793 318 867 q 227 578 232 720 l 235 578 q 463 693 314 693 q 662 603 590 693 q 735 359 735 514 q 650 84 735 182 q 415 -14 565 -14 q 181 108 266 -14 q 97 446 97 230 q 118 687 97 590 q 174 845 139 785 q 256 940 209 904 q 371 996 303 976 q 705 1065 440 1015 m 224 444 q 425 88 224 88 q 607 343 607 88 q 443 590 607 590 q 317 547 377 590 q 224 444 256 504 "},"":{"x_min":146,"x_max":689,"ha":834,"o":"m 454 564 l 454 -85 q 402 -274 454 -214 q 228 -334 350 -334 q 146 -323 193 -334 l 146 -220 q 223 -228 185 -228 q 307 -194 286 -228 q 329 -84 329 -160 l 329 564 l 197 564 l 197 617 l 329 665 l 329 757 q 381 946 329 886 q 554 1006 433 1006 q 689 980 620 1006 l 657 885 q 559 900 603 900 q 475 866 497 900 q 454 757 454 832 l 454 661 l 620 661 l 620 564 l 454 564 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 "},"J":{"x_min":93,"x_max":664,"ha":834,"o":"m 93 26 l 93 138 q 302 97 202 97 q 474 151 411 97 q 537 304 537 205 l 537 992 l 664 992 l 664 305 q 568 72 664 159 q 312 -14 473 -14 q 93 26 165 -14 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 m 644 842 l 561 842 q 418 967 504 879 q 275 842 328 875 l 194 842 l 194 860 q 234 905 210 879 q 353 1064 328 1010 l 484 1064 q 603 905 509 1010 l 644 860 l 644 842 "},"":{"x_min":179,"x_max":719,"ha":834,"o":"m 719 727 l 685 614 q 533 650 602 650 q 362 586 422 650 q 302 404 302 523 l 302 0 l 179 0 l 179 745 l 279 745 l 294 608 l 299 608 q 410 723 351 688 q 555 758 469 758 q 719 727 636 758 m 346 860 q 464 1064 410 950 l 613 1064 l 613 1049 q 428 842 536 932 l 346 842 l 346 860 "},"":{"x_min":61,"x_max":774,"ha":834,"o":"m 132 745 l 244 745 q 166 360 166 567 q 266 88 166 88 q 341 136 314 88 q 368 270 368 184 l 368 478 l 473 478 l 473 270 q 501 135 473 182 q 572 88 528 88 q 668 360 668 88 q 590 745 668 568 l 702 745 q 774 360 774 569 q 579 -14 774 -14 q 424 106 458 -14 l 417 106 q 258 -14 382 -14 q 61 360 61 -14 q 132 745 61 565 m 360 860 l 382 932 q 411 1064 404 1009 l 542 1064 l 542 1049 q 508 968 542 1038 q 433 842 475 898 l 360 842 l 360 860 "},"":{"x_min":213,"x_max":621,"ha":834,"o":"m 621 1030 q 560 892 614 943 q 414 842 506 842 q 213 1030 224 842 l 287 1030 q 319 960 292 977 q 416 943 346 943 q 546 1030 539 943 l 621 1030 "},"D":{"x_min":92,"x_max":778,"ha":834,"o":"m 92 0 l 92 992 l 323 992 q 658 863 538 992 q 778 505 778 735 q 653 130 778 260 q 296 0 529 0 l 92 0 m 218 884 l 218 107 l 283 107 q 644 501 644 107 q 309 884 644 884 l 218 884 "},"":{"x_min":127.6875,"x_max":723.171875,"ha":834,"o":"m 361 401 l 265 339 l 212 421 l 361 518 l 361 958 l 179 972 l 179 1055 l 484 1055 l 484 599 l 595 672 l 648 589 l 484 482 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 401 "},"":{"x_min":127.6875,"x_max":723.171875,"ha":834,"o":"m 361 958 l 179 972 l 179 1055 l 484 1055 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 958 m 336 1128 q 454 1332 400 1218 l 603 1332 l 603 1317 q 418 1110 526 1200 l 336 1110 l 336 1128 "},"":{"x_min":103,"x_max":801,"ha":834,"o":"m 801 -258 l 677 -258 l 677 0 l 103 0 l 103 745 l 226 745 l 226 102 l 568 102 l 568 745 l 692 745 l 692 102 l 801 102 l 801 -258 "},"":{"x_min":3,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 880 l 435 880 q 288 100 351 217 q 100 -16 225 -16 q 3 0 50 -16 l 3 102 q 79 91 41 91 q 186 213 148 91 q 309 992 223 335 l 742 992 l 742 0 "},"$":{"x_min":123,"x_max":709,"ha":834,"o":"m 464 75 l 464 -81 l 371 -81 l 371 69 q 123 116 216 69 l 123 233 q 371 174 256 174 l 371 465 q 187 563 240 508 q 135 712 135 619 q 197 860 135 801 q 371 932 259 918 l 371 1054 l 464 1054 l 464 934 q 692 881 591 928 l 647 783 q 464 829 552 823 l 464 545 q 654 445 599 499 q 709 302 709 390 q 464 75 709 112 m 371 579 l 371 826 q 254 711 254 807 q 281 629 254 658 q 371 579 309 600 m 464 430 l 464 180 q 589 302 589 199 q 464 430 589 388 "},"w":{"x_min":-3,"x_max":836,"ha":834,"o":"m 551 0 l 462 404 l 416 628 l 411 628 l 367 401 l 276 0 l 148 0 l -3 745 l 106 745 l 173 376 q 212 109 196 250 l 216 109 q 262 352 237 235 l 352 745 l 483 745 l 569 352 q 614 109 598 220 l 619 109 q 659 376 640 274 l 728 745 l 836 745 l 683 0 l 551 0 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 "},"":{"x_min":4,"x_max":828,"ha":834,"o":"m 828 -261 l 711 -261 l 711 0 l 120 0 l 120 -261 l 4 -261 l 4 111 l 81 111 q 227 514 168 271 q 294 992 285 758 l 696 992 l 696 111 l 828 111 l 828 -261 m 569 111 l 569 880 l 420 880 q 349 474 407 699 q 214 111 291 249 l 569 111 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 m 345 -327 l 345 -254 q 398 -258 367 -258 q 500 -196 500 -258 q 384 -119 500 -146 l 446 0 l 526 0 l 488 -78 q 598 -194 598 -103 q 400 -334 598 -334 q 345 -327 377 -334 "},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 m 656 1071 l 573 1071 q 430 1196 516 1108 q 287 1071 340 1104 l 206 1071 l 206 1089 q 246 1134 222 1108 q 365 1293 340 1239 l 496 1293 q 615 1134 521 1239 l 656 1089 l 656 1071 "},"C":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 571 -229 q 559 -291 571 -264 q 526 -338 547 -319 q 476 -367 505 -357 q 415 -377 448 -377 q 353 -367 381 -377 q 305 -338 325 -357 q 274 -292 285 -319 q 264 -231 264 -265 q 274 -169 264 -196 q 305 -123 285 -142 q 353 -94 325 -104 q 415 -85 381 -85 q 476 -94 447 -85 q 525 -123 504 -104 q 558 -168 546 -142 q 571 -229 571 -195 m 496 -231 q 474 -174 496 -194 q 417 -154 452 -154 q 360 -174 382 -154 q 338 -231 338 -194 q 358 -287 338 -267 q 417 -307 378 -307 q 474 -287 452 -307 q 496 -231 496 -267 "},"":{"x_min":93,"x_max":825,"ha":834,"o":"m 93 26 l 93 138 q 302 97 202 97 q 474 151 411 97 q 537 304 537 205 l 537 992 l 664 992 l 664 305 q 568 72 664 159 q 312 -14 473 -14 q 93 26 165 -14 m 825 1071 l 742 1071 q 599 1196 685 1108 q 456 1071 509 1104 l 375 1071 l 375 1089 q 415 1134 391 1108 q 534 1293 509 1239 l 665 1293 q 784 1134 690 1239 l 825 1089 l 825 1071 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 502 1071 l 419 1071 q 235 1278 307 1167 l 235 1293 l 383 1293 q 502 1089 442 1172 l 502 1071 "},"":{"x_min":33,"x_max":723.84375,"ha":834,"o":"m 456 656 l 288 656 l 288 0 l 165 0 l 165 656 l 33 656 l 33 704 l 165 749 l 165 814 q 216 1002 165 942 q 389 1063 268 1063 q 523 1037 455 1063 l 491 942 q 394 960 438 960 q 310 926 331 960 q 288 815 288 892 l 288 745 l 456 745 l 456 656 m 652 1024 q 723 946 723 1024 q 702 888 723 907 q 652 869 681 869 q 580 946 580 869 q 652 1024 580 1024 m 713 0 l 589 0 l 589 745 l 713 745 l 713 0 "},"X":{"x_min":36,"x_max":797,"ha":834,"o":"m 797 0 l 653 0 l 412 430 l 164 0 l 36 0 l 343 518 l 57 992 l 191 992 l 416 612 l 643 992 l 773 992 l 486 522 l 797 0 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 639 842 l 556 842 q 413 967 499 879 q 270 842 323 875 l 189 842 l 189 860 q 229 905 205 879 q 348 1064 323 1010 l 479 1064 q 598 905 504 1010 l 639 860 l 639 842 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 447 1233 q 512 1155 512 1233 q 447 1078 512 1078 q 382 1155 382 1078 q 447 1233 382 1233 "},"":{"x_min":197,"x_max":704,"ha":834,"o":"m 704 642 l 320 642 l 320 0 l 197 0 l 197 745 l 704 745 l 704 642 "},"":{"x_min":158,"x_max":716,"ha":834,"o":"m 158 0 l 158 992 l 284 992 l 284 111 l 716 111 l 716 0 l 158 0 m 587 603 q 652 525 652 603 q 587 448 652 448 q 522 525 522 448 q 587 603 522 603 "},"":{"x_min":65,"x_max":767,"ha":834,"o":"m 346 382 l 79 745 l 219 745 l 416 466 l 614 745 l 754 745 l 486 382 l 767 0 l 627 0 l 416 295 l 205 0 l 65 0 l 346 382 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 -107 q 528 -334 725 -334 q 438 -317 473 -334 l 438 -216 q 515 -231 474 -231 q 601 -116 601 -231 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 406 q 349 345 461 345 q 92 596 92 345 l 92 992 l 218 992 l 218 612 q 253 490 218 524 q 362 456 288 456 q 615 510 466 456 l 615 992 l 742 992 l 742 0 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 290 1015 q 355 945 355 1015 q 290 876 355 876 q 225 945 225 876 q 290 1015 225 1015 m 544 1015 q 610 945 610 1015 q 544 876 610 876 q 479 945 479 876 q 544 1015 479 1015 "},"":{"x_min":147,"x_max":741,"ha":834,"o":"m 270 439 l 458 439 q 741 227 741 439 q 455 0 741 0 l 147 0 l 147 745 l 270 745 l 270 439 m 270 336 l 270 102 l 447 102 q 620 219 620 102 q 580 308 620 280 q 444 336 539 336 l 270 336 "},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":65,"x_max":766.875,"ha":834,"o":"m 302 634 l 593 634 l 593 541 l 292 541 q 291 521 292 530 l 291 504 l 291 462 q 292 433 291 448 l 552 433 l 552 341 l 304 341 q 553 97 354 97 q 735 136 645 97 l 735 26 q 543 -14 652 -14 q 175 341 239 -14 l 65 341 l 65 433 l 165 433 l 163 459 l 165 541 l 65 541 l 65 634 l 173 634 q 295 908 199 811 q 539 1006 390 1006 q 766 943 669 1006 l 713 844 q 549 894 631 894 q 392 827 458 894 q 302 634 327 759 "},"":{"x_min":119,"x_max":752,"ha":834,"o":"m 572 395 l 572 390 q 752 215 752 366 q 680 57 752 114 q 466 0 608 0 l 119 0 l 119 745 l 465 745 q 728 557 728 745 q 572 395 728 423 m 242 642 l 242 439 l 440 439 q 568 463 530 439 q 607 545 607 488 q 460 642 607 642 l 242 642 m 242 336 l 242 102 l 458 102 q 631 224 631 102 q 587 312 631 287 q 455 336 542 336 l 242 336 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 992 l 218 992 l 218 574 l 615 574 l 615 992 l 742 992 l 742 0 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 "},"":{"x_min":111,"x_max":781,"ha":834,"o":"m 325 32 l 325 145 q 513 88 422 88 q 657 205 657 88 q 626 294 657 260 q 528 370 595 329 q 410 465 444 423 q 376 565 376 506 q 465 716 376 644 q 554 849 554 788 q 399 960 554 960 q 234 814 234 960 l 234 0 l 111 0 l 111 814 q 398 1063 111 1063 q 604 1009 530 1063 q 678 854 678 955 q 587 685 678 765 q 513 614 530 635 q 497 570 497 593 q 516 524 497 544 q 619 448 536 503 q 749 331 717 384 q 781 211 781 278 q 713 44 781 102 q 521 -14 645 -14 q 325 32 397 -14 "},"":{"x_min":72,"x_max":812,"ha":834,"o":"m 177 745 l 177 437 l 386 437 l 386 745 l 491 745 l 491 439 l 526 439 q 812 228 812 439 q 527 0 812 0 l 386 0 l 386 334 l 177 334 l 177 0 l 72 0 l 72 745 l 177 745 m 491 337 l 491 102 l 529 102 q 706 220 706 102 q 665 309 706 281 q 527 337 624 337 l 491 337 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 219 1089 q 322 1293 274 1179 l 471 1293 l 471 1278 q 286 1071 395 1161 l 219 1071 l 219 1089 m 464 1089 q 568 1293 516 1169 l 717 1293 l 717 1278 q 532 1071 641 1161 l 464 1071 l 464 1089 "},"c":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 "},"":{"x_min":45,"x_max":732,"ha":834,"o":"m 732 -176 l 649 -176 l 649 947 l 510 947 l 510 -176 l 428 -176 l 428 379 q 329 367 386 367 q 45 706 45 367 q 118 968 45 882 q 350 1055 192 1055 l 732 1055 l 732 -176 "},"":{"x_min":-104,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 992 l 218 992 l 218 574 l 615 574 l 615 992 l 742 992 l 742 0 m -104 789 l -81 861 q -52 993 -59 938 l 78 993 l 78 978 q 44 897 78 967 q -30 771 11 827 l -104 771 l -104 789 "},"":{"x_min":-211,"x_max":876,"ha":834,"o":"m 515 -14 q 155 498 155 -14 q 517 1007 155 1007 q 783 874 690 1007 q 876 496 876 741 q 782 118 876 251 q 515 -14 688 -14 m 515 97 q 687 195 633 97 q 742 497 742 293 q 687 799 742 702 q 517 895 631 895 q 288 497 288 895 q 515 97 288 97 m -211 851 q -170 942 -211 904 q -47 1003 -129 981 l -47 951 q -107 920 -87 936 q -126 889 -126 905 q -115 870 -126 876 q -93 858 -105 864 q -70 844 -80 853 q -60 816 -60 835 q -76 778 -60 791 q -125 765 -93 765 q -187 788 -164 765 q -211 851 -211 812 m -2 787 q 13 833 5 807 q 30 885 22 858 q 46 939 38 911 q 58 991 53 966 l 199 991 l 199 977 q 170 929 186 955 q 135 876 154 903 q 95 822 116 849 q 53 770 74 795 l -2 770 l -2 787 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 501 42 q 424 -334 424 -147 l 297 -334 q 365 8 297 -193 l 56 745 l 186 745 l 350 343 q 422 126 398 225 l 426 126 q 493 326 444 196 l 648 745 l 777 745 l 501 42 "},"":{"x_min":193,"x_max":641,"ha":834,"o":"m 193 315 l 193 429 l 641 429 l 641 315 l 193 315 "},":":{"x_min":330,"x_max":502,"ha":834,"o":"m 416 764 q 502 669 502 764 q 416 575 502 575 q 330 669 330 575 q 416 764 330 764 m 416 169 q 502 74 502 169 q 416 -20 502 -20 q 330 74 330 -20 q 416 169 330 169 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 m 347 860 q 465 1064 411 950 l 614 1064 l 614 1049 q 429 842 537 932 l 347 842 l 347 860 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":18,"x_max":814,"ha":834,"o":"m 814 992 l 523 289 q 431 109 471 166 q 329 18 390 51 q 183 -14 269 -14 q 63 6 113 -14 l 63 131 q 184 97 120 97 q 299 132 258 97 q 377 250 341 167 l 18 992 l 156 992 l 416 440 q 429 408 424 423 q 441 377 435 391 l 442 377 l 469 451 l 681 992 l 814 992 "},"":{"x_min":14,"x_max":838.71875,"ha":834,"o":"m 236 738 q 356 611 356 711 q 305 487 356 531 q 159 444 254 444 q 14 477 71 444 l 14 562 q 152 522 89 522 q 254 614 254 522 q 153 699 254 699 l 104 699 l 104 768 l 151 768 q 236 851 236 768 q 170 924 236 924 q 60 880 121 924 l 15 938 q 176 1002 90 1002 q 294 965 250 1002 q 338 865 338 928 q 236 738 338 771 m 753 992 l 258 0 l 151 0 l 645 992 l 753 992 m 838 117 l 781 117 l 781 0 l 680 0 l 680 117 l 426 117 l 426 184 l 681 539 l 781 539 l 781 195 l 838 195 l 838 117 m 680 195 l 680 314 q 684 430 680 369 q 629 341 656 381 l 524 195 l 680 195 "},"":{"x_min":-62,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m -62 789 l -39 861 q -10 993 -17 938 l 120 993 l 120 978 q 86 897 120 967 q 11 771 53 827 l -62 771 l -62 789 "},"":{"x_min":-11,"x_max":767,"ha":834,"o":"m 191 992 l 201 977 q 81 652 167 843 l -11 652 q 56 992 29 816 l 191 992 m 643 0 l 643 479 q 494 655 643 655 q 301 385 301 655 l 301 0 l 178 0 l 178 745 l 278 745 l 296 644 l 302 644 q 390 727 331 696 q 518 758 448 758 q 767 486 767 758 l 767 0 l 643 0 "},"":{"x_min":79,"x_max":742,"ha":834,"o":"m 455 524 l 742 524 l 742 36 q 456 -14 609 -14 q 179 121 279 -14 q 79 497 79 256 q 188 870 79 735 q 491 1006 298 1006 q 726 947 621 1006 l 677 837 q 487 894 578 894 q 285 789 357 894 q 212 496 212 683 q 479 97 212 97 q 615 116 544 97 l 615 412 l 455 412 l 455 524 m 366 -288 q 423 -85 408 -193 l 544 -85 l 544 -98 q 511 -182 544 -113 q 433 -307 478 -251 l 366 -307 l 366 -288 "},"m":{"x_min":62,"x_max":773,"ha":834,"o":"m 649 0 l 649 479 q 633 616 649 578 q 579 655 617 655 q 503 599 527 655 q 479 410 479 543 l 479 0 l 356 0 l 356 479 q 280 655 356 655 q 207 601 229 655 q 185 385 185 547 l 185 0 l 62 0 l 62 745 l 159 745 l 180 644 l 186 644 q 320 758 231 758 q 461 634 428 758 l 465 634 q 611 758 516 758 q 734 695 696 758 q 773 486 773 632 l 773 0 l 649 0 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 "},"":{"x_min":123,"x_max":709,"ha":834,"o":"m 709 0 l 123 0 l 123 88 l 572 648 l 145 648 l 145 745 l 697 745 l 697 641 l 256 96 l 709 96 l 709 0 m 650 1045 q 609 1000 633 1026 q 490 842 514 893 l 359 842 q 240 1000 335 893 l 200 1045 l 200 1064 l 281 1064 q 424 937 337 1027 q 567 1064 507 1024 l 650 1064 l 650 1045 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 341 860 q 459 1064 405 950 l 608 1064 l 608 1049 q 423 842 531 932 l 341 842 l 341 860 "},"":{"x_min":129.28125,"x_max":704.421875,"ha":834,"o":"m 344 490 l 129 706 l 200 778 l 415 562 l 633 778 l 704 708 l 486 490 l 703 273 l 633 204 l 415 419 l 200 205 l 131 275 l 344 490 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 232 0 l 109 0 l 109 745 l 725 745 l 725 0 l 601 0 l 601 642 l 232 642 l 232 0 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 414 927 q 304 966 345 927 q 263 1073 263 1005 q 304 1179 263 1140 q 414 1219 345 1219 q 526 1178 482 1219 q 570 1074 570 1138 q 526 967 570 1007 q 414 927 483 927 m 416 1149 q 359 1129 381 1149 q 337 1073 337 1109 q 416 996 337 996 q 473 1016 451 996 q 495 1073 495 1036 q 473 1129 495 1109 q 416 1149 451 1149 m 332 1263 q 450 1467 396 1353 l 599 1467 l 599 1452 q 414 1245 522 1335 l 332 1245 l 332 1263 "},"K":{"x_min":143,"x_max":813.25,"ha":834,"o":"m 813 0 l 669 0 l 364 473 l 269 396 l 269 0 l 143 0 l 143 992 l 269 992 l 269 496 l 351 609 l 659 992 l 801 992 l 447 559 l 813 0 "},"":{"x_min":224,"x_max":609,"ha":834,"o":"m 289 1015 q 354 945 354 1015 q 289 876 354 876 q 224 945 224 876 q 289 1015 224 1015 m 543 1015 q 609 945 609 1015 q 543 876 609 876 q 478 945 478 876 q 543 1015 478 1015 "},"Y":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 "},"E":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 642 1071 l 559 1071 q 416 1196 502 1108 q 273 1071 326 1104 l 192 1071 l 192 1089 q 232 1134 208 1108 q 351 1293 326 1239 l 482 1293 q 601 1134 507 1239 l 642 1089 l 642 1071 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 224 574 l 652 574 l 652 462 l 220 462 q 540 97 236 97 q 763 135 629 97 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 327 810 412 894 q 224 574 243 725 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":70,"x_max":763.84375,"ha":834,"o":"m 763 745 l 763 668 l 630 650 q 675 506 675 592 q 602 333 675 397 q 401 269 530 269 q 343 273 364 269 q 275 182 275 234 q 384 125 275 125 l 511 125 q 691 72 629 125 q 754 -77 754 20 q 371 -334 754 -334 q 146 -278 223 -334 q 70 -123 70 -223 q 232 61 70 22 q 167 165 167 93 q 257 293 167 240 q 162 376 197 318 q 128 502 128 434 q 200 691 128 625 q 405 758 272 758 q 507 745 464 758 l 763 745 m 402 353 q 554 508 554 353 q 401 669 554 669 q 248 506 248 669 q 402 353 248 353 m 469 17 l 342 17 q 186 -118 186 17 q 370 -237 186 -237 q 637 -84 637 -237 q 603 -3 637 -24 q 469 17 569 17 m 422 1023 q 487 945 487 1023 q 422 868 487 868 q 357 945 357 868 q 422 1023 357 1023 "},"":{"x_min":136,"x_max":700.703125,"ha":834,"o":"m 570 439 l 570 336 l 462 336 q 259 210 259 336 q 450 88 259 88 q 698 145 583 88 l 698 36 q 441 -14 606 -14 q 217 43 298 -14 q 136 203 136 100 q 297 385 136 334 l 297 392 q 160 561 160 437 q 236 705 160 652 q 440 758 312 758 q 700 706 587 758 l 658 606 q 446 655 550 655 q 283 551 283 655 q 467 439 283 439 l 570 439 m 391 860 l 413 932 q 442 1064 435 1009 l 573 1064 l 573 1049 q 539 968 573 1038 q 464 842 506 898 l 391 842 l 391 860 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":109,"x_max":735,"ha":834,"o":"m 109 745 l 232 745 l 232 345 q 418 88 232 88 q 565 167 520 88 q 611 412 611 245 q 568 745 611 573 l 691 745 q 735 406 735 578 q 657 88 735 191 q 414 -14 579 -14 q 109 337 109 -14 l 109 745 m 289 1015 q 354 945 354 1015 q 289 876 354 876 q 224 945 224 876 q 289 1015 224 1015 m 543 1015 q 609 945 609 1015 q 543 876 609 876 q 478 945 478 876 q 543 1015 478 1015 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 229 745 l 229 291 l 220 120 l 562 745 l 725 745 l 725 0 l 604 0 l 604 439 l 611 622 l 271 0 l 109 0 l 109 745 l 229 745 m 702 1058 q 437 842 688 842 q 247 892 305 842 q 182 1058 188 942 l 298 1058 q 332 959 304 988 q 442 930 361 930 q 585 1058 573 930 l 702 1058 "},"b":{"x_min":107,"x_max":741,"ha":834,"o":"m 230 93 l 222 93 l 197 0 l 107 0 l 107 1055 l 230 1055 l 230 800 q 225 646 230 745 l 230 646 q 449 758 303 758 q 663 656 585 758 q 741 373 741 555 q 662 88 741 190 q 449 -14 584 -14 q 230 93 308 -14 m 230 373 q 277 153 230 219 q 428 88 325 88 q 613 374 613 88 q 427 655 613 655 q 276 591 321 655 q 230 373 230 528 "},"":{"x_min":109,"x_max":735,"ha":834,"o":"m 109 745 l 232 745 l 232 345 q 418 88 232 88 q 565 167 520 88 q 611 412 611 245 q 568 745 611 573 l 691 745 q 735 406 735 578 q 657 88 735 191 q 414 -14 579 -14 q 109 337 109 -14 l 109 745 m 352 860 l 374 932 q 403 1064 396 1009 l 534 1064 l 534 1049 q 500 968 534 1038 q 425 842 467 898 l 352 842 l 352 860 "},"":{"x_min":33,"x_max":713,"ha":834,"o":"m 456 656 l 288 656 l 288 0 l 165 0 l 165 656 l 33 656 l 33 704 l 165 749 l 165 814 q 216 1002 165 942 q 389 1063 268 1063 q 523 1037 455 1063 l 491 942 q 394 960 438 960 q 310 926 331 960 q 288 815 288 892 l 288 745 l 456 745 l 456 656 m 713 0 l 589 0 l 589 1055 l 713 1055 l 713 0 "},"":{"x_min":50,"x_max":782,"ha":834,"o":"m 473 756 q 782 373 782 722 q 473 -11 782 17 l 473 -334 l 368 -334 l 368 -11 q 50 373 50 19 q 368 756 50 728 l 368 1055 l 473 1055 l 473 756 m 368 91 l 368 653 q 155 373 155 633 q 368 91 155 111 m 473 652 l 473 91 q 676 373 676 113 q 473 652 676 629 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 226 l 636 226 q 624 500 624 412 l 624 992 l 741 992 l 741 13 q 673 -192 741 -120 q 478 -264 605 -264 q 373 -247 415 -264 l 373 -139 q 480 -152 425 -152 q 624 0 624 -152 l 201 821 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 248 1070 l 177 1070 q 320 1250 193 1250 q 429 1211 359 1250 q 521 1173 498 1173 q 593 1251 576 1173 l 665 1251 q 522 1072 646 1072 q 415 1110 483 1072 q 320 1148 347 1148 q 248 1070 265 1148 "},"":{"x_min":41,"x_max":834,"ha":834,"o":"m 713 111 l 834 111 l 834 -261 l 717 -261 l 717 0 l 41 0 l 41 992 l 167 992 l 167 111 l 321 111 l 321 992 l 447 992 l 447 111 l 586 111 l 586 992 l 713 992 l 713 111 "},"L":{"x_min":158,"x_max":716,"ha":834,"o":"m 158 0 l 158 992 l 284 992 l 284 111 l 716 111 l 716 0 l 158 0 "},"":{"x_min":54,"x_max":892,"ha":834,"o":"m 569 99 l 564 99 q 345 -14 487 -14 q 131 87 209 -14 q 54 370 54 188 q 132 655 54 553 q 345 758 210 758 q 564 649 485 758 l 572 649 q 564 759 564 736 l 564 1055 l 688 1055 l 688 0 l 588 0 l 569 99 m 564 342 l 564 370 q 517 590 564 524 q 366 655 469 655 q 181 369 181 655 q 367 88 181 88 q 516 148 471 88 q 564 342 561 208 m 729 850 l 746 923 q 770 1055 764 1002 l 892 1055 l 892 1041 q 863 964 892 1031 q 793 833 835 897 l 729 833 l 729 850 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 621 1259 q 560 1121 614 1172 q 414 1071 506 1071 q 213 1259 224 1071 l 287 1259 q 319 1189 292 1206 q 416 1172 346 1172 q 546 1259 539 1172 l 621 1259 "},"":{"x_min":95,"x_max":696,"ha":834,"o":"m 692 101 l 692 7 q 521 -14 603 -14 q 276 217 276 -14 l 276 387 l 166 387 l 166 484 l 276 484 l 276 648 l 95 648 l 95 715 l 276 749 l 328 943 l 399 943 l 399 745 l 696 745 l 696 648 l 399 648 l 399 484 l 607 484 l 607 387 l 399 387 l 399 218 q 529 88 399 88 q 692 101 592 88 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 499 1071 l 416 1071 q 232 1278 304 1167 l 232 1293 l 380 1293 q 499 1089 439 1172 l 499 1071 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 567 -229 q 555 -291 567 -264 q 522 -338 543 -319 q 472 -367 501 -357 q 411 -377 444 -377 q 349 -367 377 -377 q 301 -338 321 -357 q 270 -292 281 -319 q 260 -231 260 -265 q 270 -169 260 -196 q 301 -123 281 -142 q 349 -94 321 -104 q 411 -85 377 -85 q 472 -94 443 -85 q 521 -123 500 -104 q 554 -168 542 -142 q 567 -229 567 -195 m 492 -231 q 470 -174 492 -194 q 413 -154 448 -154 q 356 -174 378 -154 q 334 -231 334 -194 q 354 -287 334 -267 q 413 -307 374 -307 q 470 -287 448 -307 q 492 -231 492 -267 "},"":{"x_min":2,"x_max":831,"ha":834,"o":"m 150 990 l 244 990 l 244 456 l 143 456 l 143 771 q 149 906 143 817 q 98 862 121 876 l 51 828 l 2 887 l 150 990 m 673 992 l 178 0 l 71 0 l 565 992 l 673 992 m 831 1 l 471 1 l 471 70 l 595 205 q 689 319 668 285 q 709 392 709 353 q 635 469 709 469 q 526 418 581 469 l 475 477 q 643 547 554 547 q 766 506 722 547 q 811 395 811 465 q 787 304 811 350 q 676 171 763 258 l 584 79 l 831 79 l 831 1 "},"\'":{"x_min":336,"x_max":496.734375,"ha":834,"o":"m 496 992 l 468 634 l 363 634 l 336 992 l 496 992 "},"":{"x_min":127.828125,"x_max":704,"ha":834,"o":"m 200 1051 q 272 973 272 1051 q 250 915 272 934 q 200 896 229 896 q 127 973 127 896 q 200 1051 127 1051 m 629 1051 q 701 973 701 1051 q 679 915 701 934 q 629 896 658 896 q 556 973 556 896 q 629 1051 556 1051 m 138 745 l 261 745 l 261 0 l 138 0 l 138 745 m 341 -310 l 341 -205 q 469 -231 400 -231 q 580 -85 580 -231 l 580 648 l 435 662 l 435 745 l 704 745 l 704 -79 q 646 -268 704 -203 q 486 -334 588 -334 q 341 -310 403 -334 "},"":{"x_min":119,"x_max":742,"ha":834,"o":"m 245 385 l 245 0 l 119 0 l 119 992 l 393 992 q 742 701 742 992 q 647 468 742 552 q 374 385 553 385 l 245 385 m 245 493 l 359 493 q 550 541 493 493 q 608 694 608 590 q 380 884 608 884 l 245 884 l 245 493 "},"":{"x_min":281,"x_max":553,"ha":834,"o":"m 553 -217 l 553 -293 q 447 -309 503 -309 q 323 -271 366 -309 q 281 -171 281 -234 q 405 0 281 -73 l 497 0 q 378 -162 378 -85 q 467 -227 378 -227 q 553 -217 513 -227 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 m 448 1089 q 566 1293 512 1179 l 715 1293 l 715 1278 q 530 1071 638 1161 l 448 1071 l 448 1089 "},"":{"x_min":69,"x_max":762,"ha":834,"o":"m 479 0 l 353 0 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 0 "},"":{"x_min":81,"x_max":753,"ha":834,"o":"m 721 949 l 676 852 q 492 898 581 898 q 342 732 342 898 l 342 534 l 596 534 l 596 437 l 342 437 l 342 295 q 247 112 342 164 l 753 112 l 753 0 l 81 0 l 81 104 q 217 294 217 137 l 217 437 l 82 437 l 82 534 l 217 534 l 217 753 q 290 935 217 867 q 486 1004 364 1004 q 721 949 616 1004 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 412 842 q 302 881 343 842 q 261 988 261 920 q 302 1094 261 1055 q 412 1134 343 1134 q 524 1093 480 1134 q 568 989 568 1053 q 524 882 568 922 q 412 842 481 842 m 414 1064 q 357 1044 379 1064 q 335 988 335 1024 q 414 911 335 911 q 471 931 449 911 q 493 988 493 951 q 471 1044 493 1024 q 414 1064 449 1064 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 224 1172 l 615 1172 l 615 1071 l 224 1071 l 224 1172 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 "},"":{"x_min":79,"x_max":742,"ha":834,"o":"m 455 524 l 742 524 l 742 36 q 456 -14 609 -14 q 179 121 279 -14 q 79 497 79 256 q 188 870 79 735 q 491 1006 298 1006 q 726 947 621 1006 l 677 837 q 487 894 578 894 q 285 789 357 894 q 212 496 212 683 q 479 97 212 97 q 615 116 544 97 l 615 412 l 455 412 l 455 524 m 687 1259 q 626 1121 680 1172 q 480 1071 572 1071 q 279 1259 290 1071 l 353 1259 q 385 1189 358 1206 q 482 1172 412 1172 q 612 1259 605 1172 l 687 1259 "},"v":{"x_min":56,"x_max":777,"ha":834,"o":"m 338 0 l 56 745 l 183 745 l 346 302 q 414 82 403 145 l 418 82 q 486 302 422 111 l 648 745 l 777 745 l 494 0 l 338 0 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 648 842 l 565 842 q 422 967 508 879 q 279 842 332 875 l 198 842 l 198 860 q 238 905 214 879 q 357 1064 332 1010 l 488 1064 q 607 905 513 1010 l 648 860 l 648 842 "},"":{"x_min":69,"x_max":763,"ha":834,"o":"m 763 0 l 69 0 l 69 97 l 607 880 l 83 880 l 83 992 l 749 992 l 749 895 l 210 111 l 763 111 l 763 0 m 322 1089 q 440 1293 386 1179 l 589 1293 l 589 1278 q 404 1071 512 1161 l 322 1071 l 322 1089 "},"":{"x_min":221,"x_max":612,"ha":834,"o":"m 221 943 l 612 943 l 612 842 l 221 842 l 221 943 "},"":{"x_min":158,"x_max":716,"ha":834,"o":"m 158 0 l 158 992 l 284 992 l 284 111 l 716 111 l 716 0 l 158 0 m 179 1089 q 297 1293 243 1179 l 446 1293 l 446 1278 q 261 1071 369 1161 l 179 1071 l 179 1089 "},"":{"x_min":81,"x_max":753,"ha":834,"o":"m 721 949 l 676 852 q 492 898 581 898 q 342 733 342 898 l 342 604 l 596 604 l 596 507 l 342 507 l 342 407 l 596 407 l 596 311 l 342 311 l 342 298 q 245 112 342 165 l 753 112 l 753 0 l 81 0 l 81 104 q 217 296 217 137 l 217 311 l 82 311 l 82 407 l 217 407 l 217 507 l 82 507 l 82 604 l 217 604 l 217 753 q 290 935 217 867 q 486 1004 364 1004 q 721 949 616 1004 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 m 747 1274 q 706 1229 730 1255 q 587 1071 611 1122 l 456 1071 q 337 1229 432 1122 l 297 1274 l 297 1293 l 378 1293 q 521 1166 434 1256 q 664 1293 604 1253 l 747 1293 l 747 1274 "},"x":{"x_min":65,"x_max":767,"ha":834,"o":"m 346 382 l 79 745 l 219 745 l 416 466 l 614 745 l 754 745 l 486 382 l 767 0 l 627 0 l 416 295 l 205 0 l 65 0 l 346 382 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 521 842 l 438 842 q 254 1049 326 938 l 254 1064 l 402 1064 q 521 860 461 943 l 521 842 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 m 350 1089 q 468 1293 414 1179 l 617 1293 l 617 1278 q 432 1071 540 1161 l 350 1071 l 350 1089 "},"":{"x_min":62,"x_max":773,"ha":834,"o":"m 649 0 l 649 479 q 633 616 649 578 q 579 655 617 655 q 503 599 527 655 q 479 410 479 543 l 479 0 l 356 0 l 356 479 q 280 655 356 655 q 207 601 229 655 q 185 385 185 547 l 185 0 l 62 0 l 62 745 l 159 745 l 180 644 l 186 644 q 320 758 231 758 q 461 634 428 758 l 465 634 q 611 758 516 758 q 734 695 696 758 q 773 486 773 632 l 773 0 l 649 0 m 370 860 q 488 1064 434 950 l 637 1064 l 637 1049 q 452 842 560 932 l 370 842 l 370 860 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 232 264 q 393 88 232 88 q 551 151 502 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 l 607 99 l 600 99 q 396 -14 534 -14 q 228 45 279 -14 q 232 -117 232 -58 l 232 -334 l 109 -334 l 109 745 l 232 745 l 232 264 "},".":{"x_min":314,"x_max":520,"ha":834,"o":"m 416 204 q 520 91 520 204 q 416 -21 520 -21 q 314 91 314 -21 q 416 204 314 204 "},"":{"x_min":303,"x_max":530,"ha":834,"o":"m 313 652 l 303 666 q 423 992 339 806 l 530 992 q 463 652 488 818 l 313 652 "},"":{"x_min":9.4375,"x_max":823.421875,"ha":834,"o":"m 803 101 l 803 3 q 710 -14 767 -14 q 557 164 557 -14 l 557 642 l 283 642 l 283 0 l 160 0 l 160 642 l 9 642 l 9 691 l 103 745 l 823 745 l 823 642 l 681 642 l 681 173 q 742 88 681 88 q 803 101 773 88 "},"l":{"x_min":127.6875,"x_max":723.171875,"ha":834,"o":"m 361 958 l 179 972 l 179 1055 l 484 1055 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 958 "},"":{"x_min":18,"x_max":774,"ha":834,"o":"m 220 0 l 220 880 l 18 880 l 18 992 l 346 992 l 346 574 l 392 574 q 675 500 576 574 q 774 290 774 426 q 679 76 774 153 q 410 0 585 0 l 220 0 m 346 107 l 412 107 q 640 290 640 107 q 582 421 640 379 q 392 462 524 462 l 346 462 l 346 107 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 m 349 1089 q 467 1293 413 1179 l 616 1293 l 616 1278 q 431 1071 539 1161 l 349 1071 l 349 1089 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 290 1244 q 355 1174 355 1244 q 290 1105 355 1105 q 225 1174 225 1105 q 290 1244 225 1244 m 544 1244 q 610 1174 610 1244 q 544 1105 610 1105 q 479 1174 479 1105 q 544 1244 479 1244 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 493 842 l 410 842 q 226 1049 298 938 l 226 1064 l 374 1064 q 493 860 433 943 l 493 842 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 -334 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 302 758 q 725 486 725 758 l 725 -334 l 601 -334 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 338 860 q 456 1064 402 950 l 605 1064 l 605 1049 q 420 842 528 932 l 338 842 l 338 860 "},"":{"x_min":366,"x_max":467.734375,"ha":834,"o":"m 366 1055 l 467 1055 l 467 526 l 366 526 l 366 1055 m 366 196 l 467 196 l 467 -334 l 366 -334 l 366 196 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 222 1089 q 325 1293 277 1179 l 474 1293 l 474 1278 q 289 1071 398 1161 l 222 1071 l 222 1089 m 467 1089 q 571 1293 519 1169 l 720 1293 l 720 1278 q 535 1071 644 1161 l 467 1071 l 467 1089 "},"":{"x_min":69,"x_max":763,"ha":834,"o":"m 763 0 l 69 0 l 69 97 l 607 880 l 83 880 l 83 992 l 749 992 l 749 895 l 210 111 l 763 111 l 763 0 m 641 1274 q 600 1229 624 1255 q 481 1071 505 1122 l 350 1071 q 231 1229 326 1122 l 191 1274 l 191 1293 l 272 1293 q 415 1166 328 1256 q 558 1293 498 1253 l 641 1293 l 641 1274 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 642 1071 l 559 1071 q 416 1196 502 1108 q 273 1071 326 1104 l 192 1071 l 192 1089 q 232 1134 208 1108 q 351 1293 326 1239 l 482 1293 q 601 1134 507 1239 l 642 1089 l 642 1071 "},"e":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 375 860 l 397 932 q 426 1064 419 1009 l 557 1064 l 557 1049 q 523 968 557 1038 q 448 842 490 898 l 375 842 l 375 860 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 641 1259 q 580 1121 634 1172 q 434 1071 526 1071 q 233 1259 244 1071 l 307 1259 q 339 1189 312 1206 q 436 1172 366 1172 q 566 1259 559 1172 l 641 1259 "},"":{"x_min":127.6875,"x_max":723.171875,"ha":834,"o":"m 361 958 l 179 972 l 179 1055 l 484 1055 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 958 m 313 -288 q 370 -85 355 -193 l 491 -85 l 491 -98 q 458 -182 491 -113 q 380 -307 425 -251 l 313 -307 l 313 -288 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":158,"x_max":719,"ha":834,"o":"m 719 992 l 719 880 l 284 880 l 284 0 l 158 0 l 158 992 l 719 992 m 345 1089 q 463 1293 409 1179 l 612 1293 l 612 1278 q 427 1071 535 1161 l 345 1071 l 345 1089 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 524 842 l 441 842 q 257 1049 329 938 l 257 1064 l 405 1064 q 524 860 464 943 l 524 842 "},"":{"x_min":45.1875,"x_max":723.234375,"ha":834,"o":"m 570 660 l 474 660 l 474 0 l 364 0 l 364 660 l 224 660 l 224 0 l 113 0 l 113 660 l 45 660 l 45 703 l 113 745 l 113 800 q 126 920 113 872 q 166 996 140 968 q 230 1036 192 1025 q 317 1048 268 1048 q 380 1041 350 1048 q 433 1025 410 1033 q 493 1053 458 1044 q 570 1063 528 1063 q 634 1055 603 1063 l 723 1055 l 723 0 l 612 0 l 612 961 q 592 965 602 963 q 573 966 582 966 q 529 958 547 966 q 498 933 510 951 q 480 887 486 916 q 474 814 474 857 l 474 745 l 570 745 l 570 660 m 224 745 l 364 745 l 364 813 q 380 943 364 890 q 351 949 366 947 q 320 952 335 952 q 278 945 296 952 q 248 920 260 937 q 230 873 236 902 q 224 801 224 844 l 224 745 "},"^":{"x_min":75,"x_max":759,"ha":834,"o":"m 75 372 l 363 999 l 432 999 l 759 372 l 649 372 l 399 870 l 182 372 l 75 372 "},"":{"x_min":215,"x_max":618,"ha":834,"o":"m 516 541 l 516 820 q 431 921 516 921 q 340 885 364 921 q 316 769 316 849 l 316 541 l 215 541 l 215 992 l 300 992 l 312 920 l 318 920 q 457 1003 364 1003 q 575 958 532 1003 q 618 833 618 914 l 618 541 l 516 541 "},"":{"x_min":146,"x_max":797,"ha":834,"o":"m 620 745 l 771 745 l 413 387 l 797 0 l 639 0 l 269 377 l 269 0 l 146 0 l 146 745 l 269 745 l 269 383 l 620 745 "},"":{"x_min":37,"x_max":796,"ha":834,"o":"m 456 734 q 447 668 456 697 q 421 616 439 638 q 377 582 403 594 q 314 571 350 571 q 250 582 277 571 q 206 616 223 594 q 180 668 188 638 q 172 734 172 697 q 180 802 172 772 q 206 853 188 832 q 250 887 223 875 q 314 899 277 899 q 377 887 350 899 q 421 853 403 875 q 447 802 439 832 q 456 734 456 772 m 363 539 l 456 539 q 545 521 515 539 q 575 458 575 503 q 562 413 575 431 q 526 390 550 395 l 526 387 q 549 380 538 385 q 567 367 559 375 q 580 346 575 359 q 585 314 585 333 q 555 245 585 269 q 475 221 525 221 l 363 221 l 363 539 m 514 185 l 694 185 l 694 132 l 645 132 l 645 -31 q 615 -111 645 -85 q 539 -137 586 -137 q 503 -135 518 -137 q 481 -131 489 -133 l 481 -75 q 502 -78 489 -77 q 531 -80 515 -80 q 564 -70 551 -80 q 578 -32 578 -60 l 578 132 l 514 132 l 514 185 m 239 734 q 257 656 239 684 q 314 627 275 627 q 370 656 352 627 q 387 734 387 684 q 370 813 387 785 q 314 842 352 842 q 257 813 275 842 q 239 734 239 785 m 37 823 l 37 1030 l 242 1030 l 242 954 l 112 954 l 112 823 l 37 823 m 37 -260 l 37 -54 l 112 -54 l 112 -186 l 242 -186 l 242 -260 l 37 -260 m 589 954 l 589 1030 l 796 1030 l 796 823 l 722 823 l 722 954 l 589 954 m 589 -260 l 589 -186 l 722 -186 l 722 -54 l 796 -54 l 796 -260 l 589 -260 m 112 291 l 37 291 l 37 476 l 112 476 l 112 291 m 324 954 l 324 1030 l 508 1030 l 508 954 l 324 954 m 112 26 l 37 26 l 37 210 l 112 210 l 112 26 m 112 558 l 37 558 l 37 742 l 112 742 l 112 558 m 796 291 l 722 291 l 722 476 l 796 476 l 796 291 m 796 26 l 722 26 l 722 210 l 796 210 l 796 26 m 796 558 l 722 558 l 722 742 l 796 742 l 796 558 m 324 -260 l 324 -186 l 508 -186 l 508 -260 l 324 -260 m 429 359 l 429 276 l 469 276 q 505 288 495 276 q 515 320 515 299 q 505 348 515 337 q 466 359 495 359 l 429 359 m 429 414 l 464 414 q 499 423 489 414 q 509 449 509 432 q 497 475 509 467 q 461 483 486 483 l 429 483 l 429 414 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 222 943 l 613 943 l 613 842 l 222 842 l 222 943 "},"":{"x_min":192,"x_max":642,"ha":834,"o":"m 642 842 l 559 842 q 416 967 502 879 q 273 842 326 875 l 192 842 l 192 860 q 232 905 208 879 q 351 1064 326 1010 l 482 1064 q 601 905 507 1010 l 642 860 l 642 842 "},"":{"x_min":1,"x_max":833,"ha":834,"o":"m 358 684 l 478 684 l 577 330 q 626 122 618 181 q 670 542 627 158 l 717 992 l 833 992 l 706 0 l 577 0 l 462 393 q 418 584 435 487 q 373 392 396 467 l 267 0 l 139 0 l 1 992 l 116 992 l 176 542 q 203 285 191 422 q 215 122 215 148 q 262 333 231 224 l 358 684 m 292 1244 q 357 1174 357 1244 q 292 1105 357 1105 q 227 1174 227 1105 q 292 1244 227 1244 m 546 1244 q 612 1174 612 1244 q 546 1105 612 1105 q 481 1174 481 1105 q 546 1244 481 1244 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 m 705 1045 q 664 1000 688 1026 q 545 842 569 893 l 414 842 q 295 1000 390 893 l 255 1045 l 255 1064 l 336 1064 q 479 937 392 1027 q 622 1064 562 1024 l 705 1064 l 705 1045 "},"":{"x_min":303,"x_max":530,"ha":834,"o":"m 520 992 l 530 977 q 410 652 492 832 l 303 652 q 369 992 345 832 l 520 992 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 "},"-":{"x_min":193,"x_max":641,"ha":834,"o":"m 193 315 l 193 429 l 641 429 l 641 315 l 193 315 "},"Q":{"x_min":57,"x_max":778,"ha":834,"o":"m 584 26 q 774 -184 642 -95 l 691 -281 q 469 -9 531 -165 q 417 -14 444 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 584 26 778 139 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 "},"":{"x_min":92,"x_max":580,"ha":834,"o":"m 504 1051 q 577 973 577 1051 q 504 896 577 896 q 432 973 432 896 q 504 1051 432 1051 m 92 -310 l 92 -205 q 288 -231 182 -231 q 412 -192 367 -231 q 456 -85 456 -154 l 456 648 l 171 662 l 171 745 l 580 745 l 580 -79 q 503 -267 580 -201 q 286 -334 426 -334 q 92 -310 175 -334 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 659 1045 q 618 1000 642 1026 q 499 842 523 893 l 368 842 q 249 1000 344 893 l 209 1045 l 209 1064 l 290 1064 q 433 937 346 1027 q 576 1064 516 1024 l 659 1064 l 659 1045 "},"":{"x_min":39,"x_max":797,"ha":834,"o":"m 445 135 q 263 -14 385 -14 q 101 90 163 -14 q 39 373 39 194 q 99 656 39 555 q 264 758 159 758 q 442 610 381 758 q 605 758 499 758 q 745 667 693 758 q 797 423 797 576 l 797 346 l 506 346 q 631 93 508 93 q 765 145 702 93 l 765 35 q 620 -14 702 -14 q 513 26 561 -14 q 445 135 465 66 m 273 88 q 383 366 383 88 q 272 655 383 655 q 187 585 213 655 q 162 373 162 515 q 188 159 162 230 q 273 88 213 88 m 676 449 q 596 655 676 655 q 507 449 515 655 l 676 449 "},"#":{"x_min":31,"x_max":803,"ha":834,"o":"m 635 606 l 592 383 l 754 383 l 754 290 l 574 290 l 519 0 l 418 0 l 475 290 l 276 290 l 219 0 l 125 0 l 177 290 l 31 290 l 31 383 l 195 383 l 239 606 l 83 606 l 83 699 l 256 699 l 311 992 l 413 992 l 357 699 l 557 699 l 615 992 l 710 992 l 653 699 l 803 699 l 803 606 l 635 606 m 294 383 l 494 383 l 538 606 l 339 606 l 294 383 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 482 0 l 482 -261 l 356 -261 l 356 0 l 92 0 l 92 992 l 218 992 l 218 111 l 615 111 l 615 992 l 742 992 l 742 0 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 414 927 q 304 966 345 927 q 263 1073 263 1005 q 304 1179 263 1140 q 414 1219 345 1219 q 526 1178 482 1219 q 570 1074 570 1138 q 526 967 570 1007 q 414 927 483 927 m 416 1149 q 359 1129 381 1149 q 337 1073 337 1109 q 416 996 337 996 q 473 1016 451 996 q 495 1073 495 1036 q 473 1129 495 1109 q 416 1149 451 1149 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 m 309 -288 q 366 -85 351 -193 l 487 -85 l 487 -98 q 454 -182 487 -113 q 376 -307 421 -251 l 309 -307 l 309 -288 "},"":{"x_min":291,"x_max":544,"ha":834,"o":"m 291 -327 l 291 -254 q 344 -258 313 -258 q 446 -196 446 -258 q 330 -119 446 -146 l 392 0 l 472 0 l 434 -78 q 544 -194 544 -103 q 346 -334 544 -334 q 291 -327 323 -334 "},"=":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 577 l 103 679 l 730 679 l 730 577 l 103 577 m 103 300 l 103 401 l 730 401 l 730 300 l 103 300 "},"":{"x_min":107,"x_max":735,"ha":834,"o":"m 230 47 l 226 47 q 230 -136 230 -70 l 230 -334 l 107 -334 l 107 373 q 192 654 107 551 q 426 758 278 758 q 650 653 566 758 q 735 373 735 549 q 651 88 735 190 q 421 -14 567 -14 q 230 47 307 -14 m 230 156 q 422 88 306 88 q 564 159 520 88 q 607 373 607 231 q 563 585 607 515 q 421 655 519 655 q 230 386 230 655 l 230 156 "},"":{"x_min":16,"x_max":791,"ha":834,"o":"m 345 609 l 524 609 q 721 543 651 609 q 791 357 791 477 l 791 0 l 664 0 l 664 340 q 510 497 664 497 l 345 497 l 345 0 l 219 0 l 219 880 l 16 880 l 16 992 l 587 992 l 587 880 l 345 880 l 345 609 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 339 860 q 457 1064 403 950 l 606 1064 l 606 1049 q 421 842 529 932 l 339 842 l 339 860 "},"":{"x_min":263,"x_max":570,"ha":834,"o":"m 414 842 q 304 881 345 842 q 263 988 263 920 q 304 1094 263 1055 q 414 1134 345 1134 q 526 1093 482 1134 q 570 989 570 1053 q 526 882 570 922 q 414 842 483 842 m 416 1064 q 359 1044 381 1064 q 337 988 337 1024 q 416 911 337 911 q 473 931 451 911 q 495 988 495 951 q 473 1044 495 1024 q 416 1064 451 1064 "},"":{"x_min":22,"x_max":765,"ha":834,"o":"m 765 -258 l 644 -258 l 644 0 l 145 0 l 145 -258 l 22 -258 l 22 102 l 80 102 q 261 745 258 367 l 663 745 l 663 102 l 765 102 l 765 -258 m 539 102 l 539 648 l 369 648 q 210 102 345 321 l 539 102 "},"":{"x_min":-14,"x_max":847,"ha":834,"o":"m 847 1055 l -14 1055 l -14 1149 l 847 1149 l 847 1055 "},"u":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 "},"":{"x_min":94,"x_max":727,"ha":834,"o":"m 476 521 l 476 517 q 662 440 597 501 q 727 281 727 378 q 630 64 727 143 q 356 -14 534 -14 q 94 39 192 -14 l 94 154 q 353 93 218 93 q 593 281 593 93 q 326 457 593 457 l 198 457 l 198 565 l 317 565 q 507 614 439 565 q 575 747 575 664 q 528 857 575 816 q 400 898 480 898 q 161 819 274 898 l 98 904 q 407 1006 229 1006 q 629 938 549 1006 q 709 759 709 871 q 648 602 709 666 q 476 521 587 539 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 "},"":{"x_min":16,"x_max":832,"ha":834,"o":"m 16 478 l 16 566 q 149 524 81 524 q 253 624 253 524 q 146 723 253 723 q 66 708 113 723 l 27 735 l 48 992 l 317 992 l 317 914 l 121 914 l 110 787 q 175 792 134 792 q 305 747 255 792 q 355 629 355 703 q 304 494 355 542 q 154 446 253 446 q 16 478 70 446 m 705 992 l 210 0 l 103 0 l 597 992 l 705 992 m 720 287 q 832 147 832 230 q 780 35 832 77 q 644 -7 728 -7 q 502 33 552 -7 q 453 143 453 73 q 546 281 453 231 q 470 412 470 335 q 518 511 470 474 q 643 549 567 549 q 766 512 718 549 q 814 412 814 475 q 720 287 814 334 m 645 321 q 712 413 712 355 q 641 480 712 480 q 571 413 571 480 q 645 321 571 357 m 630 247 q 554 142 554 203 q 641 61 554 61 q 730 142 730 61 q 639 243 730 203 l 630 247 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 339 860 q 457 1064 403 950 l 606 1064 l 606 1049 q 421 842 529 932 l 339 842 l 339 860 "},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 m 277 -327 l 277 -254 q 330 -258 299 -258 q 432 -196 432 -258 q 316 -119 432 -146 l 378 0 l 458 0 l 420 -78 q 530 -194 530 -103 q 332 -334 530 -334 q 277 -327 309 -334 "},"B":{"x_min":92,"x_max":772,"ha":834,"o":"m 92 992 l 390 992 q 660 932 576 992 q 744 740 744 873 q 690 596 744 653 q 546 526 637 538 l 546 519 q 772 287 772 482 q 685 76 772 153 q 449 0 598 0 l 92 0 l 92 992 m 218 572 l 409 572 q 562 609 514 572 q 610 732 610 646 q 558 848 610 813 q 395 884 507 884 l 218 884 l 218 572 m 218 464 l 218 107 l 426 107 q 638 292 638 107 q 418 464 638 464 l 218 464 "},"":{"x_min":53,"x_max":780.265625,"ha":834,"o":"m 139 168 q 225 74 225 168 q 139 -20 225 -20 q 53 74 53 -20 q 139 168 53 168 m 416 168 q 502 74 502 168 q 416 -20 502 -20 q 330 74 330 -20 q 416 168 330 168 m 694 168 q 780 74 780 168 q 694 -20 780 -20 q 608 74 608 -20 q 694 168 608 168 "},"H":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 992 l 218 992 l 218 574 l 615 574 l 615 992 l 742 992 l 742 0 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 642 842 l 559 842 q 416 967 502 879 q 273 842 326 875 l 192 842 l 192 860 q 232 905 208 879 q 351 1064 326 1010 l 482 1064 q 601 905 507 1010 l 642 860 l 642 842 "},"":{"x_min":40.75,"x_max":745,"ha":834,"o":"m 40 745 l 168 745 l 320 347 q 402 104 395 151 l 406 104 q 567 354 513 215 q 621 745 621 493 l 745 745 q 676 331 745 497 q 455 0 608 164 l 328 0 l 40 745 "},"":{"x_min":-89,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m -89 789 l -66 861 q -37 993 -44 938 l 93 993 l 93 978 q 59 897 93 967 q -15 771 26 827 l -89 771 l -89 789 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 439 l 103 541 l 730 541 l 730 439 l 103 439 "},"":{"x_min":8,"x_max":832,"ha":834,"o":"m 230 738 q 350 611 350 711 q 299 487 350 531 q 153 444 248 444 q 8 477 65 444 l 8 562 q 146 522 83 522 q 248 614 248 522 q 147 699 248 699 l 98 699 l 98 768 l 145 768 q 230 851 230 768 q 164 924 230 924 q 54 880 115 924 l 9 938 q 170 1002 84 1002 q 288 965 244 1002 q 332 865 332 928 q 230 738 332 771 m 705 992 l 210 0 l 103 0 l 597 992 l 705 992 m 720 287 q 832 147 832 230 q 780 35 832 77 q 644 -7 728 -7 q 502 33 552 -7 q 453 143 453 73 q 546 281 453 231 q 470 412 470 335 q 518 511 470 474 q 643 549 567 549 q 766 512 718 549 q 814 412 814 475 q 720 287 814 334 m 645 321 q 712 413 712 355 q 641 480 712 480 q 571 413 571 480 q 645 321 571 357 m 630 247 q 554 142 554 203 q 641 61 554 61 q 730 142 730 61 q 639 243 730 203 l 630 247 "},"":{"x_min":92,"x_max":637,"ha":834,"o":"m 92 -310 l 92 -205 q 288 -231 182 -231 q 412 -192 367 -231 q 456 -85 456 -154 l 456 648 l 171 662 l 171 745 l 580 745 l 580 -79 q 503 -267 580 -201 q 286 -334 426 -334 q 92 -310 175 -334 m 637 1045 q 596 1000 620 1026 q 477 842 501 893 l 346 842 q 227 1000 322 893 l 187 1045 l 187 1064 l 268 1064 q 411 937 324 1027 q 554 1064 494 1024 l 637 1064 l 637 1045 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 215 943 l 606 943 l 606 842 l 215 842 l 215 943 "},"":{"x_min":92,"x_max":656,"ha":834,"o":"m 656 842 l 573 842 q 430 967 516 879 q 287 842 340 875 l 206 842 l 206 860 q 246 905 222 879 q 365 1064 340 1010 l 496 1064 q 615 905 521 1010 l 656 860 l 656 842 m 92 -310 l 92 -205 q 288 -231 182 -231 q 412 -192 367 -231 q 456 -85 456 -154 l 456 648 l 171 662 l 171 745 l 580 745 l 580 -79 q 503 -267 580 -201 q 286 -334 426 -334 q 92 -310 175 -334 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 243 1070 l 172 1070 q 315 1250 188 1250 q 424 1211 354 1250 q 516 1173 493 1173 q 588 1251 571 1173 l 660 1251 q 517 1072 641 1072 q 410 1110 478 1072 q 315 1148 342 1148 q 243 1070 260 1148 "},"*":{"x_min":90.34375,"x_max":743.46875,"ha":834,"o":"m 485 1055 l 455 788 l 725 863 l 743 733 l 486 714 l 653 493 l 531 428 l 412 670 l 306 428 l 180 493 l 344 714 l 90 733 l 110 863 l 375 788 l 346 1055 l 485 1055 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 613 1030 q 552 892 606 943 q 406 842 498 842 q 205 1030 216 842 l 279 1030 q 311 960 284 977 q 408 943 338 943 q 538 1030 531 943 l 613 1030 "},"":{"x_min":36,"x_max":797,"ha":834,"o":"m 797 0 l 653 0 l 412 430 l 164 0 l 36 0 l 343 518 l 57 992 l 191 992 l 416 612 l 643 992 l 773 992 l 486 522 l 797 0 "},"":{"x_min":163.375,"x_max":671.359375,"ha":834,"o":"m 671 670 l 446 691 l 484 0 l 337 0 l 374 691 l 163 670 l 163 793 l 374 772 l 337 1055 l 484 1055 l 446 772 l 671 793 l 671 670 "},"":{"x_min":203,"x_max":631,"ha":834,"o":"m 416 1006 q 567 942 504 1006 q 631 791 631 879 q 567 641 631 703 q 416 579 504 579 q 265 641 327 579 q 203 791 203 704 q 265 942 203 879 q 416 1006 328 1006 m 416 661 q 500 699 465 661 q 536 790 536 737 q 500 884 536 845 q 416 923 464 923 q 332 884 367 923 q 297 790 297 845 q 332 699 297 737 q 416 661 367 661 "},"":{"x_min":75,"x_max":757,"ha":834,"o":"m 103 992 l 729 992 l 729 880 l 103 880 l 103 992 m 158 574 l 674 574 l 674 462 l 158 462 l 158 574 m 757 111 l 757 0 l 75 0 l 75 111 l 757 111 "},"":{"x_min":143,"x_max":813.25,"ha":834,"o":"m 813 0 l 669 0 l 364 473 l 269 396 l 269 0 l 143 0 l 143 992 l 269 992 l 269 496 l 351 609 l 659 992 l 801 992 l 447 559 l 813 0 m 347 -288 q 404 -85 389 -193 l 525 -85 l 525 -98 q 492 -182 525 -113 q 414 -307 459 -251 l 347 -307 l 347 -288 "},"":{"x_min":-3,"x_max":836,"ha":834,"o":"m 551 0 l 462 404 l 416 628 l 411 628 l 367 401 l 276 0 l 148 0 l -3 745 l 106 745 l 173 376 q 212 109 196 250 l 216 109 q 262 352 237 235 l 352 745 l 483 745 l 569 352 q 614 109 598 220 l 619 109 q 659 376 640 274 l 728 745 l 836 745 l 683 0 l 551 0 m 640 842 l 557 842 q 414 967 500 879 q 271 842 324 875 l 190 842 l 190 860 q 230 905 206 879 q 349 1064 324 1010 l 480 1064 q 599 905 505 1010 l 640 860 l 640 842 "},"":{"x_min":326,"x_max":508,"ha":834,"o":"m 326 860 l 348 932 q 377 1064 370 1009 l 508 1064 l 508 1049 q 474 968 508 1038 q 399 842 441 898 l 326 842 l 326 860 "},"":{"x_min":31,"x_max":805,"ha":834,"o":"m 354 450 l 354 496 q 260 655 354 655 q 117 599 187 655 l 78 692 q 268 758 168 758 q 437 637 398 758 q 598 758 490 758 q 747 665 690 758 q 805 424 805 573 l 805 347 l 476 347 q 520 157 478 219 q 632 96 563 96 q 786 145 705 96 l 786 35 q 624 -14 714 -14 q 412 144 475 -14 q 206 -14 340 -14 q 79 44 127 -14 q 31 208 31 103 q 253 445 31 434 l 354 450 m 479 450 l 684 450 q 657 600 684 545 q 585 655 631 655 q 512 603 541 655 q 479 450 483 550 m 353 363 l 295 358 q 154 207 154 347 q 175 120 154 152 q 231 88 196 88 q 319 143 285 88 q 353 296 353 198 l 353 363 m 361 860 q 479 1064 425 950 l 628 1064 l 628 1049 q 443 842 551 932 l 361 842 l 361 860 "},"":{"x_min":92,"x_max":772,"ha":834,"o":"m 92 992 l 390 992 q 660 932 576 992 q 744 740 744 873 q 690 596 744 653 q 546 526 637 538 l 546 519 q 772 287 772 482 q 685 76 772 153 q 449 0 598 0 l 92 0 l 92 992 m 218 572 l 409 572 q 562 609 514 572 q 610 732 610 646 q 558 848 610 813 q 395 884 507 884 l 218 884 l 218 572 m 218 464 l 218 107 l 426 107 q 638 292 638 107 q 418 464 638 464 l 218 464 "},"":{"x_min":158,"x_max":716,"ha":834,"o":"m 158 0 l 158 992 l 284 992 l 284 111 l 716 111 l 716 0 l 158 0 m 333 -288 q 390 -85 375 -193 l 511 -85 l 511 -98 q 478 -182 511 -113 q 400 -307 445 -251 l 333 -307 l 333 -288 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 249 1070 l 178 1070 q 321 1250 194 1250 q 430 1211 360 1250 q 522 1173 499 1173 q 594 1251 577 1173 l 666 1251 q 523 1072 647 1072 q 416 1110 484 1072 q 321 1148 348 1148 q 249 1070 266 1148 "},"":{"x_min":17,"x_max":820,"ha":834,"o":"m 441 0 l 322 0 l 101 793 l 94 793 q 107 510 107 621 l 107 0 l 17 0 l 17 992 l 135 992 l 355 202 l 359 202 q 350 476 350 408 l 350 992 l 441 992 l 441 0 m 647 183 q 524 246 570 183 q 479 420 479 310 q 650 656 479 656 q 773 593 727 656 q 820 420 820 531 q 775 244 820 306 q 647 183 730 183 m 649 264 q 711 303 694 264 q 729 421 729 343 q 711 537 729 499 q 649 574 694 574 q 587 536 604 574 q 569 421 569 498 q 587 304 569 344 q 649 264 604 264 m 506 0 l 506 96 l 787 96 l 787 0 l 506 0 "},"":{"x_min":29,"x_max":791,"ha":834,"o":"m 432 342 l 644 745 l 765 745 l 480 218 l 607 -94 q 665 -201 638 -171 q 736 -231 693 -231 q 791 -226 766 -231 l 791 -321 q 710 -334 746 -334 q 595 -303 641 -334 q 501 -153 549 -273 l 402 102 l 161 -334 l 29 -334 l 351 229 l 229 530 q 125 644 183 644 q 83 638 106 644 l 83 735 q 170 747 119 747 q 263 710 225 747 q 337 578 300 673 l 432 342 "},"":{"x_min":290,"x_max":690,"ha":834,"o":"m 413 745 l 413 220 q 544 88 413 88 q 690 101 621 88 l 690 7 q 536 -14 626 -14 q 290 219 290 -14 l 290 745 l 413 745 m 319 860 l 341 932 q 370 1064 363 1009 l 501 1064 l 501 1049 q 467 968 501 1038 q 392 842 434 898 l 319 842 l 319 860 "},"":{"x_min":69,"x_max":763,"ha":834,"o":"m 763 0 l 69 0 l 69 97 l 607 880 l 83 880 l 83 992 l 749 992 l 749 895 l 210 111 l 763 111 l 763 0 "},"":{"x_min":158,"x_max":716,"ha":834,"o":"m 158 0 l 158 992 l 284 992 l 284 111 l 716 111 l 716 0 l 158 0 m 509 787 l 526 860 q 550 992 544 939 l 672 992 l 672 978 q 643 901 672 968 q 573 770 615 834 l 509 770 l 509 787 "},"":{"x_min":95,"x_max":706,"ha":834,"o":"m 692 101 l 692 7 q 521 -14 603 -14 q 276 218 276 -14 l 276 648 l 95 648 l 95 715 l 276 749 l 328 943 l 399 943 l 399 745 l 696 745 l 696 648 l 399 648 l 399 219 q 529 88 399 88 q 692 101 592 88 m 543 850 l 560 923 q 584 1055 578 1002 l 706 1055 l 706 1041 q 677 964 706 1031 q 607 833 649 897 l 543 833 l 543 850 "},"o":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 "},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 "},"":{"x_min":2.796875,"x_max":832.25,"ha":834,"o":"m 416 1055 l 832 419 l 416 -216 l 2 419 l 416 1055 m 453 261 l 453 290 q 455 317 453 305 q 464 340 458 328 q 483 362 471 351 q 514 389 495 374 q 556 431 538 412 q 585 472 574 451 q 603 517 597 493 q 610 572 610 541 q 558 702 610 656 q 415 749 506 749 q 367 744 391 749 q 318 731 342 739 q 273 711 295 722 q 232 687 251 700 l 276 579 q 348 614 314 600 q 413 628 383 628 q 466 610 449 628 q 483 563 483 592 q 480 532 483 546 q 468 506 476 518 q 447 481 460 494 q 415 453 434 469 q 379 416 394 434 q 355 381 365 399 q 342 342 346 362 q 338 298 338 322 l 338 261 l 453 261 m 324 94 q 346 30 324 50 q 402 11 368 11 q 430 15 416 11 q 455 30 444 20 q 472 56 466 40 q 479 94 479 72 q 472 133 479 117 q 455 159 466 149 q 430 173 444 169 q 402 177 416 177 q 346 158 368 177 q 324 94 324 139 "},"d":{"x_min":93,"x_max":727,"ha":834,"o":"m 608 99 l 603 99 q 384 -14 526 -14 q 170 87 248 -14 q 93 370 93 188 q 171 655 93 553 q 384 758 249 758 q 603 649 524 758 l 611 649 q 603 759 603 736 l 603 1055 l 727 1055 l 727 0 l 627 0 l 608 99 m 603 342 l 603 370 q 556 590 603 524 q 405 655 508 655 q 220 369 220 655 q 406 88 220 88 q 555 148 510 88 q 603 342 600 208 "},",":{"x_min":299,"x_max":534,"ha":834,"o":"m 523 178 l 534 161 q 402 -196 495 9 l 299 -196 q 373 178 349 23 l 523 178 "},"\\"":{"x_min":193,"x_max":640.734375,"ha":834,"o":"m 353 992 l 325 634 l 220 634 l 193 992 l 353 992 m 640 992 l 612 634 l 507 634 l 480 992 l 640 992 "},"":{"x_min":127.6875,"x_max":750,"ha":834,"o":"m 361 958 l 179 972 l 179 1055 l 484 1055 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 958 m 587 850 l 604 923 q 628 1055 622 1002 l 750 1055 l 750 1041 q 721 964 750 1031 q 651 833 693 897 l 587 833 l 587 850 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 439 1023 q 504 945 504 1023 q 439 868 504 868 q 374 945 374 868 q 439 1023 374 1023 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 364 1089 q 482 1293 428 1179 l 631 1293 l 631 1278 q 446 1071 554 1161 l 364 1071 l 364 1089 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 335 1089 q 453 1293 399 1179 l 602 1293 l 602 1278 q 417 1071 525 1161 l 335 1071 l 335 1089 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m 641 1071 l 558 1071 q 415 1196 501 1108 q 272 1071 325 1104 l 191 1071 l 191 1089 q 231 1134 207 1108 q 350 1293 325 1239 l 481 1293 q 600 1134 506 1239 l 641 1089 l 641 1071 "},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m 335 1089 q 453 1293 399 1179 l 602 1293 l 602 1278 q 417 1071 525 1161 l 335 1071 l 335 1089 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 m 658 842 l 575 842 q 432 967 518 879 q 289 842 342 875 l 208 842 l 208 860 q 248 905 224 879 q 367 1064 342 1010 l 498 1064 q 617 905 523 1010 l 658 860 l 658 842 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":92,"x_max":751,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 751 -217 l 751 -293 q 645 -309 701 -309 q 521 -271 564 -309 q 479 -171 479 -234 q 603 0 479 -73 l 695 0 q 576 -162 576 -85 q 665 -227 576 -227 q 751 -217 711 -227 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 250 841 l 179 841 q 322 1021 195 1021 q 431 982 361 1021 q 523 944 500 944 q 595 1022 578 944 l 667 1022 q 524 843 648 843 q 417 881 485 843 q 322 919 349 919 q 250 841 267 919 "},"":{"x_min":31,"x_max":805,"ha":834,"o":"m 354 450 l 354 496 q 260 655 354 655 q 117 599 187 655 l 78 692 q 268 758 168 758 q 437 637 398 758 q 598 758 490 758 q 747 665 690 758 q 805 424 805 573 l 805 347 l 476 347 q 520 157 478 219 q 632 96 563 96 q 786 145 705 96 l 786 35 q 624 -14 714 -14 q 412 144 475 -14 q 206 -14 340 -14 q 79 44 127 -14 q 31 208 31 103 q 253 445 31 434 l 354 450 m 479 450 l 684 450 q 657 600 684 545 q 585 655 631 655 q 512 603 541 655 q 479 450 483 550 m 353 363 l 295 358 q 154 207 154 347 q 175 120 154 152 q 231 88 196 88 q 319 143 285 88 q 353 296 353 198 l 353 363 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 242 841 l 171 841 q 314 1021 187 1021 q 423 982 353 1021 q 515 944 492 944 q 587 1022 570 944 l 659 1022 q 516 843 640 843 q 409 881 477 843 q 314 919 341 919 q 242 841 259 919 "},"~":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 397 l 103 507 q 270 581 170 581 q 439 538 338 581 q 575 500 527 500 q 730 582 649 500 l 730 472 q 561 399 662 399 q 393 441 493 399 q 257 479 304 479 q 103 397 183 479 "},"":{"x_min":127.6875,"x_max":731.46875,"ha":834,"o":"m 361 958 l 179 972 l 179 1055 l 484 1055 l 484 96 l 723 83 l 723 0 l 127 0 l 127 83 l 361 96 l 361 958 m 666 540 q 731 462 731 540 q 666 385 731 385 q 601 462 601 385 q 666 540 601 540 "},"":{"x_min":87,"x_max":801,"ha":834,"o":"m 763 136 l 763 26 q 519 -14 663 -14 q 198 119 309 -14 q 87 497 87 252 q 208 868 87 731 q 540 1006 330 1006 q 801 947 690 1006 l 747 841 q 540 894 643 894 q 307 787 394 894 q 220 496 220 679 q 302 199 220 301 q 540 97 383 97 q 763 136 629 97 m 534 1252 q 599 1174 599 1252 q 534 1097 599 1097 q 469 1174 469 1097 q 534 1252 469 1252 "},"":{"x_min":330,"x_max":502.265625,"ha":834,"o":"m 416 569 q 330 663 330 569 q 416 758 330 758 q 502 663 502 758 q 416 569 502 569 m 374 458 l 456 458 l 491 -253 l 340 -253 l 374 458 "},"":{"x_min":-3,"x_max":836,"ha":834,"o":"m 551 0 l 462 404 l 416 628 l 411 628 l 367 401 l 276 0 l 148 0 l -3 745 l 106 745 l 173 376 q 212 109 196 250 l 216 109 q 262 352 237 235 l 352 745 l 483 745 l 569 352 q 614 109 598 220 l 619 109 q 659 376 640 274 l 728 745 l 836 745 l 683 0 l 551 0 m 288 1015 q 353 945 353 1015 q 288 876 353 876 q 223 945 223 876 q 288 1015 223 1015 m 542 1015 q 608 945 608 1015 q 542 876 608 876 q 477 945 477 876 q 542 1015 477 1015 "},"":{"x_min":143,"x_max":813.25,"ha":834,"o":"m 813 0 l 664 0 l 269 502 l 269 0 l 143 0 l 143 992 l 269 992 l 269 511 l 654 992 l 794 992 l 409 515 l 813 0 "},"":{"x_min":158,"x_max":719,"ha":834,"o":"m 719 992 l 719 880 l 284 880 l 284 0 l 158 0 l 158 992 l 719 992 "},"P":{"x_min":119,"x_max":742,"ha":834,"o":"m 245 385 l 245 0 l 119 0 l 119 992 l 393 992 q 742 701 742 992 q 647 468 742 552 q 374 385 553 385 l 245 385 m 245 493 l 359 493 q 550 541 493 493 q 608 694 608 590 q 380 884 608 884 l 245 884 l 245 493 "},"%":{"x_min":0,"x_max":834,"ha":834,"o":"m 197 532 q 54 596 108 532 q 0 768 0 660 q 53 941 0 879 q 199 1003 107 1003 q 342 939 287 1003 q 397 768 397 876 q 343 595 397 658 q 197 532 290 532 m 199 613 q 293 769 293 613 q 199 921 293 921 q 103 769 103 921 q 199 613 103 613 m 717 992 l 222 0 l 115 0 l 609 992 l 717 992 m 634 -12 q 491 52 546 -12 q 437 224 437 116 q 490 397 437 335 q 636 459 544 459 q 779 395 724 459 q 834 224 834 332 q 780 51 834 114 q 634 -12 727 -12 m 636 69 q 730 225 730 69 q 636 377 730 377 q 540 225 540 377 q 636 69 540 69 "},"":{"x_min":12.15625,"x_max":816.71875,"ha":834,"o":"m 258 -14 q 167 9 204 -14 q 105 75 129 32 q 71 181 82 119 q 61 320 61 242 q 64 405 61 366 q 75 482 67 445 q 94 558 82 520 q 123 642 106 597 l 12 642 l 12 691 l 103 745 l 816 745 l 816 642 l 711 642 q 739 558 727 597 q 759 482 751 520 q 770 405 767 445 q 774 320 774 366 q 763 181 774 242 q 729 75 753 119 q 669 9 706 32 q 579 -14 632 -14 q 479 15 516 -14 q 424 106 442 45 l 417 106 q 361 15 399 45 q 258 -14 323 -14 m 668 320 q 664 401 668 362 q 653 478 661 440 q 632 556 645 516 q 604 642 620 596 l 230 642 q 201 556 213 596 q 181 478 189 516 q 170 401 173 440 q 166 320 166 362 q 172 214 166 258 q 190 142 178 170 q 221 101 203 114 q 266 88 240 88 q 311 102 292 88 q 343 140 330 116 q 361 198 355 165 q 368 270 368 231 l 368 408 l 473 408 l 473 270 q 501 135 473 182 q 572 88 528 88 q 614 101 596 88 q 645 142 632 114 q 662 214 657 170 q 668 320 668 258 "},"_":{"x_min":-11,"x_max":844,"ha":834,"o":"m 844 -219 l -11 -219 l -11 -125 l 844 -125 l 844 -219 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 m 248 841 l 177 841 q 320 1021 193 1021 q 429 982 359 1021 q 521 944 498 944 q 593 1022 576 944 l 665 1022 q 522 843 646 843 q 415 881 483 843 q 320 919 347 919 q 248 841 265 919 "},"":{"x_min":126,"x_max":794.25,"ha":834,"o":"m 252 409 l 252 0 l 126 0 l 126 992 l 368 992 q 721 710 721 992 q 524 443 721 515 l 794 0 l 645 0 l 407 409 l 252 409 m 252 517 l 362 517 q 532 561 478 517 q 587 704 587 606 q 533 842 587 800 q 359 884 479 884 l 252 884 l 252 517 m 303 1089 q 421 1293 367 1179 l 570 1293 l 570 1278 q 385 1071 493 1161 l 303 1071 l 303 1089 "},"":{"x_min":310,"x_max":522,"ha":834,"o":"m 511 161 l 522 145 q 402 -179 484 1 l 310 -179 q 361 161 346 18 l 511 161 "},"":{"x_min":19,"x_max":832,"ha":834,"o":"m 76 456 l 285 910 l 19 910 l 19 992 l 391 992 l 391 924 l 181 456 l 76 456 m 662 992 l 167 0 l 60 0 l 554 992 l 662 992 m 720 287 q 832 147 832 230 q 780 35 832 77 q 644 -7 728 -7 q 502 33 552 -7 q 453 143 453 73 q 546 281 453 231 q 470 412 470 335 q 518 511 470 474 q 643 549 567 549 q 766 512 718 549 q 814 412 814 475 q 720 287 814 334 m 645 321 q 712 413 712 355 q 641 480 712 480 q 571 413 571 480 q 645 321 571 357 m 630 247 q 554 142 554 203 q 641 61 554 61 q 730 142 730 61 q 639 243 730 203 l 630 247 "},"":{"x_min":0,"x_max":821,"ha":834,"o":"m 821 0 l 378 0 l 378 307 l 181 307 l 116 0 l 0 0 l 229 992 l 821 992 l 821 880 l 504 880 l 504 574 l 795 574 l 795 462 l 504 462 l 504 111 l 821 111 l 821 0 m 206 419 l 378 419 l 378 880 l 305 880 l 206 419 "},"":{"x_min":88,"x_max":717,"ha":834,"o":"m 326 274 l 526 274 l 526 178 l 326 178 l 326 0 l 207 0 l 207 178 l 88 178 l 88 274 l 207 274 l 207 992 l 717 992 l 717 879 l 326 879 l 326 531 l 691 531 l 691 418 l 326 418 l 326 274 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 221 1172 l 612 1172 l 612 1071 l 221 1071 l 221 1172 "},"":{"x_min":77,"x_max":756,"ha":834,"o":"m 182 439 l 275 439 q 562 227 562 439 q 275 0 562 0 l 77 0 l 77 745 l 182 745 l 182 439 m 182 336 l 182 102 l 279 102 q 456 219 456 102 q 415 308 456 280 q 276 336 373 336 l 182 336 m 756 0 l 650 0 l 650 745 l 756 745 l 756 0 "},"":{"x_min":197,"x_max":704,"ha":834,"o":"m 704 642 l 320 642 l 320 0 l 197 0 l 197 745 l 704 745 l 704 642 m 354 860 q 472 1064 418 950 l 621 1064 l 621 1049 q 436 842 544 932 l 354 842 l 354 860 "},"":{"x_min":14,"x_max":833,"ha":834,"o":"m 833 0 l 443 0 l 410 -7 q 345 -14 376 -14 q 14 498 14 -14 q 361 1007 14 1007 q 465 992 417 1007 l 833 992 l 833 880 l 568 880 l 568 574 l 807 574 l 807 462 l 568 462 l 568 111 l 833 111 l 833 0 m 442 119 l 442 873 q 352 895 402 895 q 140 497 140 895 q 351 97 140 97 q 442 119 398 97 "},"":{"x_min":202,"x_max":629,"ha":834,"o":"m 360 959 q 413 1164 389 1054 l 562 1164 l 562 1150 q 415 942 498 1039 l 360 942 l 360 959 m 266 1015 q 332 945 332 1015 q 313 894 332 912 q 266 876 294 876 q 202 945 202 876 q 266 1015 202 1015 m 563 1015 q 629 945 629 1015 q 563 876 629 876 q 498 945 498 876 q 563 1015 498 1015 "},"":{"x_min":22,"x_max":825,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 825 -217 l 825 -293 q 719 -309 775 -309 q 595 -271 638 -309 q 553 -171 553 -234 q 677 0 553 -73 l 769 0 q 650 -162 650 -85 q 739 -227 650 -227 q 825 -217 785 -227 "},"":{"x_min":45,"x_max":814,"ha":834,"o":"m 373 0 l 373 462 l 171 462 l 171 0 l 45 0 l 45 992 l 171 992 l 171 574 l 373 574 l 373 992 l 499 992 l 499 574 l 524 574 q 740 501 666 574 q 814 290 814 428 q 736 74 814 149 q 513 0 659 0 l 373 0 m 499 107 l 527 107 q 697 290 697 107 q 653 421 697 381 q 511 462 609 462 l 499 462 l 499 107 "},"":{"x_min":272,"x_max":561,"ha":834,"o":"m 561 356 l 351 78 l 272 130 l 433 366 l 272 602 l 351 655 l 561 374 l 561 356 "},"":{"x_min":3.203125,"x_max":725,"ha":834,"o":"m 601 0 l 601 451 q 441 627 601 627 q 282 564 332 627 q 232 357 232 500 l 232 0 l 109 0 l 109 843 l 3 843 l 3 932 l 109 932 l 109 1055 l 233 1055 l 233 932 l 516 932 l 516 843 l 232 843 l 232 715 l 225 616 l 232 616 q 466 730 305 730 q 660 665 596 730 q 725 458 725 600 l 725 0 l 601 0 "},"<":{"x_min":103,"x_max":730,"ha":834,"o":"m 730 150 l 103 455 l 103 525 l 730 831 l 730 722 l 244 490 l 730 258 l 730 150 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 730 541 l 730 178 l 628 178 l 628 439 l 103 439 l 103 541 l 730 541 "},"t":{"x_min":95,"x_max":696,"ha":834,"o":"m 692 101 l 692 7 q 521 -14 603 -14 q 276 218 276 -14 l 276 648 l 95 648 l 95 715 l 276 749 l 328 943 l 399 943 l 399 745 l 696 745 l 696 648 l 399 648 l 399 219 q 529 88 399 88 q 692 101 592 88 "},"":{"x_min":92,"x_max":821,"ha":834,"o":"m 702 111 l 821 111 l 821 -261 l 704 -261 l 704 0 l 92 0 l 92 992 l 218 992 l 218 111 l 575 111 l 575 992 l 702 992 l 702 111 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 499 842 l 416 842 q 232 1049 304 938 l 232 1064 l 380 1064 q 499 860 439 943 l 499 842 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 289 1015 q 354 945 354 1015 q 289 876 354 876 q 224 945 224 876 q 289 1015 224 1015 m 543 1015 q 609 945 609 1015 q 543 876 609 876 q 478 945 478 876 q 543 1015 478 1015 "},"":{"x_min":18,"x_max":817,"ha":834,"o":"m 361 1006 l 487 1006 l 487 884 l 517 884 q 736 779 656 884 q 817 514 817 674 q 734 246 817 354 q 503 139 652 139 l 487 139 l 487 -14 l 361 -14 l 361 139 l 344 139 q 103 246 188 139 q 18 514 18 354 q 101 778 18 673 q 329 884 184 884 l 361 884 l 361 1006 m 487 246 l 491 246 q 638 319 585 246 q 690 517 690 391 q 642 705 690 634 q 507 776 594 776 l 487 776 l 487 246 m 361 776 l 340 776 q 195 705 247 776 q 144 517 144 634 q 200 319 144 391 q 357 246 256 246 l 361 246 l 361 776 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 496 1071 l 413 1071 q 229 1278 301 1167 l 229 1293 l 377 1293 q 496 1089 436 1172 l 496 1071 "},"I":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 "},"":{"x_min":168,"x_max":666,"ha":834,"o":"m 168 860 q 271 1064 223 950 l 420 1064 l 420 1049 q 235 842 344 932 l 168 842 l 168 860 m 413 860 q 517 1064 465 940 l 666 1064 l 666 1049 q 481 842 590 932 l 413 842 l 413 860 "},"":{"x_min":330,"x_max":502,"ha":834,"o":"m 416 585 q 502 490 502 585 q 416 396 502 396 q 330 490 330 396 q 416 585 330 585 "},"":{"x_min":114,"x_max":716,"ha":834,"o":"m 461 569 q 375 663 375 569 q 461 758 375 758 q 547 663 547 758 q 461 569 547 569 m 520 458 l 520 432 q 490 301 520 352 q 381 194 460 251 q 265 89 294 128 q 237 -18 237 49 q 287 -120 237 -82 q 426 -159 337 -159 q 674 -97 547 -159 l 716 -195 q 429 -267 567 -267 q 198 -200 282 -267 q 114 -24 114 -134 q 150 122 114 66 q 285 252 187 179 q 389 347 367 311 q 412 445 412 384 l 412 458 l 520 458 "},"":{"x_min":242,"x_max":691,"ha":834,"o":"m 691 1039 l 663 942 q 508 960 591 960 q 396 928 427 960 q 365 814 365 895 l 365 0 l 242 0 l 242 814 q 303 1002 242 942 q 505 1063 364 1063 q 691 1039 590 1063 "},"":{"x_min":16,"x_max":791,"ha":834,"o":"m 451 2 l 451 110 q 542 97 497 97 q 664 250 664 97 l 664 340 q 510 497 664 497 l 345 497 l 345 0 l 219 0 l 219 880 l 16 880 l 16 992 l 587 992 l 587 880 l 345 880 l 345 609 l 524 609 q 721 543 651 609 q 791 356 791 477 l 791 263 q 726 58 791 130 q 546 -14 662 -14 q 451 2 486 -14 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 222 860 q 325 1064 277 950 l 474 1064 l 474 1049 q 289 842 398 932 l 222 842 l 222 860 m 467 860 q 571 1064 519 940 l 720 1064 l 720 1049 q 535 842 644 932 l 467 842 l 467 860 "},"":{"x_min":0,"x_max":821,"ha":834,"o":"m 821 0 l 378 0 l 378 307 l 181 307 l 116 0 l 0 0 l 229 992 l 821 992 l 821 880 l 504 880 l 504 574 l 795 574 l 795 462 l 504 462 l 504 111 l 821 111 l 821 0 m 206 419 l 378 419 l 378 880 l 305 880 l 206 419 m 428 1089 q 546 1293 492 1179 l 695 1293 l 695 1278 q 510 1071 618 1161 l 428 1071 l 428 1089 "},"":{"x_min":50,"x_max":784,"ha":834,"o":"m 352 -334 l 352 -12 q 50 371 50 4 q 188 750 50 583 l 268 688 q 179 531 202 601 q 155 371 155 462 q 352 90 155 112 l 352 500 q 544 758 352 758 q 720 658 656 758 q 784 387 784 558 q 697 102 784 208 q 457 -12 611 -2 l 457 -334 l 352 -334 m 457 90 q 663 386 663 110 q 544 655 663 655 q 457 501 457 655 l 457 90 "},";":{"x_min":278,"x_max":507,"ha":834,"o":"m 421 764 q 507 669 507 764 q 421 575 507 575 q 335 669 335 575 q 421 764 335 764 m 479 161 l 490 145 q 370 -179 455 12 l 278 -179 q 329 161 309 -6 l 479 161 "},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 m 328 -288 q 385 -85 370 -193 l 506 -85 l 506 -98 q 473 -182 506 -113 q 395 -307 440 -251 l 328 -307 l 328 -288 "},"":{"x_min":79,"x_max":742,"ha":834,"o":"m 455 524 l 742 524 l 742 36 q 456 -14 609 -14 q 179 121 279 -14 q 79 497 79 256 q 188 870 79 735 q 491 1006 298 1006 q 726 947 621 1006 l 677 837 q 487 894 578 894 q 285 789 357 894 q 212 496 212 683 q 479 97 212 97 q 615 116 544 97 l 615 412 l 455 412 l 455 524 m 497 1252 q 562 1174 562 1252 q 497 1097 562 1097 q 432 1174 432 1097 q 497 1252 432 1252 "},"n":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 "},"":{"x_min":82,"x_max":799.671875,"ha":834,"o":"m 585 644 l 593 644 q 639 745 613 714 l 736 745 q 702 446 702 632 l 702 162 q 758 87 702 87 q 799 93 778 87 l 799 3 q 721 -14 764 -14 q 586 99 613 -14 l 578 99 q 365 -14 505 -14 q 157 86 233 -14 q 82 370 82 187 q 160 656 82 555 q 378 758 238 758 q 585 644 520 758 m 578 360 l 578 370 q 533 590 578 524 q 387 655 487 655 q 209 369 209 655 q 388 88 209 88 q 532 150 489 88 q 578 360 575 213 m 336 860 l 358 932 q 387 1064 380 1009 l 518 1064 l 518 1049 q 484 968 518 1038 q 409 842 451 898 l 336 842 l 336 860 "},"":{"x_min":175,"x_max":690,"ha":834,"o":"m 413 745 l 413 220 q 544 88 413 88 q 690 101 621 88 l 690 7 q 536 -14 626 -14 q 290 219 290 -14 l 290 745 l 413 745 m 240 1015 q 305 945 305 1015 q 240 876 305 876 q 175 945 175 876 q 240 1015 175 1015 m 494 1015 q 560 945 560 1015 q 494 876 560 876 q 429 945 429 876 q 494 1015 429 1015 "},"\ufeff":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":70,"x_max":763.84375,"ha":834,"o":"m 763 745 l 763 668 l 630 650 q 675 506 675 592 q 602 333 675 397 q 401 269 530 269 q 343 273 364 269 q 275 182 275 234 q 384 125 275 125 l 511 125 q 691 72 629 125 q 754 -77 754 20 q 371 -334 754 -334 q 146 -278 223 -334 q 70 -123 70 -223 q 232 61 70 22 q 167 165 167 93 q 257 293 167 240 q 162 376 197 318 q 128 502 128 434 q 200 691 128 625 q 405 758 272 758 q 507 745 464 758 l 763 745 m 402 353 q 554 508 554 353 q 401 669 554 669 q 248 506 248 669 q 402 353 248 353 m 469 17 l 342 17 q 186 -118 186 17 q 370 -237 186 -237 q 637 -84 637 -237 q 603 -3 637 -24 q 469 17 569 17 m 537 1045 q 480 842 494 942 l 359 842 l 359 856 q 389 935 359 867 q 470 1064 420 1003 l 537 1064 l 537 1045 "},"":{"x_min":82,"x_max":751,"ha":834,"o":"m 628 582 l 630 609 q 591 816 636 733 q 441 899 545 899 q 266 841 352 899 l 266 959 q 457 1002 356 1002 q 751 633 751 1002 q 636 177 751 369 q 327 -14 522 -14 q 82 254 82 -14 q 175 554 82 423 q 436 685 269 685 q 628 582 561 685 m 606 459 q 548 552 591 516 q 453 588 504 588 q 276 479 343 588 q 209 248 209 371 q 337 88 209 88 q 505 192 431 88 q 606 459 580 295 "},"":{"x_min":146,"x_max":789,"ha":834,"o":"m 258 344 l 351 457 l 625 745 l 770 745 l 434 398 l 789 0 l 644 0 l 354 318 l 266 262 l 266 0 l 146 0 l 146 745 l 266 745 l 266 547 l 255 344 l 258 344 "},"":{"x_min":155.125,"x_max":677.359375,"ha":834,"o":"m 452 336 l 677 357 l 677 235 l 452 256 l 490 0 l 343 0 l 380 256 l 155 235 l 155 357 l 380 336 l 348 532 l 380 718 l 155 697 l 155 820 l 380 799 l 343 1055 l 490 1055 l 452 799 l 677 820 l 677 697 l 452 718 l 484 532 l 452 336 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 m 650 1045 q 609 1000 633 1026 q 490 842 514 893 l 359 842 q 240 1000 335 893 l 200 1045 l 200 1064 l 281 1064 q 424 937 337 1027 q 567 1064 507 1024 l 650 1064 l 650 1045 "},"":{"x_min":16,"x_max":818,"ha":834,"o":"m 415 -10 l 325 -10 l 138 522 l 16 522 l 16 615 l 216 615 l 372 165 l 719 1150 l 818 1150 l 415 -10 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 707 -196 l 707 -272 q 601 -288 657 -288 q 477 -250 520 -288 q 435 -150 435 -213 q 559 21 435 -52 l 651 21 q 532 -141 532 -64 q 621 -206 532 -206 q 707 -196 667 -206 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 429 1051 q 501 973 501 1051 q 479 915 501 934 q 429 896 458 896 q 356 973 356 896 q 429 1051 356 1051 m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 570 -217 l 570 -293 q 464 -309 520 -309 q 340 -271 383 -309 q 298 -171 298 -234 q 422 0 298 -73 l 514 0 q 395 -162 395 -85 q 484 -227 395 -227 q 570 -217 530 -227 "},"":{"x_min":69,"x_max":762,"ha":834,"o":"m 479 0 l 353 0 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 0 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 533 l 103 643 q 270 718 169 718 q 439 674 337 718 q 575 637 525 637 q 730 719 649 637 l 730 609 q 561 536 664 536 q 393 578 493 536 q 257 616 306 616 q 103 533 181 616 m 103 256 l 103 366 q 270 440 170 440 q 439 397 338 440 q 575 359 527 359 q 730 441 649 359 l 730 331 q 561 258 662 258 q 393 300 493 258 q 257 338 304 338 q 103 256 183 338 "},"":{"x_min":164,"x_max":690,"ha":834,"o":"m 413 745 l 413 220 q 544 88 413 88 q 690 101 621 88 l 690 7 q 536 -14 626 -14 q 290 219 290 -14 l 290 745 l 413 745 m 322 959 q 375 1164 351 1054 l 524 1164 l 524 1150 q 377 942 460 1039 l 322 942 l 322 959 m 228 1015 q 294 945 294 1015 q 275 894 294 912 q 228 876 256 876 q 164 945 164 876 q 228 1015 164 1015 m 525 1015 q 591 945 591 1015 q 525 876 591 876 q 460 945 460 876 q 525 1015 460 1015 "},"":{"x_min":146,"x_max":789,"ha":834,"o":"m 258 344 l 351 457 l 625 745 l 770 745 l 434 398 l 789 0 l 644 0 l 354 318 l 266 262 l 266 0 l 146 0 l 146 745 l 266 745 l 266 547 l 255 344 l 258 344 "},"g":{"x_min":70,"x_max":763.84375,"ha":834,"o":"m 763 745 l 763 668 l 630 650 q 675 506 675 592 q 602 333 675 397 q 401 269 530 269 q 343 273 364 269 q 275 182 275 234 q 384 125 275 125 l 511 125 q 691 72 629 125 q 754 -77 754 20 q 371 -334 754 -334 q 146 -278 223 -334 q 70 -123 70 -223 q 232 61 70 22 q 167 165 167 93 q 257 293 167 240 q 162 376 197 318 q 128 502 128 434 q 200 691 128 625 q 405 758 272 758 q 507 745 464 758 l 763 745 m 402 353 q 554 508 554 353 q 401 669 554 669 q 248 506 248 669 q 402 353 248 353 m 469 17 l 342 17 q 186 -118 186 17 q 370 -237 186 -237 q 637 -84 637 -237 q 603 -3 637 -24 q 469 17 569 17 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 255 21 l 204 -58 l 115 -1 l 172 87 q 78 373 78 194 q 168 655 78 553 q 418 758 258 758 q 578 719 505 758 l 630 800 l 719 743 l 661 654 q 755 373 755 548 q 663 87 755 189 q 414 -14 572 -14 q 255 21 326 -14 m 241 186 l 517 631 q 411 655 472 655 q 253 585 302 655 q 205 373 205 515 q 241 186 205 251 m 592 553 l 316 110 q 421 88 358 88 q 579 159 531 88 q 627 373 627 231 q 592 553 627 484 m 338 860 q 456 1064 402 950 l 605 1064 l 605 1049 q 420 842 528 932 l 338 842 l 338 860 "},"":{"x_min":236,"x_max":596,"ha":834,"o":"m 596 456 l 236 456 l 236 525 l 360 660 q 454 774 433 740 q 474 847 474 808 q 400 924 474 924 q 291 873 346 924 l 240 932 q 408 1002 319 1002 q 531 961 487 1002 q 576 850 576 920 q 552 759 576 805 q 441 626 528 713 l 349 534 l 596 534 l 596 456 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 243 1070 l 172 1070 q 315 1250 188 1250 q 424 1211 354 1250 q 516 1173 493 1173 q 588 1251 571 1173 l 660 1251 q 517 1072 641 1072 q 410 1110 478 1072 q 315 1148 342 1148 q 243 1070 260 1148 "},"":{"x_min":93,"x_max":664,"ha":834,"o":"m 93 26 l 93 138 q 302 97 202 97 q 474 151 411 97 q 537 304 537 205 l 537 992 l 664 992 l 664 305 q 568 72 664 159 q 312 -14 473 -14 q 93 26 165 -14 "},"":{"x_min":4,"x_max":830,"ha":834,"o":"m 416 1006 q 720 867 610 1006 q 830 495 830 729 q 720 123 830 261 q 416 -14 610 -14 q 113 124 222 -14 q 4 495 4 262 q 112 867 4 728 q 416 1006 221 1006 m 416 59 q 667 175 579 59 q 756 496 756 291 q 667 816 756 700 q 416 932 579 932 q 165 816 253 932 q 77 496 77 700 q 165 175 77 291 q 416 59 253 59 m 593 307 l 593 218 q 442 185 520 185 q 239 268 310 185 q 168 497 168 352 q 242 722 168 639 q 447 806 317 806 q 619 763 533 806 l 578 677 q 446 713 503 713 q 320 655 364 713 q 276 495 276 598 q 446 277 276 277 q 593 307 510 277 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 258 l 588 490 l 103 722 l 103 831 l 730 525 l 730 455 l 103 150 l 103 258 m 103 0 l 103 101 l 730 101 l 730 0 l 103 0 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 619 1259 q 558 1121 612 1172 q 412 1071 504 1071 q 211 1259 222 1071 l 285 1259 q 317 1189 290 1206 q 414 1172 344 1172 q 544 1259 537 1172 l 619 1259 "},"":{"x_min":197,"x_max":691,"ha":834,"o":"m 691 656 l 320 656 l 320 0 l 197 0 l 197 745 l 567 745 l 567 961 l 691 961 l 691 656 "},"":{"x_min":56,"x_max":777,"ha":834,"o":"m 56 745 l 183 745 l 361 301 q 421 104 416 162 l 425 104 q 486 302 441 180 l 648 745 l 777 745 l 454 -97 q 348 -274 409 -215 q 181 -334 288 -334 q 68 -322 123 -334 l 68 -224 q 160 -231 110 -231 q 261 -203 225 -231 q 326 -108 298 -176 l 365 -7 l 56 745 m 295 1015 q 360 945 360 1015 q 295 876 360 876 q 230 945 230 876 q 295 1015 230 1015 m 549 1015 q 615 945 615 1015 q 549 876 615 876 q 484 945 484 876 q 549 1015 484 1015 "},"":{"x_min":49,"x_max":741,"ha":834,"o":"m 183 0 l 183 334 l 98 281 l 49 365 l 183 450 l 183 992 l 309 992 l 309 530 l 512 659 l 566 574 l 309 413 l 309 111 l 741 111 l 741 0 l 183 0 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":160.25,"x_max":656.703125,"ha":834,"o":"m 656 1042 l 656 943 q 579 962 618 962 q 462 803 462 962 l 462 -92 q 405 -272 462 -211 q 245 -334 348 -334 q 160 -321 195 -334 l 160 -221 q 238 -241 200 -241 q 361 -82 361 -241 l 361 814 q 572 1055 361 1055 q 656 1042 629 1055 "},"\\\\":{"x_min":143,"x_max":690,"ha":834,"o":"m 263 992 l 690 0 l 569 0 l 143 992 l 263 992 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 478 1071 l 395 1071 q 211 1278 283 1167 l 211 1293 l 359 1293 q 478 1089 418 1172 l 478 1071 "},"":{"x_min":29,"x_max":784,"ha":834,"o":"m 402 439 l 505 439 q 784 227 784 439 q 501 0 784 0 l 279 0 l 279 642 l 29 642 l 29 745 l 402 745 l 402 439 m 402 336 l 402 102 l 499 102 q 678 219 678 102 q 636 308 678 280 q 496 336 594 336 l 402 336 "},"":{"x_min":117,"x_max":723,"ha":834,"o":"m 638 -272 l 525 -272 q 602 -94 602 -161 q 557 -33 602 -53 q 404 5 513 -13 q 117 349 117 53 q 501 758 117 758 q 720 717 613 758 l 678 610 q 493 650 570 650 q 244 351 244 650 q 297 179 244 224 q 480 109 349 133 q 723 -61 723 65 q 638 -272 723 -156 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 228 1172 l 619 1172 l 619 1071 l 228 1071 l 228 1172 "},"!":{"x_min":330,"x_max":502.265625,"ha":834,"o":"m 458 280 l 376 280 l 341 992 l 492 992 l 458 280 m 416 168 q 502 74 502 168 q 416 -20 502 -20 q 330 74 330 -20 q 416 168 330 168 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 m 324 -327 l 324 -254 q 377 -258 346 -258 q 479 -196 479 -258 q 363 -119 479 -146 l 425 0 l 505 0 l 467 -78 q 577 -194 577 -103 q 379 -334 577 -334 q 324 -327 356 -334 "},"":{"x_min":93,"x_max":742,"ha":834,"o":"m 93 992 l 209 992 l 209 449 q 204 276 209 352 l 200 174 l 204 174 l 597 992 l 742 992 l 742 0 l 625 0 l 625 538 q 637 821 625 633 l 632 821 l 237 0 l 93 0 l 93 992 m 677 1287 q 412 1071 663 1071 q 222 1121 280 1071 q 157 1287 163 1171 l 273 1287 q 307 1188 279 1217 q 417 1159 336 1159 q 560 1287 548 1159 l 677 1287 "},"":{"x_min":92,"x_max":770,"ha":834,"o":"m 92 0 l 92 992 l 710 992 l 710 880 l 218 880 l 218 574 l 402 574 q 770 290 770 574 q 680 74 770 149 q 421 0 591 0 l 92 0 m 218 107 l 408 107 q 636 290 636 107 q 578 421 636 380 q 387 462 521 462 l 218 462 l 218 107 "},"":{"x_min":93,"x_max":832.796875,"ha":834,"o":"m 608 99 l 603 99 q 384 -14 526 -14 q 170 83 248 -14 q 93 356 93 181 q 171 631 93 532 q 384 730 249 730 q 603 622 526 730 l 611 622 q 603 733 603 709 l 603 843 l 346 843 l 346 932 l 603 932 l 603 1055 l 727 1055 l 727 932 l 832 932 l 832 843 l 727 843 l 727 0 l 627 0 l 608 99 m 603 329 l 603 356 q 556 565 603 502 q 405 627 508 627 q 220 354 220 627 q 406 88 220 88 q 555 144 509 88 q 603 329 600 200 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 m 480 1023 q 545 945 545 1023 q 480 868 545 868 q 415 945 415 868 q 480 1023 415 1023 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 221 1172 l 612 1172 l 612 1071 l 221 1071 l 221 1172 "},"":{"x_min":1,"x_max":833,"ha":834,"o":"m 358 684 l 478 684 l 577 330 q 626 122 618 181 q 670 542 627 158 l 717 992 l 833 992 l 706 0 l 577 0 l 462 393 q 418 584 435 487 q 373 392 396 467 l 267 0 l 139 0 l 1 992 l 116 992 l 176 542 q 203 285 191 422 q 215 122 215 148 q 262 333 231 224 l 358 684 m 339 1089 q 457 1293 403 1179 l 606 1293 l 606 1278 q 421 1071 529 1161 l 339 1071 l 339 1089 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 255 21 l 204 -58 l 115 -1 l 172 87 q 78 373 78 194 q 168 655 78 553 q 418 758 258 758 q 578 719 505 758 l 630 800 l 719 743 l 661 654 q 755 373 755 548 q 663 87 755 189 q 414 -14 572 -14 q 255 21 326 -14 m 241 186 l 517 631 q 411 655 472 655 q 253 585 302 655 q 205 373 205 515 q 241 186 205 251 m 592 553 l 316 110 q 421 88 358 88 q 579 159 531 88 q 627 373 627 231 q 592 553 627 484 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 648 842 l 565 842 q 422 967 508 879 q 279 842 332 875 l 198 842 l 198 860 q 238 905 214 879 q 357 1064 332 1010 l 488 1064 q 607 905 513 1010 l 648 860 l 648 842 "},"}":{"x_min":154,"x_max":681,"ha":834,"o":"m 328 214 q 486 383 328 355 l 486 391 q 328 559 328 419 l 328 783 q 290 863 328 838 q 154 890 251 889 l 154 992 q 452 793 452 987 l 452 567 q 681 439 452 439 l 681 337 q 452 208 452 337 l 452 -19 q 154 -220 452 -215 l 154 -118 q 290 -91 251 -117 q 328 -10 328 -65 l 328 214 "},"":{"x_min":46,"x_max":786,"ha":834,"o":"m 786 83 l 786 0 l 46 0 l 46 89 l 351 992 l 477 992 l 786 83 m 413 852 q 353 626 378 701 l 181 111 l 646 111 l 475 622 q 413 852 440 727 "},"":{"x_min":3,"x_max":820,"ha":834,"o":"m 176 583 q 56 638 99 583 q 14 793 14 693 q 179 1004 14 1004 q 298 949 255 1004 q 342 793 342 894 q 176 583 342 583 m 178 664 q 226 696 214 664 q 238 794 238 728 q 224 895 238 868 q 178 922 211 922 q 131 894 144 922 q 117 794 117 865 q 130 696 117 728 q 178 664 142 664 m 505 572 l 30 378 l 3 444 l 477 640 l 505 572 m 294 0 q 174 55 216 0 q 132 210 132 110 q 297 421 132 421 q 416 366 373 421 q 460 210 460 311 q 294 0 460 0 m 296 81 q 344 113 332 81 q 356 211 356 145 q 342 312 356 285 q 296 339 329 339 q 249 311 262 339 q 235 211 235 283 q 248 113 235 145 q 296 81 260 81 m 654 0 q 534 55 576 0 q 492 210 492 110 q 657 421 492 421 q 776 366 733 421 q 820 210 820 311 q 654 0 820 0 m 656 81 q 704 113 692 81 q 716 211 716 145 q 703 311 716 284 q 656 339 691 339 q 609 311 622 339 q 595 211 595 283 q 608 113 595 145 q 656 81 620 81 "},"":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 m 289 1244 q 354 1174 354 1244 q 289 1105 354 1105 q 224 1174 224 1105 q 289 1244 224 1244 m 543 1244 q 609 1174 609 1244 q 543 1105 609 1105 q 478 1174 478 1105 q 543 1244 478 1244 "},"":{"x_min":179,"x_max":719,"ha":834,"o":"m 719 727 l 685 614 q 533 650 602 650 q 362 586 422 650 q 302 404 302 523 l 302 0 l 179 0 l 179 745 l 279 745 l 294 608 l 299 608 q 410 723 351 688 q 555 758 469 758 q 719 727 636 758 m 651 1045 q 610 1000 634 1026 q 491 842 515 893 l 360 842 q 241 1000 336 893 l 201 1045 l 201 1064 l 282 1064 q 425 937 338 1027 q 568 1064 508 1024 l 651 1064 l 651 1045 "},"":{"x_min":-4,"x_max":838,"ha":834,"o":"m -4 315 l -4 429 l 838 429 l 838 315 l -4 315 "},"N":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 "},"":{"x_min":115,"x_max":717,"ha":834,"o":"m 717 992 l 222 0 l 115 0 l 609 992 l 717 992 "},"":{"x_min":77,"x_max":757,"ha":834,"o":"m 361 0 l 173 868 l 167 868 q 180 592 180 687 l 180 0 l 77 0 l 77 992 l 244 992 l 412 183 l 416 183 l 586 992 l 757 992 l 757 0 l 653 0 l 653 601 q 663 866 653 670 l 657 866 l 466 0 l 361 0 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 345 1089 q 463 1293 409 1179 l 612 1293 l 612 1278 q 427 1071 535 1161 l 345 1071 l 345 1089 "},"":{"x_min":172,"x_max":660,"ha":834,"o":"m 243 841 l 172 841 q 315 1021 188 1021 q 424 982 354 1021 q 516 944 493 944 q 588 1022 571 944 l 660 1022 q 517 843 641 843 q 410 881 478 843 q 315 919 342 919 q 243 841 260 919 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":192,"x_max":642,"ha":834,"o":"m 642 1045 q 601 1000 625 1026 q 482 842 506 893 l 351 842 q 232 1000 327 893 l 192 1045 l 192 1064 l 273 1064 q 416 937 329 1027 q 559 1064 499 1024 l 642 1064 l 642 1045 "},"":{"x_min":109,"x_max":764,"ha":834,"o":"m 625 0 l 607 99 l 600 99 q 373 -14 529 -14 q 109 258 109 -14 l 109 745 l 232 745 l 232 264 q 392 88 232 88 q 551 151 501 88 q 601 357 601 214 l 601 745 l 725 745 l 725 0 l 625 0 m 764 -217 l 764 -293 q 658 -309 714 -309 q 534 -271 577 -309 q 492 -171 492 -234 q 616 0 492 -73 l 708 0 q 589 -162 589 -85 q 678 -227 589 -227 q 764 -217 724 -227 "},"":{"x_min":18,"x_max":814,"ha":834,"o":"m 814 992 l 523 289 q 431 109 471 166 q 329 18 390 51 q 183 -14 269 -14 q 63 6 113 -14 l 63 131 q 184 97 120 97 q 299 132 258 97 q 377 250 341 167 l 18 992 l 156 992 l 416 440 q 429 408 424 423 q 441 377 435 391 l 442 377 l 469 451 l 681 992 l 814 992 m 680 1287 q 415 1071 666 1071 q 225 1121 283 1071 q 160 1287 166 1171 l 276 1287 q 310 1188 282 1217 q 420 1159 339 1159 q 563 1287 551 1159 l 680 1287 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 621 1259 q 560 1121 614 1172 q 414 1071 506 1071 q 213 1259 224 1071 l 287 1259 q 319 1189 292 1206 q 416 1172 346 1172 q 546 1259 539 1172 l 621 1259 "},"":{"x_min":70,"x_max":763.84375,"ha":834,"o":"m 763 745 l 763 668 l 630 650 q 675 506 675 592 q 602 333 675 397 q 401 269 530 269 q 343 273 364 269 q 275 182 275 234 q 384 125 275 125 l 511 125 q 691 72 629 125 q 754 -77 754 20 q 371 -334 754 -334 q 146 -278 223 -334 q 70 -123 70 -223 q 232 61 70 22 q 167 165 167 93 q 257 293 167 240 q 162 376 197 318 q 128 502 128 434 q 200 691 128 625 q 405 758 272 758 q 507 745 464 758 l 763 745 m 402 353 q 554 508 554 353 q 401 669 554 669 q 248 506 248 669 q 402 353 248 353 m 469 17 l 342 17 q 186 -118 186 17 q 370 -237 186 -237 q 637 -84 637 -237 q 603 -3 637 -24 q 469 17 569 17 m 637 842 l 554 842 q 411 967 497 879 q 268 842 321 875 l 187 842 l 187 860 q 227 905 203 879 q 346 1064 321 1010 l 477 1064 q 596 905 502 1010 l 637 860 l 637 842 "},"":{"x_min":49.859375,"x_max":786.140625,"ha":834,"o":"m 367 99 l 367 0 l 49 0 l 49 111 l 230 111 q 58 559 58 270 q 153 889 58 771 q 417 1007 248 1007 q 682 889 587 1007 q 778 559 778 771 q 604 111 778 268 l 786 111 l 786 0 l 468 0 l 468 99 q 644 556 644 256 q 417 895 644 895 q 191 556 191 895 q 367 99 191 256 "},"s":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 "},"?":{"x_min":114,"x_max":719,"ha":834,"o":"m 313 280 l 313 305 q 344 437 313 386 q 452 544 375 488 q 567 649 539 610 q 595 756 595 688 q 545 858 595 819 q 406 898 495 898 q 157 836 289 898 l 114 940 q 403 1006 255 1006 q 633 939 548 1006 q 719 762 719 873 q 682 615 719 671 q 547 485 645 559 q 444 390 467 426 q 421 292 421 353 l 421 280 l 313 280 m 373 168 q 459 74 459 168 q 373 -20 459 -20 q 287 74 287 -20 q 373 168 287 168 "},"":{"x_min":92,"x_max":741,"ha":834,"o":"m 741 0 l 596 0 l 201 821 l 196 821 q 208 538 208 633 l 208 0 l 92 0 l 92 992 l 236 992 l 629 174 l 633 174 q 624 449 624 380 l 624 992 l 741 992 l 741 0 m 295 -288 q 352 -85 337 -193 l 473 -85 l 473 -98 q 440 -182 473 -113 q 362 -307 407 -251 l 295 -307 l 295 -288 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 222 1172 l 613 1172 l 613 1071 l 222 1071 l 222 1172 "},"":{"x_min":77,"x_max":757,"ha":834,"o":"m 361 0 l 173 868 l 167 868 q 180 592 180 687 l 180 0 l 77 0 l 77 992 l 244 992 l 412 183 l 416 183 l 586 992 l 757 992 l 757 0 l 653 0 l 653 601 q 663 866 653 670 l 657 866 l 466 0 l 361 0 "},"":{"x_min":258,"x_max":577,"ha":834,"o":"m 417 685 q 577 507 577 685 q 533 374 577 420 q 417 329 490 329 q 299 374 341 329 q 258 507 258 419 q 417 685 258 685 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 232 745 l 232 436 l 601 436 l 601 745 l 725 745 l 725 0 l 601 0 l 601 333 l 232 333 l 232 0 l 109 0 l 109 745 l 232 745 "},"(":{"x_min":200,"x_max":633,"ha":834,"o":"m 502 992 l 633 992 q 327 386 327 736 q 631 -220 327 32 l 502 -220 q 200 384 200 19 q 502 992 200 745 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 499 l 441 0 l 390 0 l 85 498 l 390 1000 l 441 1000 l 749 499 m 624 499 l 416 846 l 209 499 l 416 151 l 624 499 "},"":{"x_min":82,"x_max":799.671875,"ha":834,"o":"m 585 644 l 593 644 q 639 745 613 714 l 736 745 q 702 446 702 632 l 702 162 q 758 87 702 87 q 799 93 778 87 l 799 3 q 721 -14 764 -14 q 586 99 613 -14 l 578 99 q 365 -14 505 -14 q 157 86 233 -14 q 82 370 82 187 q 160 656 82 555 q 378 758 238 758 q 585 644 520 758 m 578 360 l 578 370 q 533 590 578 524 q 387 655 487 655 q 209 369 209 655 q 388 88 209 88 q 532 150 489 88 q 578 360 575 213 "},"":{"x_min":0.4375,"x_max":833.5625,"ha":834,"o":"m 92 827 l 92 992 l 218 992 l 218 827 l 615 827 l 615 992 l 742 992 l 742 827 l 833 827 l 833 719 l 742 719 l 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 719 l 0 719 l 0 827 l 92 827 m 615 574 l 615 719 l 218 719 l 218 574 l 615 574 "},"":{"x_min":78,"x_max":756,"ha":834,"o":"m 756 0 l 650 0 l 650 608 q 628 522 644 590 q 604 439 613 464 l 462 0 l 371 0 l 229 439 q 183 608 223 456 l 183 0 l 78 0 l 78 745 l 224 745 l 367 299 q 416 118 384 247 q 451 247 419 126 q 465 297 458 274 l 612 745 l 756 745 l 756 0 "},"":{"x_min":136.296875,"x_max":700,"ha":834,"o":"m 342 439 q 506 465 457 439 q 555 551 555 492 q 386 655 555 655 q 178 606 296 655 l 136 706 q 387 758 244 758 q 601 707 526 758 q 676 562 676 657 q 545 398 676 436 l 545 390 q 700 205 700 346 q 618 44 700 102 q 384 -14 536 -14 q 139 32 225 -14 l 139 145 q 387 88 261 88 q 579 210 579 88 q 367 336 579 336 l 266 336 l 266 439 l 342 439 "},"":{"x_min":158,"x_max":711,"ha":834,"o":"m 594 992 l 594 1196 l 711 1196 l 711 880 l 284 880 l 284 0 l 158 0 l 158 992 l 594 992 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 642 1071 l 559 1071 q 416 1196 502 1108 q 273 1071 326 1104 l 192 1071 l 192 1089 q 232 1134 208 1108 q 351 1293 326 1239 l 482 1293 q 601 1134 507 1239 l 642 1089 l 642 1071 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 429 1051 q 501 973 501 1051 q 479 915 501 934 q 429 896 458 896 q 356 973 356 896 q 429 1051 356 1051 m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 "},"V":{"x_min":22,"x_max":812,"ha":834,"o":"m 677 992 l 812 992 l 479 0 l 353 0 l 22 992 l 154 992 l 355 363 q 415 136 383 276 q 478 367 436 234 l 677 992 "},"":{"x_min":126,"x_max":794.25,"ha":834,"o":"m 252 409 l 252 0 l 126 0 l 126 992 l 368 992 q 721 710 721 992 q 524 443 721 515 l 794 0 l 645 0 l 407 409 l 252 409 m 252 517 l 362 517 q 532 561 478 517 q 587 704 587 606 q 533 842 587 800 q 359 884 479 884 l 252 884 l 252 517 m 326 -288 q 383 -85 368 -193 l 504 -85 l 504 -98 q 471 -182 504 -113 q 393 -307 438 -251 l 326 -307 l 326 -288 "},"@":{"x_min":21,"x_max":813,"ha":834,"o":"m 537 272 l 535 272 q 380 150 485 150 q 253 220 300 150 q 206 411 206 291 q 271 637 206 551 q 444 723 337 723 q 618 691 537 723 l 603 409 q 602 362 602 383 l 602 357 q 650 238 602 238 q 718 497 718 238 q 642 792 718 685 q 440 899 567 899 q 201 769 287 899 q 115 412 115 639 q 203 85 115 200 q 453 -30 291 -30 q 687 22 575 -30 l 687 -67 q 449 -123 580 -123 q 134 17 247 -123 q 21 408 21 157 q 134 834 21 677 q 443 992 247 992 q 712 859 611 992 q 813 496 813 726 q 768 244 813 339 q 646 150 724 150 q 537 272 557 150 m 503 620 q 435 634 468 634 q 345 571 377 634 q 314 408 314 508 q 398 238 314 238 q 493 449 484 238 l 503 620 "},"":{"x_min":303,"x_max":530,"ha":834,"o":"m 520 992 l 530 977 q 410 652 492 832 l 303 652 q 369 992 345 832 l 520 992 "},"":{"x_min":5,"x_max":830,"ha":834,"o":"m 360 973 l 339 901 q 240 917 285 917 q 108 764 108 917 q 237 615 108 615 q 354 631 305 615 l 354 559 q 230 534 303 534 q 64 593 124 534 q 5 763 5 652 q 66 939 5 879 q 237 999 127 999 q 360 973 304 999 m 707 992 l 212 0 l 106 0 l 600 992 l 707 992 m 622 -5 q 475 57 533 -5 q 418 227 418 120 q 474 397 418 336 q 625 459 530 459 q 772 395 714 459 q 830 227 830 332 q 774 57 830 119 q 622 -5 718 -5 m 624 76 q 726 227 726 76 q 624 377 726 377 q 521 227 521 377 q 624 76 521 76 "},"i":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 429 1051 q 501 973 501 1051 q 479 915 501 934 q 429 896 458 896 q 356 973 356 896 q 429 1051 356 1051 m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 "},"":{"x_min":146,"x_max":789,"ha":834,"o":"m 258 344 l 351 457 l 625 745 l 770 745 l 434 398 l 789 0 l 644 0 l 354 318 l 266 262 l 266 0 l 146 0 l 146 745 l 266 745 l 266 547 l 255 344 l 258 344 m 344 860 q 462 1064 408 950 l 611 1064 l 611 1049 q 426 842 534 932 l 344 842 l 344 860 "},"":{"x_min":103,"x_max":730,"ha":834,"o":"m 730 150 l 103 455 l 103 525 l 730 831 l 730 722 l 244 490 l 730 258 l 730 150 m 103 0 l 103 101 l 730 101 l 730 0 l 103 0 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 301 1015 q 366 945 366 1015 q 301 876 366 876 q 236 945 236 876 q 301 1015 236 1015 m 555 1015 q 621 945 621 1015 q 555 876 621 876 q 490 945 490 876 q 555 1015 490 1015 "},"":{"x_min":109,"x_max":735,"ha":834,"o":"m 109 745 l 232 745 l 232 345 q 418 88 232 88 q 565 167 520 88 q 611 412 611 245 q 568 745 611 573 l 691 745 q 735 406 735 578 q 657 88 735 191 q 414 -14 579 -14 q 109 337 109 -14 l 109 745 "},"":{"x_min":90,"x_max":744,"ha":834,"o":"m 744 346 l 217 346 q 451 93 222 93 q 703 145 584 93 l 703 36 q 456 -14 590 -14 q 189 87 289 -14 q 90 366 90 188 q 182 652 90 547 q 428 758 274 758 q 658 666 572 758 q 744 423 744 575 l 744 346 m 220 449 l 616 449 q 428 655 616 655 q 220 449 238 655 m 631 1030 q 570 892 624 943 q 424 842 516 842 q 223 1030 234 842 l 297 1030 q 329 960 302 977 q 426 943 356 943 q 556 1030 549 943 l 631 1030 "},"":{"x_min":45.1875,"x_max":723.234375,"ha":834,"o":"m 723 0 l 612 0 l 612 660 l 474 660 l 474 0 l 364 0 l 364 660 l 224 660 l 224 0 l 113 0 l 113 660 l 45 660 l 45 703 l 113 745 l 113 800 q 126 920 113 872 q 166 996 140 968 q 230 1036 192 1025 q 317 1048 268 1048 q 380 1041 350 1048 q 433 1025 410 1033 q 493 1053 458 1044 q 570 1063 528 1063 q 636 1055 605 1063 q 692 1037 667 1047 l 664 947 q 621 960 645 954 q 573 966 598 966 q 529 958 547 966 q 498 933 510 951 q 480 887 486 916 q 474 814 474 857 l 474 745 l 723 745 l 723 0 m 224 745 l 364 745 l 364 813 q 380 943 364 890 q 351 949 366 947 q 320 952 336 952 q 278 945 296 952 q 248 920 260 937 q 230 873 236 902 q 224 801 224 844 l 224 745 "},"":{"x_min":123,"x_max":709,"ha":834,"o":"m 709 0 l 123 0 l 123 88 l 572 648 l 145 648 l 145 745 l 697 745 l 697 641 l 256 96 l 709 96 l 709 0 m 434 1023 q 499 945 499 1023 q 434 868 499 868 q 369 945 369 868 q 434 1023 369 1023 "},"":{"x_min":46.15625,"x_max":747,"ha":834,"o":"m 98 841 l 46 947 q 306 1006 155 1006 q 629 874 512 1006 q 747 513 747 742 q 630 123 747 260 q 300 -14 514 -14 q 57 26 156 -14 l 57 135 q 280 97 191 97 q 613 462 602 97 l 185 462 l 185 574 l 610 574 q 517 809 597 724 q 306 894 436 894 q 98 841 203 894 "},"":{"x_min":78,"x_max":755,"ha":834,"o":"m 414 -14 q 172 91 267 -14 q 78 373 78 196 q 170 654 78 551 q 418 758 262 758 q 660 652 566 758 q 755 373 755 547 q 661 89 755 193 q 414 -14 568 -14 m 416 88 q 627 373 627 88 q 415 655 627 655 q 205 373 205 655 q 416 88 205 88 m 223 860 q 326 1064 278 950 l 475 1064 l 475 1049 q 290 842 399 932 l 223 842 l 223 860 m 468 860 q 572 1064 520 940 l 721 1064 l 721 1049 q 536 842 645 932 l 468 842 l 468 860 "},"":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 m 620 1259 q 559 1121 613 1172 q 413 1071 505 1071 q 212 1259 223 1071 l 286 1259 q 318 1189 291 1206 q 415 1172 345 1172 q 545 1259 538 1172 l 620 1259 "},"":{"x_min":83,"x_max":791,"ha":834,"o":"m 294 333 l 188 333 l 188 0 l 83 0 l 83 745 l 188 745 l 188 436 l 296 436 q 545 758 319 758 q 726 657 661 758 q 791 373 791 557 q 541 -14 791 -14 q 294 333 313 -14 m 544 88 q 651 154 618 88 q 685 373 685 220 q 652 588 685 521 q 543 655 619 655 q 435 590 468 655 q 401 373 401 525 q 435 155 401 223 q 544 88 468 88 "},"":{"x_min":152.921875,"x_max":678.5625,"ha":834,"o":"m 678 0 l 152 0 l 152 83 l 353 96 l 353 895 l 152 908 l 152 992 l 678 992 l 678 908 l 479 895 l 479 96 l 678 83 l 678 0 m 423 1252 q 488 1174 488 1252 q 423 1097 488 1097 q 358 1174 358 1097 q 423 1252 358 1252 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 666 1274 q 625 1229 649 1255 q 506 1071 530 1122 l 375 1071 q 256 1229 351 1122 l 216 1274 l 216 1293 l 297 1293 q 440 1166 353 1256 q 583 1293 523 1253 l 666 1293 l 666 1274 "},"":{"x_min":272,"x_max":561,"ha":834,"o":"m 272 374 l 482 655 l 561 602 l 399 366 l 561 130 l 482 78 l 272 356 l 272 374 "},"":{"x_min":146,"x_max":789,"ha":834,"o":"m 261 375 l 352 478 l 619 745 l 770 745 l 435 422 l 789 0 l 644 0 l 356 341 l 269 286 l 269 0 l 146 0 l 146 1055 l 269 1055 l 269 571 l 258 375 l 261 375 m 329 -288 q 386 -85 371 -193 l 507 -85 l 507 -98 q 474 -182 507 -113 q 396 -307 441 -251 l 329 -307 l 329 -288 "},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 m 493 842 l 410 842 q 226 1049 298 938 l 226 1064 l 374 1064 q 493 860 433 943 l 493 842 "},"":{"x_min":103.53125,"x_max":730.203125,"ha":834,"o":"m 366 439 l 103 439 l 103 541 l 366 541 l 366 804 l 467 804 l 467 541 l 730 541 l 730 439 l 467 439 l 467 178 l 366 178 l 366 439 m 103 0 l 103 101 l 730 101 l 730 0 l 103 0 "},"|":{"x_min":366,"x_max":467.734375,"ha":834,"o":"m 366 1055 l 467 1055 l 467 -334 l 366 -334 l 366 1055 "},"":{"x_min":165.140625,"x_max":669,"ha":834,"o":"m 285 724 q 176 884 176 778 q 246 1014 176 965 q 435 1063 317 1063 q 656 1014 545 1063 l 618 919 q 432 966 513 966 q 296 886 296 966 q 330 823 296 850 q 462 756 363 797 q 619 661 569 714 q 669 532 669 609 q 570 349 669 409 q 669 196 669 295 q 593 47 669 102 q 384 -7 518 -7 q 165 37 246 -7 l 165 144 q 384 89 281 89 q 548 185 548 89 q 519 251 548 224 q 386 320 489 278 q 214 428 252 377 q 176 549 176 478 q 285 724 176 670 m 484 389 q 563 514 563 440 q 513 612 563 575 q 371 682 462 650 q 281 564 281 650 q 320 478 281 514 q 460 399 358 442 l 484 389 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 232 102 l 601 102 l 601 745 l 725 745 l 725 0 l 484 0 l 484 -258 l 361 -258 l 361 0 l 109 0 l 109 745 l 232 745 l 232 102 "},"":{"x_min":0,"x_max":801,"ha":834,"o":"m 498 437 l 531 437 q 801 226 801 437 q 516 0 801 0 l 375 0 l 375 642 l 248 642 q 207 191 225 319 q 159 26 190 62 q 62 -10 127 -10 q 0 -1 20 -10 l 0 86 q 33 78 14 78 q 77 107 61 78 q 109 266 94 136 q 149 745 125 397 l 498 745 l 498 437 m 498 334 l 498 102 l 533 102 q 695 218 695 102 q 657 306 695 279 q 530 334 620 334 l 498 334 "},"q":{"x_min":93,"x_max":727,"ha":834,"o":"m 603 644 l 608 644 l 627 745 l 727 745 l 727 -334 l 603 -334 l 603 -16 q 611 99 603 11 l 603 99 q 384 -14 526 -14 q 170 87 248 -14 q 93 370 93 188 q 171 655 93 553 q 384 758 249 758 q 603 644 525 758 m 603 342 l 603 370 q 556 590 603 524 q 405 655 508 655 q 220 369 220 655 q 406 88 220 88 q 555 148 510 88 q 603 342 600 208 "},"":{"x_min":262,"x_max":569,"ha":834,"o":"m 569 -229 q 557 -291 569 -264 q 524 -338 545 -319 q 474 -367 503 -357 q 413 -377 446 -377 q 351 -367 379 -377 q 303 -338 323 -357 q 272 -292 283 -319 q 262 -231 262 -265 q 272 -169 262 -196 q 303 -123 283 -142 q 351 -94 323 -104 q 413 -85 379 -85 q 474 -94 445 -85 q 523 -123 502 -104 q 556 -168 544 -142 q 569 -229 569 -195 m 494 -231 q 472 -174 494 -194 q 415 -154 450 -154 q 358 -174 380 -154 q 336 -231 336 -194 q 356 -287 336 -267 q 415 -307 376 -307 q 472 -287 450 -307 q 494 -231 494 -267 "},"":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 -334 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 745 l 208 745 l 227 644 l 233 644 q 461 758 302 758 q 725 486 725 758 l 725 -334 l 601 -334 m 380 860 l 402 932 q 431 1064 424 1009 l 562 1064 l 562 1049 q 528 968 562 1038 q 453 842 495 898 l 380 842 l 380 860 "},"":{"x_min":-0.25,"x_max":834.25,"ha":834,"o":"m 253 511 l 7 992 l 128 992 l 366 511 l 366 992 l 492 992 l 492 511 l 703 992 l 824 992 l 603 511 l 834 0 l 708 0 l 492 502 l 492 0 l 366 0 l 366 502 l 123 0 l 0 0 l 253 511 "},"":{"x_min":4,"x_max":830,"ha":834,"o":"m 416 1006 q 720 867 610 1006 q 830 495 830 729 q 720 123 830 261 q 416 -14 610 -14 q 113 124 222 -14 q 4 495 4 262 q 112 867 4 728 q 416 1006 221 1006 m 416 59 q 667 175 579 59 q 756 496 756 291 q 667 816 756 700 q 416 932 579 932 q 165 816 253 932 q 77 496 77 700 q 165 175 77 291 q 416 59 253 59 m 508 461 l 668 194 l 548 194 l 407 432 l 344 432 l 344 194 l 236 194 l 236 799 l 395 799 q 616 619 616 799 q 508 461 616 508 m 344 524 l 393 524 q 507 618 507 524 q 479 687 507 667 q 390 706 450 706 l 344 706 l 344 524 "},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 742 0 l 615 0 l 615 462 l 218 462 l 218 0 l 92 0 l 92 992 l 218 992 l 218 574 l 615 574 l 615 992 l 742 992 l 742 0 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 "},"":{"x_min":56,"x_max":808,"ha":834,"o":"m 182 388 l 182 0 l 56 0 l 56 992 l 199 992 q 515 702 515 992 q 438 470 515 553 q 209 388 361 388 l 182 388 m 182 485 l 207 485 q 389 690 389 485 q 222 884 389 884 l 182 884 l 182 485 m 808 92 l 808 7 q 699 -14 766 -14 q 554 172 554 -14 l 554 407 l 476 407 l 476 466 l 554 501 l 594 647 l 648 647 l 648 504 l 790 504 l 790 407 l 648 407 l 648 181 q 724 82 648 82 q 808 92 766 82 "},"":{"x_min":21,"x_max":706,"ha":834,"o":"m 706 0 l 582 0 l 582 642 l 351 642 q 266 148 326 306 q 83 -10 205 -10 q 21 -1 41 -10 l 21 86 q 54 78 35 78 q 175 241 129 78 q 246 745 221 403 l 706 745 l 706 0 "},"":{"x_min":87,"x_max":796.359375,"ha":834,"o":"m 796 745 l 796 642 l 615 642 q 736 342 736 509 q 648 84 736 182 q 409 -14 561 -14 q 173 83 259 -14 q 87 355 87 180 q 463 745 87 745 l 796 745 m 503 642 l 463 642 q 271 576 328 642 q 214 356 214 509 q 266 159 214 230 q 414 88 318 88 q 558 153 509 88 q 608 337 608 218 q 503 642 608 520 "},"":{"x_min":100,"x_max":734,"ha":834,"o":"m 415 -14 q 180 115 260 -14 q 100 494 100 245 q 177 875 100 751 q 415 1000 254 1000 q 653 870 572 1000 q 734 494 734 741 q 415 -14 734 -14 m 223 547 l 606 547 q 556 810 601 723 q 413 897 511 897 q 274 812 319 897 q 223 547 228 727 m 606 458 l 223 458 q 272 177 227 267 q 413 88 317 88 q 556 176 510 88 q 606 458 602 264 "}," ":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":50,"x_max":793,"ha":834,"o":"m 50 -334 l 50 -256 l 446 364 l 60 914 l 60 992 l 748 992 l 748 880 l 237 880 l 596 365 l 219 -222 l 793 -222 l 793 -334 l 50 -334 "},"":{"x_min":-91,"x_max":786.140625,"ha":834,"o":"m 367 99 l 367 0 l 49 0 l 49 111 l 230 111 q 58 559 58 270 q 153 889 58 771 q 417 1007 248 1007 q 682 889 587 1007 q 778 559 778 771 q 604 111 778 268 l 786 111 l 786 0 l 468 0 l 468 99 q 644 556 644 256 q 417 895 644 895 q 191 556 191 895 q 367 99 191 256 m -91 789 l -68 861 q -39 993 -46 938 l 91 993 l 91 978 q 57 897 91 967 q -17 771 24 827 l -91 771 l -91 789 "},"":{"x_min":-3,"x_max":836,"ha":834,"o":"m 551 0 l 462 404 l 416 628 l 411 628 l 367 401 l 276 0 l 148 0 l -3 745 l 106 745 l 173 376 q 212 109 196 250 l 216 109 q 262 352 237 235 l 352 745 l 483 745 l 569 352 q 614 109 598 220 l 619 109 q 659 376 640 274 l 728 745 l 836 745 l 683 0 l 551 0 m 354 860 q 472 1064 418 950 l 621 1064 l 621 1049 q 436 842 544 932 l 354 842 l 354 860 "},"+":{"x_min":103.53125,"x_max":730.203125,"ha":834,"o":"m 366 439 l 103 439 l 103 541 l 366 541 l 366 804 l 467 804 l 467 541 l 730 541 l 730 439 l 467 439 l 467 178 l 366 178 l 366 439 "},"":{"x_min":147,"x_max":719,"ha":834,"o":"m 719 0 l 147 0 l 147 992 l 719 992 l 719 880 l 273 880 l 273 574 l 693 574 l 693 462 l 273 462 l 273 111 l 719 111 l 719 0 m 306 1244 q 371 1174 371 1244 q 306 1105 371 1105 q 241 1174 241 1105 q 306 1244 241 1244 m 560 1244 q 626 1174 626 1244 q 560 1105 626 1105 q 495 1174 495 1105 q 560 1244 495 1244 "},"":{"x_min":96,"x_max":738,"ha":834,"o":"m 96 32 l 96 152 q 375 93 238 93 q 611 258 611 93 q 564 366 611 328 q 371 456 516 404 q 170 575 231 506 q 109 754 109 644 q 196 939 109 872 q 435 1006 283 1006 q 718 953 591 1006 l 674 841 q 432 894 544 894 q 235 752 235 894 q 279 641 235 683 q 461 551 323 599 q 682 428 626 491 q 738 264 738 364 q 644 60 738 134 q 376 -14 550 -14 q 96 32 197 -14 m 663 1274 q 622 1229 646 1255 q 503 1071 527 1122 l 372 1071 q 253 1229 348 1122 l 213 1274 l 213 1293 l 294 1293 q 437 1166 350 1256 q 580 1293 520 1253 l 663 1293 l 663 1274 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":92,"x_max":742,"ha":834,"o":"m 603 575 l 609 578 q 443 845 569 733 l 270 742 l 221 819 l 368 907 q 251 981 297 955 l 298 1065 q 465 964 395 1017 l 618 1058 l 669 981 l 537 902 q 742 388 742 705 q 654 93 742 200 q 415 -14 567 -14 q 181 76 270 -14 q 92 323 92 167 q 173 569 92 481 q 400 658 255 658 q 603 575 543 658 m 415 555 q 219 317 219 555 q 416 88 219 88 q 568 155 522 88 q 614 355 614 222 q 561 498 614 442 q 415 555 508 555 "},"":{"x_min":74,"x_max":820,"ha":834,"o":"m 459 102 l 634 102 l 634 745 l 740 745 l 740 102 l 820 102 l 820 -258 l 714 -258 l 714 0 l 74 0 l 74 745 l 179 745 l 179 102 l 354 102 l 354 745 l 459 745 l 459 102 "},"":{"x_min":56,"x_max":776,"ha":834,"o":"m 776 359 l 214 359 l 214 117 q 415 33 297 33 q 684 193 588 33 l 732 165 q 592 17 666 59 q 415 -24 518 -24 q 154 85 252 -24 q 56 359 56 195 q 160 639 56 536 q 415 743 264 743 q 674 637 572 743 q 776 362 776 532 l 776 359 m 618 417 l 618 604 q 414 685 536 685 q 214 606 298 685 l 214 417 l 618 417 "},"":{"x_min":18,"x_max":817,"ha":834,"o":"m 361 1006 l 487 1006 l 487 884 l 517 884 q 736 779 656 884 q 817 514 817 674 q 734 246 817 354 q 503 139 652 139 l 487 139 l 487 -14 l 361 -14 l 361 139 l 344 139 q 103 246 188 139 q 18 514 18 354 q 101 778 18 673 q 329 884 184 884 l 361 884 l 361 1006 m 487 246 l 491 246 q 638 319 585 246 q 690 517 690 391 q 642 705 690 634 q 507 776 594 776 l 487 776 l 487 246 m 361 776 l 340 776 q 195 705 247 776 q 144 517 144 634 q 200 319 144 391 q 357 246 256 246 l 361 246 l 361 776 "},"":{"x_min":138,"x_max":696,"ha":834,"o":"m 138 32 l 138 145 q 388 88 268 88 q 575 196 575 88 q 542 264 575 235 q 388 336 508 292 q 190 444 231 395 q 149 560 149 493 q 224 705 149 652 q 433 758 300 758 q 684 707 568 758 l 643 606 q 428 655 520 655 q 269 565 269 655 q 303 499 269 523 q 460 430 337 474 q 649 327 602 378 q 696 203 696 277 q 616 44 696 102 q 392 -14 537 -14 q 138 32 224 -14 m 285 -327 l 285 -254 q 338 -258 307 -258 q 440 -196 440 -258 q 324 -119 440 -146 l 386 0 l 466 0 l 428 -78 q 538 -194 538 -103 q 340 -334 538 -334 q 285 -327 317 -334 "},"":{"x_min":0,"x_max":0,"ha":834},"":{"x_min":133.6875,"x_max":729.171875,"ha":834,"o":"m 367 648 l 184 662 l 184 745 l 490 745 l 490 96 l 729 83 l 729 0 l 133 0 l 133 83 l 367 96 l 367 648 "},"":{"x_min":92,"x_max":696,"ha":834,"o":"m 606 0 l 580 99 l 575 99 q 468 10 523 35 q 327 -14 413 -14 q 154 44 217 -14 q 92 207 92 102 q 436 442 92 431 l 573 447 l 573 494 q 409 655 573 655 q 187 599 309 655 l 144 692 q 404 758 277 758 q 627 699 558 758 q 696 509 696 640 l 696 0 l 606 0 m 572 362 l 462 357 q 274 315 330 352 q 219 204 219 279 q 354 82 219 82 q 513 138 454 82 q 572 294 572 194 l 572 362 m 297 1015 q 362 945 362 1015 q 297 876 362 876 q 232 945 232 876 q 297 1015 232 1015 m 551 1015 q 617 945 617 1015 q 551 876 617 876 q 486 945 486 876 q 551 1015 486 1015 "},"":{"x_min":249,"x_max":491.734375,"ha":834,"o":"m 397 990 l 491 990 l 491 456 l 390 456 l 390 771 q 396 906 390 817 q 345 862 368 876 l 298 828 l 249 887 l 397 990 "},"W":{"x_min":1,"x_max":833,"ha":834,"o":"m 358 684 l 478 684 l 577 330 q 626 122 618 181 q 670 542 627 158 l 717 992 l 833 992 l 706 0 l 577 0 l 462 393 q 418 584 435 487 q 373 392 396 467 l 267 0 l 139 0 l 1 992 l 116 992 l 176 542 q 203 285 191 422 q 215 122 215 148 q 262 333 231 224 l 358 684 "},"":{"x_min":41,"x_max":803.484375,"ha":834,"o":"m 41 0 l 383 734 l 347 842 q 294 937 324 912 q 216 961 265 961 q 145 953 178 961 l 145 1052 q 231 1064 189 1064 q 376 1018 328 1064 q 472 829 424 972 l 693 163 q 762 88 718 88 q 803 93 782 88 l 803 3 q 725 -14 769 -14 q 640 13 669 -14 q 591 99 610 40 l 500 383 q 436 611 453 528 l 432 611 q 351 393 407 517 l 169 0 l 41 0 "},">":{"x_min":103,"x_max":730,"ha":834,"o":"m 103 258 l 588 490 l 103 722 l 103 831 l 730 525 l 730 455 l 103 150 l 103 258 "},"":{"x_min":72.328125,"x_max":733.859375,"ha":834,"o":"m 733 745 l 733 642 l 411 642 l 411 230 q 553 84 411 84 q 683 97 625 84 l 683 5 q 533 -18 625 -18 q 288 216 288 -18 l 288 642 l 72 642 l 72 691 l 163 745 l 733 745 "},"":{"x_min":85,"x_max":749,"ha":834,"o":"m 749 993 l 749 349 q 663 79 749 173 q 412 -14 578 -14 q 85 352 85 -14 l 85 991 l 211 991 l 211 359 q 419 97 211 97 q 622 361 619 97 l 622 993 l 749 993 m 572 -217 l 572 -293 q 466 -309 522 -309 q 342 -271 385 -309 q 300 -171 300 -234 q 424 0 300 -73 l 516 0 q 397 -162 397 -85 q 486 -227 397 -227 q 572 -217 532 -227 "},"":{"x_min":1,"x_max":833,"ha":834,"o":"m 358 684 l 478 684 l 577 330 q 626 122 618 181 q 670 542 627 158 l 717 992 l 833 992 l 706 0 l 577 0 l 462 393 q 418 584 435 487 q 373 392 396 467 l 267 0 l 139 0 l 1 992 l 116 992 l 176 542 q 203 285 191 422 q 215 122 215 148 q 262 333 231 224 l 358 684 m 644 1071 l 561 1071 q 418 1196 504 1108 q 275 1071 328 1104 l 194 1071 l 194 1089 q 234 1134 210 1108 q 353 1293 328 1239 l 484 1293 q 603 1134 509 1239 l 644 1089 l 644 1071 "},"":{"x_min":303,"x_max":530,"ha":834,"o":"m 463 992 q 530 652 490 816 l 423 652 q 303 977 339 837 l 313 992 l 463 992 "},"":{"x_min":0,"x_max":778,"ha":834,"o":"m 92 0 l 92 445 l 0 445 l 0 557 l 92 557 l 92 992 l 323 992 q 658 863 538 992 q 778 505 778 735 q 653 130 778 260 q 296 0 529 0 l 92 0 m 218 884 l 218 557 l 476 557 l 476 445 l 218 445 l 218 107 l 283 107 q 644 501 644 107 q 309 884 644 884 l 218 884 "},"":{"x_min":22,"x_max":811,"ha":834,"o":"m 811 0 l 676 0 l 478 625 q 415 856 435 760 q 355 629 384 720 l 154 0 l 22 0 l 352 992 l 479 992 l 811 0 "},"":{"x_min":330,"x_max":502,"ha":834,"o":"m 416 585 q 502 490 502 585 q 416 396 502 396 q 330 490 330 396 q 416 585 330 585 "},"":{"x_min":36,"x_max":797,"ha":834,"o":"m 797 0 l 653 0 l 412 430 l 164 0 l 36 0 l 343 518 l 57 992 l 191 992 l 416 612 l 643 992 l 773 992 l 486 522 l 797 0 "},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 "},"r":{"x_min":179,"x_max":719,"ha":834,"o":"m 719 727 l 685 614 q 533 650 602 650 q 362 586 422 650 q 302 404 302 523 l 302 0 l 179 0 l 179 745 l 279 745 l 294 608 l 299 608 q 410 723 351 688 q 555 758 469 758 q 719 727 636 758 "},"":{"x_min":-1.25,"x_max":835.25,"ha":834,"o":"m 363 383 l 363 745 l 486 745 l 486 383 l 709 745 l 835 745 l 600 383 l 833 0 l 701 0 l 486 377 l 486 0 l 363 0 l 363 377 l 133 0 l 0 0 l 250 383 l -1 745 l 123 745 l 363 383 "},"":{"x_min":54.296875,"x_max":784.78125,"ha":834,"o":"m 209 49 l 147 -51 l 54 0 l 136 134 q 57 498 57 259 q 419 1007 57 1007 q 629 935 545 1007 l 691 1038 l 784 985 l 700 849 q 778 496 778 722 q 684 118 778 251 q 417 -14 590 -14 q 209 49 289 -14 m 216 265 l 565 832 q 419 895 511 895 q 190 497 190 895 q 216 265 190 353 m 620 719 l 273 155 q 417 97 327 97 q 589 195 535 97 q 644 497 644 293 q 620 719 644 638 "},"":{"x_min":23,"x_max":809,"ha":834,"o":"m 415 490 l 672 992 l 809 992 l 479 386 l 479 0 l 353 0 l 353 379 l 23 992 l 160 992 l 415 490 m 473 1071 l 390 1071 q 206 1278 278 1167 l 206 1293 l 354 1293 q 473 1089 413 1172 l 473 1071 "},"":{"x_min":103,"x_max":729,"ha":834,"o":"m 415 812 q 493 727 493 812 q 415 642 493 642 q 338 727 338 642 q 415 812 338 812 m 103 439 l 103 541 l 729 541 l 729 439 l 103 439 m 415 338 q 493 253 493 338 q 415 169 493 169 q 338 253 338 169 q 415 338 338 338 "},"":{"x_min":117,"x_max":720,"ha":834,"o":"m 720 717 l 677 610 q 496 650 576 650 q 244 369 244 650 q 489 93 244 93 q 707 135 595 93 l 707 27 q 483 -14 616 -14 q 213 84 309 -14 q 117 367 117 183 q 215 658 117 558 q 492 758 313 758 q 720 717 612 758 "},"h":{"x_min":109,"x_max":725,"ha":834,"o":"m 601 0 l 601 479 q 440 655 601 655 q 232 385 232 655 l 232 0 l 109 0 l 109 1055 l 232 1055 l 232 741 l 227 644 l 233 644 q 461 758 303 758 q 725 486 725 758 l 725 0 l 601 0 "},"f":{"x_min":106,"x_max":756,"ha":834,"o":"m 708 648 l 444 648 l 444 0 l 321 0 l 321 648 l 106 648 l 106 726 l 321 749 l 321 814 q 382 1004 321 945 q 584 1063 443 1063 q 756 1039 672 1063 l 728 942 q 587 960 657 960 q 474 926 504 960 q 444 815 444 893 l 444 745 l 708 745 l 708 648 "},"":{"x_min":158,"x_max":674,"ha":834,"o":"m 457 652 l 447 666 q 567 992 483 806 l 674 992 q 607 652 632 818 l 457 652 m 168 652 l 158 666 q 278 992 194 806 l 385 992 q 318 652 343 818 l 168 652 "},"A":{"x_min":22,"x_max":812,"ha":834,"o":"m 681 0 l 583 307 l 250 307 l 150 0 l 22 0 l 350 996 l 482 996 l 812 0 l 681 0 m 547 419 l 457 706 q 415 860 431 791 q 384 736 401 793 l 286 419 l 547 419 "},"O":{"x_min":57,"x_max":778,"ha":834,"o":"m 417 -14 q 57 498 57 -14 q 419 1007 57 1007 q 685 874 592 1007 q 778 496 778 741 q 684 118 778 251 q 417 -14 590 -14 m 417 97 q 589 195 535 97 q 644 497 644 293 q 589 799 644 702 q 419 895 533 895 q 190 497 190 895 q 417 97 190 97 "},"":{"x_min":0,"x_max":778,"ha":834,"o":"m 92 0 l 92 445 l 0 445 l 0 557 l 92 557 l 92 992 l 323 992 q 658 863 538 992 q 778 505 778 735 q 653 130 778 260 q 296 0 529 0 l 92 0 m 218 884 l 218 557 l 476 557 l 476 445 l 218 445 l 218 107 l 283 107 q 644 501 644 107 q 309 884 644 884 l 218 884 "},"":{"x_min":54.296875,"x_max":784.78125,"ha":834,"o":"m 209 49 l 147 -51 l 54 0 l 136 134 q 57 498 57 259 q 419 1007 57 1007 q 629 935 545 1007 l 691 1038 l 784 985 l 700 849 q 778 496 778 722 q 684 118 778 251 q 417 -14 590 -14 q 209 49 289 -14 m 216 265 l 565 832 q 419 895 511 895 q 190 497 190 895 q 216 265 190 353 m 620 719 l 273 155 q 417 97 327 97 q 589 195 535 97 q 644 497 644 293 q 620 719 644 638 m 322 1089 q 440 1293 386 1179 l 589 1293 l 589 1278 q 404 1071 512 1161 l 322 1071 l 322 1089 "},"":{"x_min":12,"x_max":818,"ha":834,"o":"m 160 990 l 254 990 l 254 456 l 153 456 l 153 771 q 159 906 153 817 q 108 862 131 876 l 61 828 l 12 887 l 160 990 m 679 992 l 184 0 l 77 0 l 571 992 l 679 992 m 706 287 q 818 147 818 230 q 766 35 818 77 q 630 -7 714 -7 q 488 33 538 -7 q 439 143 439 73 q 532 281 439 231 q 456 412 456 335 q 504 511 456 474 q 629 549 553 549 q 752 512 704 549 q 800 412 800 475 q 706 287 800 334 m 631 321 q 698 413 698 355 q 627 480 698 480 q 557 413 557 480 q 631 321 557 357 m 616 247 q 540 142 540 203 q 627 61 540 61 q 716 142 716 61 q 625 243 716 203 l 616 247 "},"":{"x_min":1,"x_max":833,"ha":834,"o":"m 358 684 l 478 684 l 577 330 q 626 122 618 181 q 670 542 627 158 l 717 992 l 833 992 l 706 0 l 577 0 l 462 393 q 418 584 435 487 q 373 392 396 467 l 267 0 l 139 0 l 1 992 l 116 992 l 176 542 q 203 285 191 422 q 215 122 215 148 q 262 333 231 224 l 358 684 m 496 1071 l 413 1071 q 229 1278 301 1167 l 229 1293 l 377 1293 q 496 1089 436 1172 l 496 1071 "},"":{"x_min":69,"x_max":762,"ha":834,"o":"m 479 0 l 353 0 l 353 880 l 69 880 l 69 992 l 762 992 l 762 880 l 479 880 l 479 0 m 641 1274 q 600 1229 624 1255 q 481 1071 505 1122 l 350 1071 q 231 1229 326 1122 l 191 1274 l 191 1293 l 272 1293 q 415 1166 328 1256 q 558 1293 498 1253 l 641 1293 l 641 1274 "},"":{"x_min":54,"x_max":784,"ha":834,"o":"m 459 1054 l 459 91 q 663 386 663 110 q 624 745 663 556 l 741 745 q 784 390 784 557 q 459 -12 784 5 l 459 -334 l 354 -334 l 354 -12 q 125 85 196 -6 q 54 376 54 176 l 54 745 l 174 745 l 174 386 q 354 90 174 101 l 354 1054 l 459 1054 "},"":{"x_min":128,"x_max":719,"ha":834,"o":"m 719 727 l 685 614 q 533 650 602 650 q 362 586 422 650 q 302 404 302 523 l 302 0 l 179 0 l 179 745 l 279 745 l 294 608 l 299 608 q 410 723 351 688 q 555 758 469 758 q 719 727 636 758 m 128 -288 q 185 -85 170 -193 l 306 -85 l 306 -98 q 273 -182 306 -113 q 195 -307 240 -251 l 128 -307 l 128 -288 "}},"cssFontWeight":"normal","ascender":1290,"underlinePosition":-154,"cssFontStyle":"normal","boundingBox":{"yMin":-377,"xMin":-211,"yMax":1467,"xMax":892},"resolution":1000,"original_font_information":{"postscript_name":"DroidSansMono","version_string":"Version 1.00 build 107","vendor_url":"http://www.ascendercorp.com/","full_font_name":"Droid Sans Mono","font_family_name":"Droid Sans Mono","copyright":"Digitized data copyright  2006, Google Corporation.","description":"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.","trademark":"Droid is a trademark of Google and may be registered in certain jurisdictions.","designer":"","designer_url":"http://www.ascendercorp.com/typedesigners.html","unique_font_identifier":"Ascender - Droid Sans Mono","license_url":"http://ascendercorp.com/eula10.html","license_description":"This font software is the valuable property of Ascender Corporation and/or its suppliers and its use by you is covered under the terms of a license agreement. This font software is licensed to you by Ascender Corporation for your personal or business use on up to five personal computers. You may not use this font software on more than five personal computers unless you have obtained a license from Ascender to do so. Except as specifically permitted by the license, you may not copy this font software.\\n\\nIf you have any questions, please review the license agreement you received with this font software, and/or contact Ascender Corporation. \\n\\nContact Information:\\nAscender Corporation\\nWeb http://www.ascendercorp.com/","manufacturer_name":"Ascender Corporation","font_sub_family_name":"Regular"},"descender":-328,"familyName":"Droid Sans Mono","lineHeight":1617,"underlineThickness":102}');var rf,sf,of,af,lf,hf,cf,uf,df,mf,pf,ff=!1,gf="";function xf(){!function(){for(;df.children.length;)df.remove(df.children[0])}(),gf="lobby"===gf?"level":"levelCannon"===gf?"cannon":"cannon"===gf?"level":"level"===gf?"levelSmall":"lobby",console.log(gf),"lobby"===gf?function(t){(new Ql).setPath("spaceship/").load("spaceship.glb",(function(e){(ec=new _e).scale.set(2,2,2),ec.position.set(0,0,-10),ec.add(e.scene),t.add(ec)})),(new Kh).load("fonts/olga/Olga_Regular.json",(function(e){var n=new tc("Space\nrocks",{font:e,size:20,height:20,curveSegments:4,bevelThickness:2,bevelSize:1.5,bevelEnabled:!0});n.computeBoundingBox();var i=-.5*(n.boundingBox.max.x-n.boundingBox.min.x);(nc=new mn(n,ic)).position.x=i,nc.position.y=1,nc.position.z=-100,nc.rotation.x=0,nc.rotation.y=2*Math.PI,t.add(nc)}))}(df):"levelCannon"===gf?function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((Bp=new $m).gravity.set(0,0,0),e){var n=.003,i=Jp[1]-Jp[0],r=new fn(i,i,i),s=new ya({transparent:!0,opacity:.2});(Op=new mn(r,s)).position.set(0,1,0),Op.scale.set(n,n,n),t.add(Op)}else Op=t;zp=[];for(var o=0;o<50;o++){var a=Pp(Jp);a.asteroid=ef(a),zp.push(a),Op.add(a.asteroid)}nf()}(df,!0):"cannon"===gf?function(t){Mp=1/60,(fp=new $m).gravity.set(0,0,0),xp=new ed(1),(qp=new Rc({mass:5})).addShape(xp),qp.position.set(3,1,-4),qp.velocity.set(-5,0,0),fp.addBody(qp),yp=new _a(1,15,15),bp=new mn(yp,new Ma({color:16711680})),qp.threemesh=bp,t.add(bp),gp=new ed(1),(vp=new Rc({mass:5})).addShape(gp),vp.position.set(-3,1,-4),vp.velocity.set(5,0,0),fp.addBody(vp),_p=new _a(1,15,15),wp=new mn(_p,new Ma({color:16711680})),vp.threemesh=wp,t.add(wp)}(df):"level"===gf?Gp(df,sf):"levelSmall"===gf&&Gp(df,sf,!0)}function vf(t){"lobby"===gf?function(t){ec&&(ec.rotation.x+=4*t,ec.rotation.y+=4*t,ec.rotation.z+=4*t)}(t):"levelCannon"===gf?function(t){if(Op&&(Op.rotation.y+=t/20),Bp&&zp){Bp.step(t);var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Zp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zp(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(zp);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.body&&i.body.threemesh&&(i.position.x=i.body.position.x,i.position.y=i.body.position.y,i.position.z=i.body.position.z,i.body.threemesh.position.copy(i.body.position),i.body.threemesh.quaternion.copy(i.body.quaternion)),Rp(i,Jp),Lp(i,Jp),Dp(i.outer)&&(console.log(i.position),Cp(i,Jp),i.body.position.copy(i.position),i.body.threemesh.position.copy(i.body.position))}}catch(t){n.e(t)}finally{n.f()}}}(t):"cannon"===gf?fp&&(fp.step(Mp),fp.bodies.forEach((function(t){void 0!==t.threemesh&&(t.threemesh.position.copy(t.position),t.threemesh.quaternion.copy(t.quaternion))}))):("level"===gf||"levelSmall"===gf)&&Yp(t)}function qf(){rf.aspect=window.innerWidth/window.innerHeight,rf.updateProjectionMatrix(),lf.setSize(window.innerWidth,window.innerHeight)}function _f(t,e,n){if(0===n)return mf.moveState[t]=0,void(mf.moveState[e]=0);mf.moveState[t]=n<-.5?1:0,mf.moveState[e]=n>.5?1:0}!function(){af=new ws,uf=new gl,af.add(new Za(6316128,4210752));var t=new ll(16777215);t.position.set(100,100,100).normalize(),af.add(t);var e=(new ja).load(["milkyway/dark-s_px.jpg","milkyway/dark-s_nx.jpg","milkyway/dark-s_py.jpg","milkyway/dark-s_ny.jpg","milkyway/dark-s_pz.jpg","milkyway/dark-s_nz.jpg"]);e.mapping=i,af.background=e,df=new _e,af.add(df),xf(),(rf=new yn(50,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,1.6,1.5),(sf=new _e).position.set(0,0,0),sf.add(rf),af.add(sf),of=new _e,rf.add(of),(lf=new qs({antialias:!0})).setPixelRatio(window.devicePixelRatio),lf.setSize(window.innerWidth,window.innerHeight),lf.xr.enabled=!0,document.body.appendChild(lf.domElement),(mf=new Zh(sf,lf.domElement)).movementSpeed=50,mf.rollSpeed=Math.PI/24,mf.autoForward=!1,mf.dragToLook=!1,mf.dispose(),document.body.appendChild(Yl.createButton(lf)),lf.xr.addEventListener("sessionstart",(function(){hf=new wl,rf.add(hf),cf=new bl(hf),(new fl).load("sfx/spaceship-engine-idle-1.wav",(function(t){cf.setBuffer(t),cf.setLoop(!0),cf.setVolume(.5),cf.play()})),pf=lf.xr.getSession()})),lf.xr.addEventListener("sessionend",(function(){console.log("session ended")})),window.addEventListener("resize",qf);var n=new Ye;n.setFromPoints([new vt(0,0,0),new vt(0,0,-5)]);var r=lf.xr.getController(0);r.add(new ho(n)),sf.add(r);var s=lf.xr.getController(1);s.addEventListener("squeezestart",(function(){xf()})),s.add(new ho(n)),sf.add(s);var o=new Xh,a=lf.xr.getControllerGrip(0);a.add(o.createControllerModel(a)),sf.add(a);var l=lf.xr.getControllerGrip(1);l.add(o.createControllerModel(l)),sf.add(l);var h=new Kl(lf,rf);af.add(h)}(),lf.setAnimationLoop((function(){var t=uf.getDelta();(function(){if(pf){var t=[];pf.inputSources.forEach((function(e,n){e.gamepad&&(ff||(console.log(e.gamepad),ff=!0),t.push(e.gamepad.axes),e.gamepad.axes.forEach((function(t,e){0===n?2===e?_f("rollLeft","rollRight",t):3===e&&_f("pitchDown","pitchUp",t):1===n&&(2===e?_f("yawLeft","yawRight",t):3===e&&_f("forward","back",t))})),e.gamepad.buttons.forEach((function(t,e){})),mf.updateMovementVector(),mf.updateRotationVector(),t.push(mf.moveState))}))}})(),mf.update(t),vf(t),lf.render(af,rf)})),main=t})();